<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CedarBackup3 package &#8212; Cedar Backup v3  documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="Cedar Backup v3  documentation" href="index.html" />
    <link rel="next" title="CedarBackup3.actions package" href="CedarBackup3.actions.html" />
    <link rel="prev" title="Cedar Backup v3 API Documentation" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="CedarBackup3.actions.html" title="CedarBackup3.actions package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Cedar Backup v3 API Documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cedar Backup v3  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-CedarBackup3">
<span id="cedarbackup3-package"></span><h1>CedarBackup3 package<a class="headerlink" href="#module-CedarBackup3" title="Permalink to this headline">¶</a></h1>
<p>Implements local and remote backups to CD or DVD media.</p>
<p>Cedar Backup is a software package designed to manage system backups for a pool
of local and remote machines.  Cedar Backup understands how to back up
filesystem data as well as MySQL and PostgreSQL databases and Subversion
repositories.  It can also be easily extended to support other kinds of data
sources.</p>
<p>Cedar Backup is focused around weekly backups to a single CD or DVD disc, with
the expectation that the disc will be changed or overwritten at the beginning
of each week.  If your hardware is new enough, Cedar Backup can write
multisession discs, allowing you to add incremental data to a disc on a daily
basis.</p>
<p>Besides offering command-line utilities to manage the backup process, Cedar
Backup provides a well-organized library of backup-related functionality,
written in the Python programming language.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="CedarBackup3.actions.html">CedarBackup3.actions package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.actions.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.actions.html#module-CedarBackup3.actions.collect">CedarBackup3.actions.collect module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.actions.html#module-CedarBackup3.actions.constants">CedarBackup3.actions.constants module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.actions.html#module-CedarBackup3.actions.initialize">CedarBackup3.actions.initialize module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.actions.html#module-CedarBackup3.actions.purge">CedarBackup3.actions.purge module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.actions.html#module-CedarBackup3.actions.rebuild">CedarBackup3.actions.rebuild module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.actions.html#module-CedarBackup3.actions.stage">CedarBackup3.actions.stage module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.actions.html#module-CedarBackup3.actions.store">CedarBackup3.actions.store module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.actions.html#module-CedarBackup3.actions.util">CedarBackup3.actions.util module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.actions.html#module-CedarBackup3.actions.validate">CedarBackup3.actions.validate module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CedarBackup3.extend.html">CedarBackup3.extend package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.extend.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.extend.html#module-CedarBackup3.extend.amazons3">CedarBackup3.extend.amazons3 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.extend.html#module-CedarBackup3.extend.capacity">CedarBackup3.extend.capacity module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.extend.html#module-CedarBackup3.extend.encrypt">CedarBackup3.extend.encrypt module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.extend.html#module-CedarBackup3.extend.mbox">CedarBackup3.extend.mbox module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="CedarBackup3.extend.html#backing-up-email">Backing up email</a></li>
<li class="toctree-l3"><a class="reference internal" href="CedarBackup3.extend.html#what-is-this-extension">What is this extension?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.extend.html#module-CedarBackup3.extend.mysql">CedarBackup3.extend.mysql module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.extend.html#module-CedarBackup3.extend.postgresql">CedarBackup3.extend.postgresql module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.extend.html#module-CedarBackup3.extend.split">CedarBackup3.extend.split module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.extend.html#module-CedarBackup3.extend.subversion">CedarBackup3.extend.subversion module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.extend.html#module-CedarBackup3.extend.sysinfo">CedarBackup3.extend.sysinfo module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CedarBackup3.tools.html">CedarBackup3.tools package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.tools.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.tools.html#module-CedarBackup3.tools.amazons3">CedarBackup3.tools.amazons3 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.tools.html#module-CedarBackup3.tools.span">CedarBackup3.tools.span module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CedarBackup3.writers.html">CedarBackup3.writers package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.writers.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.writers.html#module-CedarBackup3.writers.cdwriter">CedarBackup3.writers.cdwriter module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="CedarBackup3.writers.html#module-attributes">Module Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.writers.html#module-CedarBackup3.writers.dvdwriter">CedarBackup3.writers.dvdwriter module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="CedarBackup3.writers.html#id1">Module Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="CedarBackup3.writers.html#module-CedarBackup3.writers.util">CedarBackup3.writers.util module</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-CedarBackup3.action">
<span id="cedarbackup3-action-module"></span><h2>CedarBackup3.action module<a class="headerlink" href="#module-CedarBackup3.action" title="Permalink to this headline">¶</a></h2>
<p>Provides interface backwards compatibility.</p>
<p>In Cedar Backup 2.10.0, a refactoring effort took place to reorganize the code
for the standard actions.  The code formerly in action.py was split into
various other files in the CedarBackup3.actions package.  This mostly-empty
file remains to preserve the Cedar Backup library interface.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-CedarBackup3.cli">
<span id="cedarbackup3-cli-module"></span><h2>CedarBackup3.cli module<a class="headerlink" href="#module-CedarBackup3.cli" title="Permalink to this headline">¶</a></h2>
<p>Provides command-line interface implementation for the cback3 script.</p>
<div class="section" id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The functionality in this module encapsulates the command-line interface for
the cback3 script.  The cback3 script itself is very short, basically just an
invokation of one function implemented here.  That, in turn, makes it
simpler to validate the command line interface (for instance, it&#8217;s easier to
run pychecker against a module, and unit tests are easier, too).</p>
<p>The objects and functions implemented in this module are probably not useful
to any code external to Cedar Backup.   Anyone else implementing their own
command-line interface would have to reimplement (or at least enhance) all
of this anyway.</p>
</div></blockquote>
</div>
<div class="section" id="backwards-compatibility">
<h3>Backwards Compatibility<a class="headerlink" href="#backwards-compatibility" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The command line interface has changed between Cedar Backup 1.x and Cedar
Backup 2.x.  Some new switches have been added, and the actions have become
simple arguments rather than switches (which is a much more standard command
line format).  Old 1.x command lines are generally no longer valid.</div></blockquote>
</div>
<div class="section" id="module-attributes">
<h3>Module Attributes<a class="headerlink" href="#module-attributes" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="CedarBackup3.cli.DEFAULT_CONFIG">
<code class="descclassname">CedarBackup3.cli.</code><code class="descname">DEFAULT_CONFIG</code><a class="headerlink" href="#CedarBackup3.cli.DEFAULT_CONFIG" title="Permalink to this definition">¶</a></dt>
<dd><p>The default configuration file</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.DEFAULT_LOGFILE">
<code class="descclassname">CedarBackup3.cli.</code><code class="descname">DEFAULT_LOGFILE</code><a class="headerlink" href="#CedarBackup3.cli.DEFAULT_LOGFILE" title="Permalink to this definition">¶</a></dt>
<dd><p>The default log file path</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.DEFAULT_OWNERSHIP">
<code class="descclassname">CedarBackup3.cli.</code><code class="descname">DEFAULT_OWNERSHIP</code><a class="headerlink" href="#CedarBackup3.cli.DEFAULT_OWNERSHIP" title="Permalink to this definition">¶</a></dt>
<dd><p>Default ownership for the logfile</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.DEFAULT_MODE">
<code class="descclassname">CedarBackup3.cli.</code><code class="descname">DEFAULT_MODE</code><a class="headerlink" href="#CedarBackup3.cli.DEFAULT_MODE" title="Permalink to this definition">¶</a></dt>
<dd><p>Default file permissions mode on the logfile</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.VALID_ACTIONS">
<code class="descclassname">CedarBackup3.cli.</code><code class="descname">VALID_ACTIONS</code><a class="headerlink" href="#CedarBackup3.cli.VALID_ACTIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>List of valid actions</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.COMBINE_ACTIONS">
<code class="descclassname">CedarBackup3.cli.</code><code class="descname">COMBINE_ACTIONS</code><a class="headerlink" href="#CedarBackup3.cli.COMBINE_ACTIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>List of actions which can be combined with other actions</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.NONCOMBINE_ACTIONS">
<code class="descclassname">CedarBackup3.cli.</code><code class="descname">NONCOMBINE_ACTIONS</code><a class="headerlink" href="#CedarBackup3.cli.NONCOMBINE_ACTIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>List of actions which cannot be combined with other actions</p>
</dd></dl>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.cli.Options">
<em class="property">class </em><code class="descclassname">CedarBackup3.cli.</code><code class="descname">Options</code><span class="sig-paren">(</span><em>argumentList=None</em>, <em>argumentString=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/cli.html#Options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.cli.Options" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing command-line options for the cback3 script.</p>
<p>The <code class="docutils literal"><span class="pre">Options</span></code> class is a Python object representation of the command-line
options of the cback3 script.</p>
<p>The object representation is two-way: a command line string or a list of
command line arguments can be used to create an <code class="docutils literal"><span class="pre">Options</span></code> object, and then
changes to the object can be propogated back to a list of command-line
arguments or to a command-line string.  An <code class="docutils literal"><span class="pre">Options</span></code> object can even be
created from scratch programmatically (if you have a need for that).</p>
<p>There are two main levels of validation in the <code class="docutils literal"><span class="pre">Options</span></code> class.  The first
is field-level validation.  Field-level validation comes into play when a
given field in an object is assigned to or updated.  We use Python&#8217;s
<code class="docutils literal"><span class="pre">property</span></code> functionality to enforce specific validations on field values,
and in some places we even use customized list classes to enforce
validations on list members.  You should expect to catch a <code class="docutils literal"><span class="pre">ValueError</span></code>
exception when making assignments to fields if you are programmatically
filling an object.</p>
<p>The second level of validation is post-completion validation.  Certain
validations don&#8217;t make sense until an object representation of options is
fully &#8220;complete&#8221;.  We don&#8217;t want these validations to apply all of the time,
because it would make building up a valid object from scratch a real pain.
For instance, we might have to do things in the right order to keep from
throwing exceptions, etc.</p>
<p>All of these post-completion validations are encapsulated in the
<a class="reference internal" href="#CedarBackup3.cli.Options.validate" title="CedarBackup3.cli.Options.validate"><code class="xref any py py-meth docutils literal"><span class="pre">Options.validate</span></code></a> method.  This method can be called at any time by a
client, and will always be called immediately after creating a <code class="docutils literal"><span class="pre">Options</span></code>
object from a command line and before exporting a <code class="docutils literal"><span class="pre">Options</span></code> object back to
a command line.  This way, we get acceptable ease-of-use but we also don&#8217;t
accept or emit invalid command lines.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.cli.Options.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>argumentList=None</em>, <em>argumentString=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/cli.html#Options.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.cli.Options.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes an options object.</p>
<p>If you initialize the object without passing either <code class="docutils literal"><span class="pre">argumentList</span></code> or
<code class="docutils literal"><span class="pre">argumentString</span></code>, the object will be empty and will be invalid until it
is filled in properly.</p>
<p>No reference to the original arguments is saved off by this class.  Once
the data has been parsed (successfully or not) this original information
is discarded.</p>
<p>The argument list is assumed to be a list of arguments, not including the
name of the command, something like <code class="docutils literal"><span class="pre">sys.argv[1:]</span></code>.  If you pass
<code class="docutils literal"><span class="pre">sys.argv</span></code> instead, things are not going to work.</p>
<p>The argument string will be parsed into an argument list by the
<a class="reference internal" href="#CedarBackup3.util.splitCommandLine" title="CedarBackup3.util.splitCommandLine"><code class="xref any py py-func docutils literal"><span class="pre">util.splitCommandLine</span></code></a> function (see the documentation for that
function for some important notes about its limitations).  There is an
assumption that the resulting list will be equivalent to <code class="docutils literal"><span class="pre">sys.argv[1:]</span></code>,
just like <code class="docutils literal"><span class="pre">argumentList</span></code>.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> argument is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.cli.Options.validate" title="CedarBackup3.cli.Options.validate"><code class="xref any py py-meth docutils literal"><span class="pre">Options.validate</span></code></a>
method will be called (with its default arguments) after successfully
parsing any passed-in command line.  This validation ensures that
appropriate actions, etc. have been specified.  Keep in mind that even if
<code class="docutils literal"><span class="pre">validate</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, it might not be possible to parse the passed-in
command line, so an exception might still be raised.</p>
<p><em>Note:</em> The command line format is specified by the <code class="docutils literal"><span class="pre">_usage</span></code> function.
Call <code class="docutils literal"><span class="pre">_usage</span></code> to see a usage statement for the cback3 script.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to read in
invalid command line arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>argumentList</strong> (List of arguments, i.e. <code class="docutils literal"><span class="pre">sys.argv</span></code>) &#8211; Command line for a program</li>
<li><strong>argumentString</strong> (<em>String, i.e. &quot;cback3 --verbose stage store&quot;</em>) &#8211; Command line for a program</li>
<li><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the command line after parsing it</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">getopt.GetoptError</span></code> &#8211; If the command-line arguments could not be parsed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the command-line arguments are invalid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.actions">
<code class="descname">actions</code><a class="headerlink" href="#CedarBackup3.cli.Options.actions" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line actions list.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.cli.Options.buildArgumentList">
<code class="descname">buildArgumentList</code><span class="sig-paren">(</span><em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/cli.html#Options.buildArgumentList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.cli.Options.buildArgumentList" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts options into a list of command line arguments.</p>
<p>The original order of the various arguments (if, indeed, the object was
initialized with a command-line) is not preserved in this generated
argument list.   Besides that, the argument list is normalized to use the
long option names (i.e. &#8211;version rather than -V).  The resulting list
will be suitable for passing back to the constructor in the
<code class="docutils literal"><span class="pre">argumentList</span></code> parameter.  Unlike <a class="reference internal" href="#CedarBackup3.cli.Options.buildArgumentString" title="CedarBackup3.cli.Options.buildArgumentString"><code class="xref any py py-meth docutils literal"><span class="pre">buildArgumentString</span></code></a>, string
arguments are not quoted here, because there is no need for it.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> parameter is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.cli.Options.validate" title="CedarBackup3.cli.Options.validate"><code class="xref any py py-meth docutils literal"><span class="pre">Options.validate</span></code></a>
method will be called (with its default arguments) against the
options before extracting the command line.  If the options are not valid,
then an argument list will not be extracted.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to extract an
invalid command line.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the options before extracting the command line</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List representation of command-line arguments</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If options within the object are invalid</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.cli.Options.buildArgumentString">
<code class="descname">buildArgumentString</code><span class="sig-paren">(</span><em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/cli.html#Options.buildArgumentString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.cli.Options.buildArgumentString" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts options into a string of command-line arguments.</p>
<p>The original order of the various arguments (if, indeed, the object was
initialized with a command-line) is not preserved in this generated
argument string.   Besides that, the argument string is normalized to use
the long option names (i.e. &#8211;version rather than -V) and to quote all
string arguments with double quotes (<code class="docutils literal"><span class="pre">&quot;</span></code>).  The resulting string will be
suitable for passing back to the constructor in the <code class="docutils literal"><span class="pre">argumentString</span></code>
parameter.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> parameter is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.cli.Options.validate" title="CedarBackup3.cli.Options.validate"><code class="xref any py py-meth docutils literal"><span class="pre">Options.validate</span></code></a>
method will be called (with its default arguments) against the options
before extracting the command line.  If the options are not valid, then
an argument string will not be extracted.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to extract an
invalid command line.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the options before extracting the command line</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">String representation of command-line arguments</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If options within the object are invalid</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.config">
<code class="descname">config</code><a class="headerlink" href="#CedarBackup3.cli.Options.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line configuration file (<code class="docutils literal"><span class="pre">-c,--config</span></code>) parameter.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.debug">
<code class="descname">debug</code><a class="headerlink" href="#CedarBackup3.cli.Options.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line debug (<code class="docutils literal"><span class="pre">-d,--debug</span></code>) flag.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.diagnostics">
<code class="descname">diagnostics</code><a class="headerlink" href="#CedarBackup3.cli.Options.diagnostics" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line diagnostics (<code class="docutils literal"><span class="pre">-D,--diagnostics</span></code>) flag.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.full">
<code class="descname">full</code><a class="headerlink" href="#CedarBackup3.cli.Options.full" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line full-backup (<code class="docutils literal"><span class="pre">-f,--full</span></code>) flag.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.help">
<code class="descname">help</code><a class="headerlink" href="#CedarBackup3.cli.Options.help" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line help (<code class="docutils literal"><span class="pre">-h,--help</span></code>) flag.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.logfile">
<code class="descname">logfile</code><a class="headerlink" href="#CedarBackup3.cli.Options.logfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line logfile (<code class="docutils literal"><span class="pre">-l,--logfile</span></code>) parameter.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.managed">
<code class="descname">managed</code><a class="headerlink" href="#CedarBackup3.cli.Options.managed" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line managed (<code class="docutils literal"><span class="pre">-M,--managed</span></code>) flag.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.managedOnly">
<code class="descname">managedOnly</code><a class="headerlink" href="#CedarBackup3.cli.Options.managedOnly" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line managed-only (<code class="docutils literal"><span class="pre">-N,--managed-only</span></code>) flag.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.mode">
<code class="descname">mode</code><a class="headerlink" href="#CedarBackup3.cli.Options.mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line mode (<code class="docutils literal"><span class="pre">-m,--mode</span></code>) parameter.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.output">
<code class="descname">output</code><a class="headerlink" href="#CedarBackup3.cli.Options.output" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line output (<code class="docutils literal"><span class="pre">-O,--output</span></code>) flag.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.owner">
<code class="descname">owner</code><a class="headerlink" href="#CedarBackup3.cli.Options.owner" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line owner (<code class="docutils literal"><span class="pre">-o,--owner</span></code>) parameter, as tuple <code class="docutils literal"><span class="pre">(user,group)</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.quiet">
<code class="descname">quiet</code><a class="headerlink" href="#CedarBackup3.cli.Options.quiet" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line quiet (<code class="docutils literal"><span class="pre">-q,--quiet</span></code>) flag.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.stacktrace">
<code class="descname">stacktrace</code><a class="headerlink" href="#CedarBackup3.cli.Options.stacktrace" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line stacktrace (<code class="docutils literal"><span class="pre">-s,--stack</span></code>) flag.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.cli.Options.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/cli.html#Options.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.cli.Options.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates command-line options represented by the object.</p>
<p>Unless <code class="docutils literal"><span class="pre">--help</span></code> or <code class="docutils literal"><span class="pre">--version</span></code> are supplied, at least one action must
be specified.  Other validations (as for allowed values for particular
options) will be taken care of at assignment time by the properties
functionality.</p>
<p><em>Note:</em> The command line format is specified by the <code class="docutils literal"><span class="pre">_usage</span></code> function.
Call <code class="docutils literal"><span class="pre">_usage</span></code> to see a usage statement for the cback3 script.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the validations fails</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.verbose">
<code class="descname">verbose</code><a class="headerlink" href="#CedarBackup3.cli.Options.verbose" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line verbose (<code class="docutils literal"><span class="pre">-b,--verbose</span></code>) flag.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.cli.Options.version">
<code class="descname">version</code><a class="headerlink" href="#CedarBackup3.cli.Options.version" title="Permalink to this definition">¶</a></dt>
<dd><p>Command-line version (<code class="docutils literal"><span class="pre">-V,--version</span></code>) flag.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.cli.cli">
<code class="descclassname">CedarBackup3.cli.</code><code class="descname">cli</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/cli.html#cli"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.cli.cli" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the command-line interface for the <code class="docutils literal"><span class="pre">cback3</span></code> script.</p>
<p>Essentially, this is the &#8220;main routine&#8221; for the cback3 script.  It does all
of the argument processing for the script, and then sets about executing the
indicated actions.</p>
<p>As a general rule, only the actions indicated on the command line will be
executed.   We will accept any of the built-in actions and any of the
configured extended actions (which makes action list verification a two-
step process).</p>
<p>The <code class="docutils literal"><span class="pre">'all'</span></code> action has a special meaning: it means that the built-in set of
actions (collect, stage, store, purge) will all be executed, in that order.
Extended actions will be ignored as part of the <code class="docutils literal"><span class="pre">'all'</span></code> action.</p>
<p>Raised exceptions always result in an immediate return.  Otherwise, we
generally return when all specified actions have been completed.  Actions
are ignored if the help, version or validate flags are set.</p>
<p>A different error code is returned for each type of failure:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">1</span></code>: The Python interpreter version is &lt; 3.4</li>
<li><code class="docutils literal"><span class="pre">2</span></code>: Error processing command-line arguments</li>
<li><code class="docutils literal"><span class="pre">3</span></code>: Error configuring logging</li>
<li><code class="docutils literal"><span class="pre">4</span></code>: Error parsing indicated configuration file</li>
<li><code class="docutils literal"><span class="pre">5</span></code>: Backup was interrupted with a CTRL-C or similar</li>
<li><code class="docutils literal"><span class="pre">6</span></code>: Error executing specified backup actions</li>
</ul>
</div></blockquote>
<p><em>Note:</em> This function contains a good amount of logging at the INFO level,
because this is the right place to document high-level flow of control (i.e.
what the command-line options were, what config file was being used, etc.)</p>
<p><em>Note:</em> We assume that anything that <em>must</em> be seen on the screen is logged
at the ERROR level.  Errors that occur before logging can be configured are
written to <code class="docutils literal"><span class="pre">sys.stderr</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Error code as described above</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.cli.setupLogging">
<code class="descclassname">CedarBackup3.cli.</code><code class="descname">setupLogging</code><span class="sig-paren">(</span><em>options</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/cli.html#setupLogging"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.cli.setupLogging" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up logging based on command-line options.</p>
<p>There are two kinds of logging: flow logging and output logging.  Output
logging contains information about system commands executed by Cedar Backup,
for instance the calls to <code class="docutils literal"><span class="pre">mkisofs</span></code> or <code class="docutils literal"><span class="pre">mount</span></code>, etc.  Flow logging
contains error and informational messages used to understand program flow.
Flow log messages and output log messages are written to two different
loggers target (<code class="docutils literal"><span class="pre">CedarBackup3.log</span></code> and <code class="docutils literal"><span class="pre">CedarBackup3.output</span></code>).  Flow log
messages are written at the ERROR, INFO and DEBUG log levels, while output
log messages are generally only written at the INFO log level.</p>
<p>By default, output logging is disabled.  When the <code class="docutils literal"><span class="pre">options.output</span></code> or
<code class="docutils literal"><span class="pre">options.debug</span></code> flags are set, output logging will be written to the
configured logfile.  Output logging is never written to the screen.</p>
<p>By default, flow logging is enabled at the ERROR level to the screen and at
the INFO level to the configured logfile.  If the <code class="docutils literal"><span class="pre">options.quiet</span></code> flag is
set, flow logging is enabled at the INFO level to the configured logfile
only (i.e. no output will be sent to the screen).  If the <code class="docutils literal"><span class="pre">options.verbose</span></code>
flag is set, flow logging is enabled at the INFO level to both the screen
and the configured logfile.  If the <code class="docutils literal"><span class="pre">options.debug</span></code> flag is set, flow
logging is enabled at the DEBUG level to both the screen and the configured
logfile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>options</strong> (<a class="reference internal" href="#CedarBackup3.cli.Options" title="CedarBackup3.cli.Options"><code class="xref any py py-class docutils literal"><span class="pre">Options</span></code></a> object) &#8211; Command-line options</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Path to logfile on disk</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.cli.setupPathResolver">
<code class="descclassname">CedarBackup3.cli.</code><code class="descname">setupPathResolver</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/cli.html#setupPathResolver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.cli.setupPathResolver" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the path resolver singleton based on configuration.</p>
<p>Cedar Backup&#8217;s path resolver is implemented in terms of a singleton, the
<a class="reference internal" href="#CedarBackup3.util.PathResolverSingleton" title="CedarBackup3.util.PathResolverSingleton"><code class="xref any py py-class docutils literal"><span class="pre">PathResolverSingleton</span></code></a> class.  This function takes options configuration,
converts it into the dictionary form needed by the singleton, and then
initializes the singleton.  After that, any function that needs to resolve
the path of a command can use the singleton.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> (<a class="reference internal" href="#CedarBackup3.config.Config" title="CedarBackup3.config.Config"><code class="xref any py py-class docutils literal"><span class="pre">Config</span></code></a> object) &#8211; Configuration</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-CedarBackup3.config">
<span id="cedarbackup3-config-module"></span><h2>CedarBackup3.config module<a class="headerlink" href="#module-CedarBackup3.config" title="Permalink to this headline">¶</a></h2>
<p>Provides configuration-related objects.</p>
<div class="section" id="id1">
<h3>Summary<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Cedar Backup stores all of its configuration in an XML document typically
called <code class="docutils literal"><span class="pre">cback3.conf</span></code>.  The standard location for this document is in
<code class="docutils literal"><span class="pre">/etc</span></code>, but users can specify a different location if they want to.</p>
<p>The <code class="docutils literal"><span class="pre">Config</span></code> class is a Python object representation of a Cedar Backup XML
configuration file.  The representation is two-way: XML data can be used to
create a <code class="docutils literal"><span class="pre">Config</span></code> object, and then changes to the object can be propogated
back to disk.  A <code class="docutils literal"><span class="pre">Config</span></code> object can even be used to create a configuration
file from scratch programmatically.</p>
<p>The <code class="docutils literal"><span class="pre">Config</span></code> class is intended to be the only Python-language interface to
Cedar Backup configuration on disk.  Cedar Backup will use the class as its
internal representation of configuration, and applications external to Cedar
Backup itself (such as a hypothetical third-party configuration tool written
in Python or a third party extension module) should also use the class when
they need to read and write configuration files.</p>
</div></blockquote>
</div>
<div class="section" id="id2">
<h3>Backwards Compatibility<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The configuration file format has changed between Cedar Backup 1.x and Cedar
Backup 2.x.  Any Cedar Backup 1.x configuration file is also a valid Cedar
Backup 2.x configuration file.  However, it doesn&#8217;t work to go the other
direction, as the 2.x configuration files contains additional configuration
is not accepted by older versions of the software.</div></blockquote>
</div>
<div class="section" id="xml-configuration-structure">
<h3>XML Configuration Structure<a class="headerlink" href="#xml-configuration-structure" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>A <code class="docutils literal"><span class="pre">Config</span></code> object can either be created &#8220;empty&#8221;, or can be created based on
XML input (either in the form of a string or read in from a file on disk).
Generally speaking, the XML input <em>must</em> result in a <code class="docutils literal"><span class="pre">Config</span></code> object which
passes the validations laid out below in the <em>Validation</em> section.</p>
<p>An XML configuration file is composed of seven sections:</p>
<blockquote>
<div><ul class="simple">
<li><em>reference</em>: specifies reference information about the file (author, revision, etc)</li>
<li><em>extensions</em>: specifies mappings to Cedar Backup extensions (external code)</li>
<li><em>options</em>: specifies global configuration options</li>
<li><em>peers</em>: specifies the set of peers in a master&#8217;s backup pool</li>
<li><em>collect</em>: specifies configuration related to the collect action</li>
<li><em>stage</em>: specifies configuration related to the stage action</li>
<li><em>store</em>: specifies configuration related to the store action</li>
<li><em>purge</em>: specifies configuration related to the purge action</li>
</ul>
</div></blockquote>
<p>Each section is represented by an class in this module, and then the overall
<code class="docutils literal"><span class="pre">Config</span></code> class is a composition of the various other classes.</p>
<p>Any configuration section that is missing in the XML document (or has not
been filled into an &#8220;empty&#8221; document) will just be set to <code class="docutils literal"><span class="pre">None</span></code> in the
object representation.  The same goes for individual fields within each
configuration section.  Keep in mind that the document might not be
completely valid if some sections or fields aren&#8217;t filled in - but that
won&#8217;t matter until validation takes place (see the <em>Validation</em> section
below).</p>
</div></blockquote>
</div>
<div class="section" id="unicode-vs-string-data">
<h3>Unicode vs. String Data<a class="headerlink" href="#unicode-vs-string-data" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>By default, all string data that comes out of XML documents in Python is
unicode data (i.e. <code class="docutils literal"><span class="pre">u&quot;whatever&quot;</span></code>).  This is fine for many things, but when
it comes to filesystem paths, it can cause us some problems.  We really want
strings to be encoded in the filesystem encoding rather than being unicode.
So, most elements in configuration which represent filesystem paths are
coverted to plain strings using <a class="reference internal" href="#CedarBackup3.util.encodePath" title="CedarBackup3.util.encodePath"><code class="xref any py py-func docutils literal"><span class="pre">util.encodePath</span></code></a>.  The main exception is
the various <code class="docutils literal"><span class="pre">absoluteExcludePath</span></code> and <code class="docutils literal"><span class="pre">relativeExcludePath</span></code> lists.  These
are <em>not</em> converted, because they are generally only used for filtering,
not for filesystem operations.</div></blockquote>
</div>
<div class="section" id="validation">
<h3>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>There are two main levels of validation in the <code class="docutils literal"><span class="pre">Config</span></code> class and its
children.  The first is field-level validation.  Field-level validation
comes into play when a given field in an object is assigned to or updated.
We use Python&#8217;s <code class="docutils literal"><span class="pre">property</span></code> functionality to enforce specific validations on
field values, and in some places we even use customized list classes to
enforce validations on list members.  You should expect to catch a
<code class="docutils literal"><span class="pre">ValueError</span></code> exception when making assignments to configuration class
fields.</p>
<p>The second level of validation is post-completion validation.  Certain
validations don&#8217;t make sense until a document is fully &#8220;complete&#8221;.  We don&#8217;t
want these validations to apply all of the time, because it would make
building up a document from scratch a real pain.  For instance, we might
have to do things in the right order to keep from throwing exceptions, etc.</p>
<p>All of these post-completion validations are encapsulated in the
<a class="reference internal" href="#CedarBackup3.config.Config.validate" title="CedarBackup3.config.Config.validate"><code class="xref any py py-meth docutils literal"><span class="pre">Config.validate</span></code></a> method.  This method can be called at any time by a
client, and will always be called immediately after creating a <code class="docutils literal"><span class="pre">Config</span></code>
object from XML data and before exporting a <code class="docutils literal"><span class="pre">Config</span></code> object to XML.  This
way, we get decent ease-of-use but we also don&#8217;t accept or emit invalid
configuration files.</p>
<p>The <a class="reference internal" href="#CedarBackup3.config.Config.validate" title="CedarBackup3.config.Config.validate"><code class="xref any py py-meth docutils literal"><span class="pre">Config.validate</span></code></a> implementation actually takes two passes to
completely validate a configuration document.  The first pass at validation
is to ensure that the proper sections are filled into the document.  There
are default requirements, but the caller has the opportunity to override
these defaults.</p>
<p>The second pass at validation ensures that any filled-in section contains
valid data.  Any section which is not set to <code class="docutils literal"><span class="pre">None</span></code> is validated according
to the rules for that section (see below).</p>
<p><em>Reference Validations</em></p>
<p>No validations.</p>
<p><em>Extensions Validations</em></p>
<p>The list of actions may be either <code class="docutils literal"><span class="pre">None</span></code> or an empty list <code class="docutils literal"><span class="pre">[]</span></code> if desired.
Each extended action must include a name, a module and a function.  Then, an
extended action must include either an index or dependency information.
Which one is required depends on which order mode is configured.</p>
<p><em>Options Validations</em></p>
<p>All fields must be filled in except the rsh command.  The rcp and rsh
commands are used as default values for all remote peers.  Remote peers can
also rely on the backup user as the default remote user name if they choose.</p>
<p><em>Peers Validations</em></p>
<p>Local peers must be completely filled in, including both name and collect
directory.  Remote peers must also fill in the name and collect directory,
but can leave the remote user and rcp command unset.  In this case, the
remote user is assumed to match the backup user from the options section and
rcp command is taken directly from the options section.</p>
<p><em>Collect Validations</em></p>
<p>The target directory must be filled in.  The collect mode, archive mode and
ignore file are all optional.  The list of absolute paths to exclude and
patterns to exclude may be either <code class="docutils literal"><span class="pre">None</span></code> or an empty list <code class="docutils literal"><span class="pre">[]</span></code> if desired.</p>
<p>Each collect directory entry must contain an absolute path to collect, and
then must either be able to take collect mode, archive mode and ignore file
configuration from the parent <code class="docutils literal"><span class="pre">CollectConfig</span></code> object, or must set each
value on its own.  The list of absolute paths to exclude, relative paths to
exclude and patterns to exclude may be either <code class="docutils literal"><span class="pre">None</span></code> or an empty list <code class="docutils literal"><span class="pre">[]</span></code>
if desired.  Any list of absolute paths to exclude or patterns to exclude
will be combined with the same list in the <code class="docutils literal"><span class="pre">CollectConfig</span></code> object to make
the complete list for a given directory.</p>
<p><em>Stage Validations</em></p>
<p>The target directory must be filled in.  There must be at least one peer
(remote or local) between the two lists of peers.  A list with no entries
can be either <code class="docutils literal"><span class="pre">None</span></code> or an empty list <code class="docutils literal"><span class="pre">[]</span></code> if desired.</p>
<p>If a set of peers is provided, this configuration completely overrides
configuration in the peers configuration section, and the same validations
apply.</p>
<p><em>Store Validations</em></p>
<p>The device type and drive speed are optional, and all other values are
required (missing booleans will be set to defaults, which is OK).</p>
<p>The image writer functionality in the <code class="docutils literal"><span class="pre">writer</span></code> module is supposed to be
able to handle a device speed of <code class="docutils literal"><span class="pre">None</span></code>.  Any caller which needs a &#8220;real&#8221;
(non-<code class="docutils literal"><span class="pre">None</span></code>) value for the device type can use <code class="docutils literal"><span class="pre">DEFAULT_DEVICE_TYPE</span></code>,
which is guaranteed to be sensible.</p>
<p><em>Purge Validations</em></p>
<p>The list of purge directories may be either <code class="docutils literal"><span class="pre">None</span></code> or an empty list <code class="docutils literal"><span class="pre">[]</span></code>
if desired.  All purge directories must contain a path and a retain days
value.</p>
</div></blockquote>
</div>
<div class="section" id="id3">
<h3>Module Attributes<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="CedarBackup3.config.DEFAULT_DEVICE_TYPE">
<code class="descclassname">CedarBackup3.config.</code><code class="descname">DEFAULT_DEVICE_TYPE</code><a class="headerlink" href="#CedarBackup3.config.DEFAULT_DEVICE_TYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>The default device type</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.DEFAULT_MEDIA_TYPE">
<code class="descclassname">CedarBackup3.config.</code><code class="descname">DEFAULT_MEDIA_TYPE</code><a class="headerlink" href="#CedarBackup3.config.DEFAULT_MEDIA_TYPE" title="Permalink to this definition">¶</a></dt>
<dd><p>The default media type</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.VALID_DEVICE_TYPES">
<code class="descclassname">CedarBackup3.config.</code><code class="descname">VALID_DEVICE_TYPES</code><a class="headerlink" href="#CedarBackup3.config.VALID_DEVICE_TYPES" title="Permalink to this definition">¶</a></dt>
<dd><p>List of valid device types</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.VALID_MEDIA_TYPES">
<code class="descclassname">CedarBackup3.config.</code><code class="descname">VALID_MEDIA_TYPES</code><a class="headerlink" href="#CedarBackup3.config.VALID_MEDIA_TYPES" title="Permalink to this definition">¶</a></dt>
<dd><p>List of valid media types</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.VALID_COLLECT_MODES">
<code class="descclassname">CedarBackup3.config.</code><code class="descname">VALID_COLLECT_MODES</code><a class="headerlink" href="#CedarBackup3.config.VALID_COLLECT_MODES" title="Permalink to this definition">¶</a></dt>
<dd><p>List of valid collect modes</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.VALID_COMPRESS_MODES">
<code class="descclassname">CedarBackup3.config.</code><code class="descname">VALID_COMPRESS_MODES</code><a class="headerlink" href="#CedarBackup3.config.VALID_COMPRESS_MODES" title="Permalink to this definition">¶</a></dt>
<dd><p>List of valid compress modes</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.VALID_ARCHIVE_MODES">
<code class="descclassname">CedarBackup3.config.</code><code class="descname">VALID_ARCHIVE_MODES</code><a class="headerlink" href="#CedarBackup3.config.VALID_ARCHIVE_MODES" title="Permalink to this definition">¶</a></dt>
<dd><p>List of valid archive modes</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.VALID_ORDER_MODES">
<code class="descclassname">CedarBackup3.config.</code><code class="descname">VALID_ORDER_MODES</code><a class="headerlink" href="#CedarBackup3.config.VALID_ORDER_MODES" title="Permalink to this definition">¶</a></dt>
<dd><p>List of valid extension order modes</p>
</dd></dl>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.config.ActionDependencies">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">ActionDependencies</code><span class="sig-paren">(</span><em>beforeList=None</em>, <em>afterList=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ActionDependencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ActionDependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing dependencies associated with an extended action.</p>
<p>Execution ordering for extended actions is done in one of two ways: either by using
index values (lower index gets run first) or by having the extended action specify
dependencies in terms of other named actions.  This class encapsulates the dependency
information for an extended action.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>Any action name must be a non-empty string matching <code class="docutils literal"><span class="pre">ACTION_NAME_REGEX</span></code></li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.config.ActionDependencies.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>beforeList=None</em>, <em>afterList=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ActionDependencies.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ActionDependencies.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">ActionDependencies</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>beforeList</strong> &#8211; List of named actions that this action must be run before</li>
<li><strong>afterList</strong> &#8211; List of named actions that this action must be run after</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ActionDependencies.afterList">
<code class="descname">afterList</code><a class="headerlink" href="#CedarBackup3.config.ActionDependencies.afterList" title="Permalink to this definition">¶</a></dt>
<dd><p>List of named actions that this action must be run after.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ActionDependencies.beforeList">
<code class="descname">beforeList</code><a class="headerlink" href="#CedarBackup3.config.ActionDependencies.beforeList" title="Permalink to this definition">¶</a></dt>
<dd><p>List of named actions that this action must be run before.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.ActionHook">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">ActionHook</code><span class="sig-paren">(</span><em>action=None</em>, <em>command=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ActionHook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ActionHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a hook associated with an action.</p>
<p>A hook associated with an action is a shell command to be executed either
before or after a named action is executed.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The action name must be a non-empty string matching <code class="docutils literal"><span class="pre">ACTION_NAME_REGEX</span></code></li>
<li>The shell command must be a non-empty string.</li>
</ul>
</div></blockquote>
<p>The internal <code class="docutils literal"><span class="pre">before</span></code> and <code class="docutils literal"><span class="pre">after</span></code> instance variables are always set to
False in this parent class.</p>
<dl class="method">
<dt id="CedarBackup3.config.ActionHook.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>action=None</em>, <em>command=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ActionHook.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ActionHook.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">ActionHook</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>action</strong> &#8211; Action this hook is associated with</li>
<li><strong>command</strong> &#8211; Shell command to execute</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ActionHook.action">
<code class="descname">action</code><a class="headerlink" href="#CedarBackup3.config.ActionHook.action" title="Permalink to this definition">¶</a></dt>
<dd><p>Action this hook is associated with.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ActionHook.after">
<code class="descname">after</code><a class="headerlink" href="#CedarBackup3.config.ActionHook.after" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether command should be executed after action.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ActionHook.before">
<code class="descname">before</code><a class="headerlink" href="#CedarBackup3.config.ActionHook.before" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether command should be executed before action.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ActionHook.command">
<code class="descname">command</code><a class="headerlink" href="#CedarBackup3.config.ActionHook.command" title="Permalink to this definition">¶</a></dt>
<dd><p>Shell command to execute.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.BlankBehavior">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">BlankBehavior</code><span class="sig-paren">(</span><em>blankMode=None</em>, <em>blankFactor=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#BlankBehavior"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.BlankBehavior" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing optimized store-action media blanking behavior.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The blanking mode must be a one of the values in <code class="docutils literal"><span class="pre">VALID_BLANK_MODES</span></code></li>
<li>The blanking factor must be a positive floating point number</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.config.BlankBehavior.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>blankMode=None</em>, <em>blankFactor=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#BlankBehavior.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.BlankBehavior.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">BlankBehavior</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>blankMode</strong> &#8211; Blanking mode</li>
<li><strong>blankFactor</strong> &#8211; Blanking factor</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.BlankBehavior.blankFactor">
<code class="descname">blankFactor</code><a class="headerlink" href="#CedarBackup3.config.BlankBehavior.blankFactor" title="Permalink to this definition">¶</a></dt>
<dd><p>Blanking factor</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.BlankBehavior.blankMode">
<code class="descname">blankMode</code><a class="headerlink" href="#CedarBackup3.config.BlankBehavior.blankMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Blanking mode</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.ByteQuantity">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">ByteQuantity</code><span class="sig-paren">(</span><em>quantity=None</em>, <em>units=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ByteQuantity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ByteQuantity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a byte quantity.</p>
<p>A byte quantity has both a quantity and a byte-related unit.  Units are
maintained using the constants from util.py.  If no units are provided,
<code class="docutils literal"><span class="pre">UNIT_BYTES</span></code> is assumed.</p>
<p>The quantity is maintained internally as a string so that issues of
precision can be avoided.  It really isn&#8217;t possible to store a floating
point number here while being able to losslessly translate back and forth
between XML and object representations.  (Perhaps the Python 2.4 Decimal
class would have been an option, but I originally wanted to stay compatible
with Python 2.3.)</p>
<p>Even though the quantity is maintained as a string, the string must be in a
valid floating point positive number.  Technically, any floating point
string format supported by Python is allowble.  However, it does not make
sense to have a negative quantity of bytes in this context.</p>
<dl class="method">
<dt id="CedarBackup3.config.ByteQuantity.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>quantity=None</em>, <em>units=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ByteQuantity.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ByteQuantity.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">ByteQuantity</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>quantity</strong> &#8211; Quantity of bytes, something interpretable as a float</li>
<li><strong>units</strong> &#8211; Unit of bytes, one of VALID_BYTE_UNITS</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ByteQuantity.bytes">
<code class="descname">bytes</code><a class="headerlink" href="#CedarBackup3.config.ByteQuantity.bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Byte quantity, as a floating point number.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ByteQuantity.quantity">
<code class="descname">quantity</code><a class="headerlink" href="#CedarBackup3.config.ByteQuantity.quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>Byte quantity, as a string</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ByteQuantity.units">
<code class="descname">units</code><a class="headerlink" href="#CedarBackup3.config.ByteQuantity.units" title="Permalink to this definition">¶</a></dt>
<dd><p>Units for byte quantity, for instance UNIT_BYTES</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.CollectConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">CollectConfig</code><span class="sig-paren">(</span><em>targetDir=None</em>, <em>collectMode=None</em>, <em>archiveMode=None</em>, <em>ignoreFile=None</em>, <em>absoluteExcludePaths=None</em>, <em>excludePatterns=None</em>, <em>collectFiles=None</em>, <em>collectDirs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#CollectConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.CollectConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup collect configuration.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The target directory must be an absolute path.</li>
<li>The collect mode must be one of the values in <a class="reference internal" href="#CedarBackup3.config.VALID_COLLECT_MODES" title="CedarBackup3.config.VALID_COLLECT_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COLLECT_MODES</span></code></a>.</li>
<li>The archive mode must be one of the values in <a class="reference internal" href="#CedarBackup3.config.VALID_ARCHIVE_MODES" title="CedarBackup3.config.VALID_ARCHIVE_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_ARCHIVE_MODES</span></code></a>.</li>
<li>The ignore file must be a non-empty string.</li>
<li>Each of the paths in <code class="docutils literal"><span class="pre">absoluteExcludePaths</span></code> must be an absolute path</li>
<li>The collect file list must be a list of <code class="docutils literal"><span class="pre">CollectFile</span></code> objects.</li>
<li>The collect directory list must be a list of <code class="docutils literal"><span class="pre">CollectDir</span></code> objects.</li>
</ul>
</div></blockquote>
<p>For the <code class="docutils literal"><span class="pre">absoluteExcludePaths</span></code> list, validation is accomplished through the
<a class="reference internal" href="#CedarBackup3.util.AbsolutePathList" title="CedarBackup3.util.AbsolutePathList"><code class="xref any py py-class docutils literal"><span class="pre">util.AbsolutePathList</span></code></a> list implementation that overrides common list
methods and transparently does the absolute path validation for us.</p>
<p>For the <code class="docutils literal"><span class="pre">collectFiles</span></code> and <code class="docutils literal"><span class="pre">collectDirs</span></code> list, validation is accomplished
through the <a class="reference internal" href="#CedarBackup3.util.ObjectTypeList" title="CedarBackup3.util.ObjectTypeList"><code class="xref any py py-class docutils literal"><span class="pre">util.ObjectTypeList</span></code></a> list implementation that overrides common
list methods and transparently ensures that each element has an appropriate
type.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.config.CollectConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>targetDir=None</em>, <em>collectMode=None</em>, <em>archiveMode=None</em>, <em>ignoreFile=None</em>, <em>absoluteExcludePaths=None</em>, <em>excludePatterns=None</em>, <em>collectFiles=None</em>, <em>collectDirs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#CollectConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.CollectConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">CollectConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>targetDir</strong> &#8211; Directory to collect files into</li>
<li><strong>collectMode</strong> &#8211; Default collect mode</li>
<li><strong>archiveMode</strong> &#8211; Default archive mode for collect files</li>
<li><strong>ignoreFile</strong> &#8211; Default ignore file name</li>
<li><strong>absoluteExcludePaths</strong> &#8211; List of absolute paths to exclude</li>
<li><strong>excludePatterns</strong> &#8211; List of regular expression patterns to exclude</li>
<li><strong>collectFiles</strong> &#8211; List of collect files</li>
<li><strong>collectDirs</strong> &#8211; List of collect directories</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectConfig.absoluteExcludePaths">
<code class="descname">absoluteExcludePaths</code><a class="headerlink" href="#CedarBackup3.config.CollectConfig.absoluteExcludePaths" title="Permalink to this definition">¶</a></dt>
<dd><p>List of absolute paths to exclude.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectConfig.archiveMode">
<code class="descname">archiveMode</code><a class="headerlink" href="#CedarBackup3.config.CollectConfig.archiveMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Default archive mode for collect files.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectConfig.collectDirs">
<code class="descname">collectDirs</code><a class="headerlink" href="#CedarBackup3.config.CollectConfig.collectDirs" title="Permalink to this definition">¶</a></dt>
<dd><p>List of collect directories.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectConfig.collectFiles">
<code class="descname">collectFiles</code><a class="headerlink" href="#CedarBackup3.config.CollectConfig.collectFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>List of collect files.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectConfig.collectMode">
<code class="descname">collectMode</code><a class="headerlink" href="#CedarBackup3.config.CollectConfig.collectMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Default collect mode.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectConfig.excludePatterns">
<code class="descname">excludePatterns</code><a class="headerlink" href="#CedarBackup3.config.CollectConfig.excludePatterns" title="Permalink to this definition">¶</a></dt>
<dd><p>List of regular expressions patterns to exclude.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectConfig.ignoreFile">
<code class="descname">ignoreFile</code><a class="headerlink" href="#CedarBackup3.config.CollectConfig.ignoreFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Default ignore file name.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectConfig.targetDir">
<code class="descname">targetDir</code><a class="headerlink" href="#CedarBackup3.config.CollectConfig.targetDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory to collect files into.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.CollectDir">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">CollectDir</code><span class="sig-paren">(</span><em>absolutePath=None</em>, <em>collectMode=None</em>, <em>archiveMode=None</em>, <em>ignoreFile=None</em>, <em>absoluteExcludePaths=None</em>, <em>relativeExcludePaths=None</em>, <em>excludePatterns=None</em>, <em>linkDepth=None</em>, <em>dereference=False</em>, <em>recursionLevel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#CollectDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.CollectDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup collect directory.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>Absolute paths must be absolute</li>
<li>The collect mode must be one of the values in <a class="reference internal" href="#CedarBackup3.config.VALID_COLLECT_MODES" title="CedarBackup3.config.VALID_COLLECT_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COLLECT_MODES</span></code></a>.</li>
<li>The archive mode must be one of the values in <a class="reference internal" href="#CedarBackup3.config.VALID_ARCHIVE_MODES" title="CedarBackup3.config.VALID_ARCHIVE_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_ARCHIVE_MODES</span></code></a>.</li>
<li>The ignore file must be a non-empty string.</li>
</ul>
</div></blockquote>
<p>For the <code class="docutils literal"><span class="pre">absoluteExcludePaths</span></code> list, validation is accomplished through the
<a class="reference internal" href="#CedarBackup3.util.AbsolutePathList" title="CedarBackup3.util.AbsolutePathList"><code class="xref any py py-class docutils literal"><span class="pre">util.AbsolutePathList</span></code></a> list implementation that overrides common list
methods and transparently does the absolute path validation for us.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.config.CollectDir.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>absolutePath=None</em>, <em>collectMode=None</em>, <em>archiveMode=None</em>, <em>ignoreFile=None</em>, <em>absoluteExcludePaths=None</em>, <em>relativeExcludePaths=None</em>, <em>excludePatterns=None</em>, <em>linkDepth=None</em>, <em>dereference=False</em>, <em>recursionLevel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#CollectDir.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.CollectDir.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">CollectDir</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>absolutePath</strong> &#8211; Absolute path of the directory to collect</li>
<li><strong>collectMode</strong> &#8211; Overridden collect mode for this directory</li>
<li><strong>archiveMode</strong> &#8211; Overridden archive mode for this directory</li>
<li><strong>ignoreFile</strong> &#8211; Overidden ignore file name for this directory</li>
<li><strong>linkDepth</strong> &#8211; Maximum at which soft links should be followed</li>
<li><strong>dereference</strong> &#8211; Whether to dereference links that are followed</li>
<li><strong>absoluteExcludePaths</strong> &#8211; List of absolute paths to exclude</li>
<li><strong>relativeExcludePaths</strong> &#8211; List of relative paths to exclude</li>
<li><strong>excludePatterns</strong> &#8211; List of regular expression patterns to exclude</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectDir.absoluteExcludePaths">
<code class="descname">absoluteExcludePaths</code><a class="headerlink" href="#CedarBackup3.config.CollectDir.absoluteExcludePaths" title="Permalink to this definition">¶</a></dt>
<dd><p>List of absolute paths to exclude.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectDir.absolutePath">
<code class="descname">absolutePath</code><a class="headerlink" href="#CedarBackup3.config.CollectDir.absolutePath" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the directory to collect.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectDir.archiveMode">
<code class="descname">archiveMode</code><a class="headerlink" href="#CedarBackup3.config.CollectDir.archiveMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden archive mode for this directory.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectDir.collectMode">
<code class="descname">collectMode</code><a class="headerlink" href="#CedarBackup3.config.CollectDir.collectMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden collect mode for this directory.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectDir.dereference">
<code class="descname">dereference</code><a class="headerlink" href="#CedarBackup3.config.CollectDir.dereference" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to dereference links that are followed.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectDir.excludePatterns">
<code class="descname">excludePatterns</code><a class="headerlink" href="#CedarBackup3.config.CollectDir.excludePatterns" title="Permalink to this definition">¶</a></dt>
<dd><p>List of regular expression patterns to exclude.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectDir.ignoreFile">
<code class="descname">ignoreFile</code><a class="headerlink" href="#CedarBackup3.config.CollectDir.ignoreFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden ignore file name for this directory.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectDir.linkDepth">
<code class="descname">linkDepth</code><a class="headerlink" href="#CedarBackup3.config.CollectDir.linkDepth" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum at which soft links should be followed.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectDir.recursionLevel">
<code class="descname">recursionLevel</code><a class="headerlink" href="#CedarBackup3.config.CollectDir.recursionLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursion level to use for recursive directory collection</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectDir.relativeExcludePaths">
<code class="descname">relativeExcludePaths</code><a class="headerlink" href="#CedarBackup3.config.CollectDir.relativeExcludePaths" title="Permalink to this definition">¶</a></dt>
<dd><p>List of relative paths to exclude.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.CollectFile">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">CollectFile</code><span class="sig-paren">(</span><em>absolutePath=None</em>, <em>collectMode=None</em>, <em>archiveMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#CollectFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.CollectFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup collect file.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>Absolute paths must be absolute</li>
<li>The collect mode must be one of the values in <a class="reference internal" href="#CedarBackup3.config.VALID_COLLECT_MODES" title="CedarBackup3.config.VALID_COLLECT_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COLLECT_MODES</span></code></a>.</li>
<li>The archive mode must be one of the values in <a class="reference internal" href="#CedarBackup3.config.VALID_ARCHIVE_MODES" title="CedarBackup3.config.VALID_ARCHIVE_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_ARCHIVE_MODES</span></code></a>.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.config.CollectFile.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>absolutePath=None</em>, <em>collectMode=None</em>, <em>archiveMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#CollectFile.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.CollectFile.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">CollectFile</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>absolutePath</strong> &#8211; Absolute path of the file to collect</li>
<li><strong>collectMode</strong> &#8211; Overridden collect mode for this file</li>
<li><strong>archiveMode</strong> &#8211; Overridden archive mode for this file</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectFile.absolutePath">
<code class="descname">absolutePath</code><a class="headerlink" href="#CedarBackup3.config.CollectFile.absolutePath" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the file to collect.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectFile.archiveMode">
<code class="descname">archiveMode</code><a class="headerlink" href="#CedarBackup3.config.CollectFile.archiveMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden archive mode for this file.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CollectFile.collectMode">
<code class="descname">collectMode</code><a class="headerlink" href="#CedarBackup3.config.CollectFile.collectMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden collect mode for this file.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.CommandOverride">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">CommandOverride</code><span class="sig-paren">(</span><em>command=None</em>, <em>absolutePath=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#CommandOverride"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.CommandOverride" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a piece of Cedar Backup command override configuration.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The absolute path must be absolute</li>
</ul>
</div></blockquote>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.config.CommandOverride.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>command=None</em>, <em>absolutePath=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#CommandOverride.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.CommandOverride.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">CommandOverride</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>command</strong> &#8211; Name of command to be overridden</li>
<li><strong>absolutePath</strong> &#8211; Absolute path of the overrridden command</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CommandOverride.absolutePath">
<code class="descname">absolutePath</code><a class="headerlink" href="#CedarBackup3.config.CommandOverride.absolutePath" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the overrridden command.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.CommandOverride.command">
<code class="descname">command</code><a class="headerlink" href="#CedarBackup3.config.CommandOverride.command" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of command to be overridden.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.Config">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">Config</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#Config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup XML configuration document.</p>
<p>The <code class="docutils literal"><span class="pre">Config</span></code> class is a Python object representation of a Cedar Backup XML
configuration file.  It is intended to be the only Python-language interface
to Cedar Backup configuration on disk for both Cedar Backup itself and for
external applications.</p>
<p>The object representation is two-way: XML data can be used to create a
<code class="docutils literal"><span class="pre">Config</span></code> object, and then changes to the object can be propogated back to
disk.  A <code class="docutils literal"><span class="pre">Config</span></code> object can even be used to create a configuration file
from scratch programmatically.</p>
<p>This class and the classes it is composed from often use Python&#8217;s
<code class="docutils literal"><span class="pre">property</span></code> construct to validate input and limit access to values.  Some
validations can only be done once a document is considered &#8220;complete&#8221;
(see module notes for more details).</p>
<p>Assignments to the various instance variables must match the expected
type, i.e. <code class="docutils literal"><span class="pre">reference</span></code> must be a <code class="docutils literal"><span class="pre">ReferenceConfig</span></code>.  The internal check
uses the built-in <code class="docutils literal"><span class="pre">isinstance</span></code> function, so it should be OK to use
subclasses if you want to.</p>
<p>If an instance variable is not set, its value will be <code class="docutils literal"><span class="pre">None</span></code>.  When an
object is initialized without using an XML document, all of the values
will be <code class="docutils literal"><span class="pre">None</span></code>.  Even when an object is initialized using XML, some of
the values might be <code class="docutils literal"><span class="pre">None</span></code> because not every section is required.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.config.Config.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#Config.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.Config.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a configuration object.</p>
<p>If you initialize the object without passing either <code class="docutils literal"><span class="pre">xmlData</span></code> or
<code class="docutils literal"><span class="pre">xmlPath</span></code>, then configuration will be empty and will be invalid until it
is filled in properly.</p>
<p>No reference to the original XML data or original path is saved off by
this class.  Once the data has been parsed (successfully or not) this
original information is discarded.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> argument is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.config.Config.validate" title="CedarBackup3.config.Config.validate"><code class="xref any py py-meth docutils literal"><span class="pre">Config.validate</span></code></a>
method will be called (with its default arguments) against configuration
after successfully parsing any passed-in XML.  Keep in mind that even if
<code class="docutils literal"><span class="pre">validate</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, it might not be possible to parse the passed-in
XML document if lower-level validations fail.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to read in
invalid configuration from disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlData</strong> (<em>String data</em>) &#8211; XML data representing configuration</li>
<li><strong>xmlPath</strong> (<em>Absolute path to a file on disk</em>) &#8211; Path to an XML file on disk</li>
<li><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the document after parsing it</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If both <code class="docutils literal"><span class="pre">xmlData</span></code> and <code class="docutils literal"><span class="pre">xmlPath</span></code> are passed-in</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the XML data in <code class="docutils literal"><span class="pre">xmlData</span></code> or <code class="docutils literal"><span class="pre">xmlPath</span></code> cannot be parsed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the parsed configuration document is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.Config.collect">
<code class="descname">collect</code><a class="headerlink" href="#CedarBackup3.config.Config.collect" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect configuration in terms of a <code class="docutils literal"><span class="pre">CollectConfig</span></code> object.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.Config.extensions">
<code class="descname">extensions</code><a class="headerlink" href="#CedarBackup3.config.Config.extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Extensions configuration in terms of a <code class="docutils literal"><span class="pre">ExtensionsConfig</span></code> object.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.config.Config.extractXml">
<code class="descname">extractXml</code><span class="sig-paren">(</span><em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#Config.extractXml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.Config.extractXml" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts configuration into an XML document.</p>
<p>If <code class="docutils literal"><span class="pre">xmlPath</span></code> is not provided, then the XML document will be returned as
a string.  If <code class="docutils literal"><span class="pre">xmlPath</span></code> is provided, then the XML document will be written
to the file and <code class="docutils literal"><span class="pre">None</span></code> will be returned.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> parameter is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.config.Config.validate" title="CedarBackup3.config.Config.validate"><code class="xref any py py-meth docutils literal"><span class="pre">Config.validate</span></code></a>
method will be called (with its default arguments) against the
configuration before extracting the XML.  If configuration is not valid,
then an XML document will not be extracted.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to write an
invalid configuration file to disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlPath</strong> (<em>Absolute path to a file</em>) &#8211; Path to an XML file to create on disk</li>
<li><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the document before extracting it</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">XML string data or <code class="docutils literal"><span class="pre">None</span></code> as described above</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If configuration within the object is not valid</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is an error writing to the file</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">OSError</span></code> &#8211; If there is an error writing to the file</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.Config.options">
<code class="descname">options</code><a class="headerlink" href="#CedarBackup3.config.Config.options" title="Permalink to this definition">¶</a></dt>
<dd><p>Options configuration in terms of a <code class="docutils literal"><span class="pre">OptionsConfig</span></code> object.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.Config.peers">
<code class="descname">peers</code><a class="headerlink" href="#CedarBackup3.config.Config.peers" title="Permalink to this definition">¶</a></dt>
<dd><p>Peers configuration in terms of a <code class="docutils literal"><span class="pre">PeersConfig</span></code> object.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.Config.purge">
<code class="descname">purge</code><a class="headerlink" href="#CedarBackup3.config.Config.purge" title="Permalink to this definition">¶</a></dt>
<dd><p>Purge configuration in terms of a <code class="docutils literal"><span class="pre">PurgeConfig</span></code> object.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.Config.reference">
<code class="descname">reference</code><a class="headerlink" href="#CedarBackup3.config.Config.reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference configuration in terms of a <code class="docutils literal"><span class="pre">ReferenceConfig</span></code> object.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.Config.stage">
<code class="descname">stage</code><a class="headerlink" href="#CedarBackup3.config.Config.stage" title="Permalink to this definition">¶</a></dt>
<dd><p>Stage configuration in terms of a <code class="docutils literal"><span class="pre">StageConfig</span></code> object.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.Config.store">
<code class="descname">store</code><a class="headerlink" href="#CedarBackup3.config.Config.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Store configuration in terms of a <code class="docutils literal"><span class="pre">StoreConfig</span></code> object.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.config.Config.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><em>requireOneAction=True</em>, <em>requireReference=False</em>, <em>requireExtensions=False</em>, <em>requireOptions=True</em>, <em>requireCollect=False</em>, <em>requireStage=False</em>, <em>requireStore=False</em>, <em>requirePurge=False</em>, <em>requirePeers=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#Config.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.Config.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates configuration represented by the object.</p>
<p>This method encapsulates all of the validations that should apply to a
fully &#8220;complete&#8221; document but are not already taken care of by earlier
validations.  It also provides some extra convenience functionality which
might be useful to some people.  The process of validation is laid out in
the <em>Validation</em> section in the class notes (above).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>requireOneAction</strong> &#8211; Require at least one of the collect, stage, store or purge sections</li>
<li><strong>requireReference</strong> &#8211; Require the reference section</li>
<li><strong>requireExtensions</strong> &#8211; Require the extensions section</li>
<li><strong>requireOptions</strong> &#8211; Require the options section</li>
<li><strong>requirePeers</strong> &#8211; Require the peers section</li>
<li><strong>requireCollect</strong> &#8211; Require the collect section</li>
<li><strong>requireStage</strong> &#8211; Require the stage section</li>
<li><strong>requireStore</strong> &#8211; Require the store section</li>
<li><strong>requirePurge</strong> &#8211; Require the purge section</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the validations fails</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.ExtendedAction">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">ExtendedAction</code><span class="sig-paren">(</span><em>name=None</em>, <em>module=None</em>, <em>function=None</em>, <em>index=None</em>, <em>dependencies=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ExtendedAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ExtendedAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing an extended action.</p>
<p>Essentially, an extended action needs to allow the following to happen:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;from </span><span class="si">%s</span><span class="s2"> import </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">function</span><span class="p">))</span>
<span class="n">exec</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(action, configPath&quot;</span><span class="p">)</span><span class="s2">&quot; </span><span class="si">% f</span><span class="s2">unction)</span>
</pre></div>
</div>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The action name must be a non-empty string consisting of lower-case letters and digits.</li>
<li>The module must be a non-empty string and a valid Python identifier.</li>
<li>The function must be an on-empty string and a valid Python identifier.</li>
<li>If set, the index must be a positive integer.</li>
<li>If set, the dependencies attribute must be an <code class="docutils literal"><span class="pre">ActionDependencies</span></code> object.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.config.ExtendedAction.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>name=None</em>, <em>module=None</em>, <em>function=None</em>, <em>index=None</em>, <em>dependencies=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ExtendedAction.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ExtendedAction.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">ExtendedAction</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> &#8211; Name of the extended action</li>
<li><strong>module</strong> &#8211; Name of the module containing the extended action function</li>
<li><strong>function</strong> &#8211; Name of the extended action function</li>
<li><strong>index</strong> &#8211; Index of action, used for execution ordering</li>
<li><strong>dependencies</strong> &#8211; Dependencies for action, used for execution ordering</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ExtendedAction.dependencies">
<code class="descname">dependencies</code><a class="headerlink" href="#CedarBackup3.config.ExtendedAction.dependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Dependencies for action, used for execution ordering.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ExtendedAction.function">
<code class="descname">function</code><a class="headerlink" href="#CedarBackup3.config.ExtendedAction.function" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the extended action function.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ExtendedAction.index">
<code class="descname">index</code><a class="headerlink" href="#CedarBackup3.config.ExtendedAction.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Index of action, used for execution ordering.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ExtendedAction.module">
<code class="descname">module</code><a class="headerlink" href="#CedarBackup3.config.ExtendedAction.module" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the module containing the extended action function.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ExtendedAction.name">
<code class="descname">name</code><a class="headerlink" href="#CedarBackup3.config.ExtendedAction.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the extended action.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.ExtensionsConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">ExtensionsConfig</code><span class="sig-paren">(</span><em>actions=None</em>, <em>orderMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ExtensionsConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ExtensionsConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing Cedar Backup extensions configuration.</p>
<p>Extensions configuration is used to specify &#8220;extended actions&#8221; implemented
by code external to Cedar Backup.  For instance, a hypothetical third party
might write extension code to collect database repository data.  If they
write a properly-formatted extension function, they can use the extension
configuration to map a command-line Cedar Backup action (i.e. &#8220;database&#8221;)
to their function.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>If set, the order mode must be one of the values in <code class="docutils literal"><span class="pre">VALID_ORDER_MODES</span></code></li>
<li>The actions list must be a list of <code class="docutils literal"><span class="pre">ExtendedAction</span></code> objects.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.config.ExtensionsConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>actions=None</em>, <em>orderMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ExtensionsConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ExtensionsConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">ExtensionsConfig</span></code> class.
:param actions: List of extended actions</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ExtensionsConfig.actions">
<code class="descname">actions</code><a class="headerlink" href="#CedarBackup3.config.ExtensionsConfig.actions" title="Permalink to this definition">¶</a></dt>
<dd><p>List of extended actions.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ExtensionsConfig.orderMode">
<code class="descname">orderMode</code><a class="headerlink" href="#CedarBackup3.config.ExtensionsConfig.orderMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Order mode for extensions, to control execution ordering.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.LocalPeer">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">LocalPeer</code><span class="sig-paren">(</span><em>name=None</em>, <em>collectDir=None</em>, <em>ignoreFailureMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#LocalPeer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.LocalPeer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup peer.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The peer name must be a non-empty string.</li>
<li>The collect directory must be an absolute path.</li>
<li>The ignore failure mode must be one of the values in <code class="docutils literal"><span class="pre">VALID_FAILURE_MODES</span></code>.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.config.LocalPeer.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>name=None</em>, <em>collectDir=None</em>, <em>ignoreFailureMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#LocalPeer.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.LocalPeer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">LocalPeer</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> &#8211; Name of the peer, typically a valid hostname</li>
<li><strong>collectDir</strong> &#8211; Collect directory to stage files from on peer</li>
<li><strong>ignoreFailureMode</strong> &#8211; Ignore failure mode for peer</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.LocalPeer.collectDir">
<code class="descname">collectDir</code><a class="headerlink" href="#CedarBackup3.config.LocalPeer.collectDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect directory to stage files from on peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.LocalPeer.ignoreFailureMode">
<code class="descname">ignoreFailureMode</code><a class="headerlink" href="#CedarBackup3.config.LocalPeer.ignoreFailureMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Ignore failure mode for peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.LocalPeer.name">
<code class="descname">name</code><a class="headerlink" href="#CedarBackup3.config.LocalPeer.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the peer, typically a valid hostname.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.OptionsConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">OptionsConfig</code><span class="sig-paren">(</span><em>startingDay=None</em>, <em>workingDir=None</em>, <em>backupUser=None</em>, <em>backupGroup=None</em>, <em>rcpCommand=None</em>, <em>overrides=None</em>, <em>hooks=None</em>, <em>rshCommand=None</em>, <em>cbackCommand=None</em>, <em>managedActions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#OptionsConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.OptionsConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup global options configuration.</p>
<p>The options section is used to store global configuration options and
defaults that can be applied to other sections.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The working directory must be an absolute path.</li>
<li>The starting day must be a day of the week in English, i.e. <code class="docutils literal"><span class="pre">&quot;monday&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;tuesday&quot;</span></code>, etc.</li>
<li>All of the other values must be non-empty strings if they are set to something other than <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li>The overrides list must be a list of <code class="docutils literal"><span class="pre">CommandOverride</span></code> objects.</li>
<li>The hooks list must be a list of <code class="docutils literal"><span class="pre">ActionHook</span></code> objects.</li>
<li>The cback command must be a non-empty string.</li>
<li>Any managed action name must be a non-empty string matching <code class="docutils literal"><span class="pre">ACTION_NAME_REGEX</span></code></li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.config.OptionsConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>startingDay=None</em>, <em>workingDir=None</em>, <em>backupUser=None</em>, <em>backupGroup=None</em>, <em>rcpCommand=None</em>, <em>overrides=None</em>, <em>hooks=None</em>, <em>rshCommand=None</em>, <em>cbackCommand=None</em>, <em>managedActions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#OptionsConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">OptionsConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>startingDay</strong> &#8211; Day that starts the week</li>
<li><strong>workingDir</strong> &#8211; Working (temporary) directory to use for backups</li>
<li><strong>backupUser</strong> &#8211; Effective user that backups should run as</li>
<li><strong>backupGroup</strong> &#8211; Effective group that backups should run as</li>
<li><strong>rcpCommand</strong> &#8211; Default rcp-compatible copy command for staging</li>
<li><strong>rshCommand</strong> &#8211; Default rsh-compatible command to use for remote shells</li>
<li><strong>cbackCommand</strong> &#8211; Default cback-compatible command to use on managed remote peers</li>
<li><strong>overrides</strong> &#8211; List of configured command path overrides, if any</li>
<li><strong>hooks</strong> &#8211; List of configured pre- and post-action hooks</li>
<li><strong>managedActions</strong> &#8211; Default set of actions that are managed on remote peers</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.config.OptionsConfig.addOverride">
<code class="descname">addOverride</code><span class="sig-paren">(</span><em>command</em>, <em>absolutePath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#OptionsConfig.addOverride"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.addOverride" title="Permalink to this definition">¶</a></dt>
<dd><p>If no override currently exists for the command, add one.
:param command: Name of command to be overridden
:param absolutePath: Absolute path of the overrridden command</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.OptionsConfig.backupGroup">
<code class="descname">backupGroup</code><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.backupGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Effective group that backups should run as.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.OptionsConfig.backupUser">
<code class="descname">backupUser</code><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.backupUser" title="Permalink to this definition">¶</a></dt>
<dd><p>Effective user that backups should run as.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.OptionsConfig.cbackCommand">
<code class="descname">cbackCommand</code><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.cbackCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Default cback-compatible command to use on managed remote peers.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.OptionsConfig.hooks">
<code class="descname">hooks</code><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.hooks" title="Permalink to this definition">¶</a></dt>
<dd><p>List of configured pre- and post-action hooks.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.OptionsConfig.managedActions">
<code class="descname">managedActions</code><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.managedActions" title="Permalink to this definition">¶</a></dt>
<dd><p>Default set of actions that are managed on remote peers.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.OptionsConfig.overrides">
<code class="descname">overrides</code><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.overrides" title="Permalink to this definition">¶</a></dt>
<dd><p>List of configured command path overrides, if any.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.OptionsConfig.rcpCommand">
<code class="descname">rcpCommand</code><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.rcpCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Default rcp-compatible copy command for staging.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.config.OptionsConfig.replaceOverride">
<code class="descname">replaceOverride</code><span class="sig-paren">(</span><em>command</em>, <em>absolutePath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#OptionsConfig.replaceOverride"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.replaceOverride" title="Permalink to this definition">¶</a></dt>
<dd><p>If override currently exists for the command, replace it; otherwise add it.
:param command: Name of command to be overridden
:param absolutePath: Absolute path of the overrridden command</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.OptionsConfig.rshCommand">
<code class="descname">rshCommand</code><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.rshCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Default rsh-compatible command to use for remote shells.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.OptionsConfig.startingDay">
<code class="descname">startingDay</code><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.startingDay" title="Permalink to this definition">¶</a></dt>
<dd><p>Day that starts the week.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.OptionsConfig.workingDir">
<code class="descname">workingDir</code><a class="headerlink" href="#CedarBackup3.config.OptionsConfig.workingDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Working (temporary) directory to use for backups.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.PeersConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">PeersConfig</code><span class="sig-paren">(</span><em>localPeers=None</em>, <em>remotePeers=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#PeersConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.PeersConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing Cedar Backup global peer configuration.</p>
<p>This section contains a list of local and remote peers in a master&#8217;s backup
pool.  The section is optional.  If a master does not define this section,
then all peers are unmanaged, and the stage configuration section must
explicitly list any peer that is to be staged.  If this section is
configured, then peers may be managed or unmanaged, and the stage section
peer configuration (if any) completely overrides this configuration.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The list of local peers must contain only <code class="docutils literal"><span class="pre">LocalPeer</span></code> objects</li>
<li>The list of remote peers must contain only <code class="docutils literal"><span class="pre">RemotePeer</span></code> objects</li>
</ul>
</div></blockquote>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.config.PeersConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>localPeers=None</em>, <em>remotePeers=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#PeersConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.PeersConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">PeersConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>localPeers</strong> &#8211; List of local peers</li>
<li><strong>remotePeers</strong> &#8211; List of remote peers</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.config.PeersConfig.hasPeers">
<code class="descname">hasPeers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#PeersConfig.hasPeers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.PeersConfig.hasPeers" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether any peers are filled into this object.
:returns: Boolean true if any local or remote peers are filled in, false otherwise</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.PeersConfig.localPeers">
<code class="descname">localPeers</code><a class="headerlink" href="#CedarBackup3.config.PeersConfig.localPeers" title="Permalink to this definition">¶</a></dt>
<dd><p>List of local peers.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.PeersConfig.remotePeers">
<code class="descname">remotePeers</code><a class="headerlink" href="#CedarBackup3.config.PeersConfig.remotePeers" title="Permalink to this definition">¶</a></dt>
<dd><p>List of remote peers.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.PostActionHook">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">PostActionHook</code><span class="sig-paren">(</span><em>action=None</em>, <em>command=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#PostActionHook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.PostActionHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CedarBackup3.config.ActionHook" title="CedarBackup3.config.ActionHook"><code class="xref py py-class docutils literal"><span class="pre">CedarBackup3.config.ActionHook</span></code></a></p>
<p>Class representing a pre-action hook associated with an action.</p>
<p>A hook associated with an action is a shell command to be executed either
before or after a named action is executed.  In this case, a post-action hook
is executed after the named action.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The action name must be a non-empty string consisting of lower-case letters and digits.</li>
<li>The shell command must be a non-empty string.</li>
</ul>
</div></blockquote>
<p>The internal <code class="docutils literal"><span class="pre">before</span></code> instance variable is always set to True in this
class.</p>
<dl class="method">
<dt id="CedarBackup3.config.PostActionHook.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>action=None</em>, <em>command=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#PostActionHook.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.PostActionHook.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">PostActionHook</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>action</strong> &#8211; Action this hook is associated with</li>
<li><strong>command</strong> &#8211; Shell command to execute</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.PreActionHook">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">PreActionHook</code><span class="sig-paren">(</span><em>action=None</em>, <em>command=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#PreActionHook"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.PreActionHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CedarBackup3.config.ActionHook" title="CedarBackup3.config.ActionHook"><code class="xref py py-class docutils literal"><span class="pre">CedarBackup3.config.ActionHook</span></code></a></p>
<p>Class representing a pre-action hook associated with an action.</p>
<p>A hook associated with an action is a shell command to be executed either
before or after a named action is executed.  In this case, a pre-action hook
is executed before the named action.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The action name must be a non-empty string consisting of lower-case letters and digits.</li>
<li>The shell command must be a non-empty string.</li>
</ul>
</div></blockquote>
<p>The internal <code class="docutils literal"><span class="pre">before</span></code> instance variable is always set to True in this
class.</p>
<dl class="method">
<dt id="CedarBackup3.config.PreActionHook.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>action=None</em>, <em>command=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#PreActionHook.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.PreActionHook.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">PreActionHook</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>action</strong> &#8211; Action this hook is associated with</li>
<li><strong>command</strong> &#8211; Shell command to execute</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.PurgeConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">PurgeConfig</code><span class="sig-paren">(</span><em>purgeDirs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#PurgeConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.PurgeConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup purge configuration.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The purge directory list must be a list of <code class="docutils literal"><span class="pre">PurgeDir</span></code> objects.</li>
</ul>
</div></blockquote>
<p>For the <code class="docutils literal"><span class="pre">purgeDirs</span></code> list, validation is accomplished through the
<a class="reference internal" href="#CedarBackup3.util.ObjectTypeList" title="CedarBackup3.util.ObjectTypeList"><code class="xref any py py-class docutils literal"><span class="pre">util.ObjectTypeList</span></code></a> list implementation that overrides common list
methods and transparently ensures that each element is a <code class="docutils literal"><span class="pre">PurgeDir</span></code>.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.config.PurgeConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>purgeDirs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#PurgeConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.PurgeConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">Purge</span></code> class.
:param purgeDirs: List of purge directories</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.PurgeConfig.purgeDirs">
<code class="descname">purgeDirs</code><a class="headerlink" href="#CedarBackup3.config.PurgeConfig.purgeDirs" title="Permalink to this definition">¶</a></dt>
<dd><p>List of directories to purge.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.PurgeDir">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">PurgeDir</code><span class="sig-paren">(</span><em>absolutePath=None</em>, <em>retainDays=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#PurgeDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.PurgeDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup purge directory.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The absolute path must be an absolute path</li>
<li>The retain days value must be an integer &gt;= 0.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.config.PurgeDir.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>absolutePath=None</em>, <em>retainDays=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#PurgeDir.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.PurgeDir.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">PurgeDir</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>absolutePath</strong> &#8211; Absolute path of the directory to be purged</li>
<li><strong>retainDays</strong> &#8211; Number of days content within directory should be retained</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.PurgeDir.absolutePath">
<code class="descname">absolutePath</code><a class="headerlink" href="#CedarBackup3.config.PurgeDir.absolutePath" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of directory to purge.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.PurgeDir.retainDays">
<code class="descname">retainDays</code><a class="headerlink" href="#CedarBackup3.config.PurgeDir.retainDays" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of days content within directory should be retained.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.ReferenceConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">ReferenceConfig</code><span class="sig-paren">(</span><em>author=None</em>, <em>revision=None</em>, <em>description=None</em>, <em>generator=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ReferenceConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ReferenceConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup reference configuration.</p>
<p>The reference information is just used for saving off metadata about
configuration and exists mostly for backwards-compatibility with Cedar
Backup 1.x.</p>
<dl class="method">
<dt id="CedarBackup3.config.ReferenceConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>author=None</em>, <em>revision=None</em>, <em>description=None</em>, <em>generator=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#ReferenceConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.ReferenceConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">ReferenceConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>author</strong> &#8211; Author of the configuration file</li>
<li><strong>revision</strong> &#8211; Revision of the configuration file</li>
<li><strong>description</strong> &#8211; Description of the configuration file</li>
<li><strong>generator</strong> &#8211; Tool that generated the configuration file</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ReferenceConfig.author">
<code class="descname">author</code><a class="headerlink" href="#CedarBackup3.config.ReferenceConfig.author" title="Permalink to this definition">¶</a></dt>
<dd><p>Author of the configuration file.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ReferenceConfig.description">
<code class="descname">description</code><a class="headerlink" href="#CedarBackup3.config.ReferenceConfig.description" title="Permalink to this definition">¶</a></dt>
<dd><p>Description of the configuration file.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ReferenceConfig.generator">
<code class="descname">generator</code><a class="headerlink" href="#CedarBackup3.config.ReferenceConfig.generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Tool that generated the configuration file.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.ReferenceConfig.revision">
<code class="descname">revision</code><a class="headerlink" href="#CedarBackup3.config.ReferenceConfig.revision" title="Permalink to this definition">¶</a></dt>
<dd><p>Revision of the configuration file.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.RemotePeer">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">RemotePeer</code><span class="sig-paren">(</span><em>name=None</em>, <em>collectDir=None</em>, <em>remoteUser=None</em>, <em>rcpCommand=None</em>, <em>rshCommand=None</em>, <em>cbackCommand=None</em>, <em>managed=False</em>, <em>managedActions=None</em>, <em>ignoreFailureMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#RemotePeer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.RemotePeer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup peer.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The peer name must be a non-empty string.</li>
<li>The collect directory must be an absolute path.</li>
<li>The remote user must be a non-empty string.</li>
<li>The rcp command must be a non-empty string.</li>
<li>The rsh command must be a non-empty string.</li>
<li>The cback command must be a non-empty string.</li>
<li>Any managed action name must be a non-empty string matching <code class="docutils literal"><span class="pre">ACTION_NAME_REGEX</span></code></li>
<li>The ignore failure mode must be one of the values in <code class="docutils literal"><span class="pre">VALID_FAILURE_MODES</span></code>.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.config.RemotePeer.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>name=None</em>, <em>collectDir=None</em>, <em>remoteUser=None</em>, <em>rcpCommand=None</em>, <em>rshCommand=None</em>, <em>cbackCommand=None</em>, <em>managed=False</em>, <em>managedActions=None</em>, <em>ignoreFailureMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#RemotePeer.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.RemotePeer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">RemotePeer</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> &#8211; Name of the peer, must be a valid hostname</li>
<li><strong>collectDir</strong> &#8211; Collect directory to stage files from on peer</li>
<li><strong>remoteUser</strong> &#8211; Name of backup user on remote peer</li>
<li><strong>rcpCommand</strong> &#8211; Overridden rcp-compatible copy command for peer</li>
<li><strong>rshCommand</strong> &#8211; Overridden rsh-compatible remote shell command for peer</li>
<li><strong>cbackCommand</strong> &#8211; Overridden cback-compatible command to use on remote peer</li>
<li><strong>managed</strong> &#8211; Indicates whether this is a managed peer</li>
<li><strong>managedActions</strong> &#8211; Overridden set of actions that are managed on the peer</li>
<li><strong>ignoreFailureMode</strong> &#8211; Ignore failure mode for peer</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.RemotePeer.cbackCommand">
<code class="descname">cbackCommand</code><a class="headerlink" href="#CedarBackup3.config.RemotePeer.cbackCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden cback-compatible command to use on remote peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.RemotePeer.collectDir">
<code class="descname">collectDir</code><a class="headerlink" href="#CedarBackup3.config.RemotePeer.collectDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect directory to stage files from on peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.RemotePeer.ignoreFailureMode">
<code class="descname">ignoreFailureMode</code><a class="headerlink" href="#CedarBackup3.config.RemotePeer.ignoreFailureMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Ignore failure mode for peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.RemotePeer.managed">
<code class="descname">managed</code><a class="headerlink" href="#CedarBackup3.config.RemotePeer.managed" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether this is a managed peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.RemotePeer.managedActions">
<code class="descname">managedActions</code><a class="headerlink" href="#CedarBackup3.config.RemotePeer.managedActions" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden set of actions that are managed on the peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.RemotePeer.name">
<code class="descname">name</code><a class="headerlink" href="#CedarBackup3.config.RemotePeer.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the peer, must be a valid hostname.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.RemotePeer.rcpCommand">
<code class="descname">rcpCommand</code><a class="headerlink" href="#CedarBackup3.config.RemotePeer.rcpCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden rcp-compatible copy command for peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.RemotePeer.remoteUser">
<code class="descname">remoteUser</code><a class="headerlink" href="#CedarBackup3.config.RemotePeer.remoteUser" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of backup user on remote peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.RemotePeer.rshCommand">
<code class="descname">rshCommand</code><a class="headerlink" href="#CedarBackup3.config.RemotePeer.rshCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden rsh-compatible remote shell command for peer.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.StageConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">StageConfig</code><span class="sig-paren">(</span><em>targetDir=None</em>, <em>localPeers=None</em>, <em>remotePeers=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#StageConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.StageConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup stage configuration.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The target directory must be an absolute path</li>
<li>The list of local peers must contain only <code class="docutils literal"><span class="pre">LocalPeer</span></code> objects</li>
<li>The list of remote peers must contain only <code class="docutils literal"><span class="pre">RemotePeer</span></code> objects</li>
</ul>
</div></blockquote>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.config.StageConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>targetDir=None</em>, <em>localPeers=None</em>, <em>remotePeers=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#StageConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.StageConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">StageConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>targetDir</strong> &#8211; Directory to stage files into, by peer name</li>
<li><strong>localPeers</strong> &#8211; List of local peers</li>
<li><strong>remotePeers</strong> &#8211; List of remote peers</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.config.StageConfig.hasPeers">
<code class="descname">hasPeers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#StageConfig.hasPeers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.StageConfig.hasPeers" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether any peers are filled into this object.
:returns: Boolean true if any local or remote peers are filled in, false otherwise</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StageConfig.localPeers">
<code class="descname">localPeers</code><a class="headerlink" href="#CedarBackup3.config.StageConfig.localPeers" title="Permalink to this definition">¶</a></dt>
<dd><p>List of local peers.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StageConfig.remotePeers">
<code class="descname">remotePeers</code><a class="headerlink" href="#CedarBackup3.config.StageConfig.remotePeers" title="Permalink to this definition">¶</a></dt>
<dd><p>List of remote peers.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StageConfig.targetDir">
<code class="descname">targetDir</code><a class="headerlink" href="#CedarBackup3.config.StageConfig.targetDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory to stage files into, by peer name.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.config.StoreConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.config.</code><code class="descname">StoreConfig</code><span class="sig-paren">(</span><em>sourceDir=None</em>, <em>mediaType=None</em>, <em>deviceType=None</em>, <em>devicePath=None</em>, <em>deviceScsiId=None</em>, <em>driveSpeed=None</em>, <em>checkData=False</em>, <em>warnMidnite=False</em>, <em>noEject=False</em>, <em>checkMedia=False</em>, <em>blankBehavior=None</em>, <em>refreshMediaDelay=None</em>, <em>ejectDelay=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#StoreConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.StoreConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a Cedar Backup store configuration.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The source directory must be an absolute path.</li>
<li>The media type must be one of the values in <a class="reference internal" href="#CedarBackup3.config.VALID_MEDIA_TYPES" title="CedarBackup3.config.VALID_MEDIA_TYPES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_MEDIA_TYPES</span></code></a>.</li>
<li>The device type must be one of the values in <a class="reference internal" href="#CedarBackup3.config.VALID_DEVICE_TYPES" title="CedarBackup3.config.VALID_DEVICE_TYPES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_DEVICE_TYPES</span></code></a>.</li>
<li>The device path must be an absolute path.</li>
<li>The SCSI id, if provided, must be in the form specified by <a class="reference internal" href="CedarBackup3.writers.html#CedarBackup3.writers.util.validateScsiId" title="CedarBackup3.writers.util.validateScsiId"><code class="xref any py py-func docutils literal"><span class="pre">validateScsiId</span></code></a>.</li>
<li>The drive speed must be an integer &gt;= 1</li>
<li>The blanking behavior must be a <code class="docutils literal"><span class="pre">BlankBehavior</span></code> object</li>
<li>The refresh media delay must be an integer &gt;= 0</li>
<li>The eject delay must be an integer &gt;= 0</li>
</ul>
</div></blockquote>
<p>Note that although the blanking factor must be a positive floating point
number, it is stored as a string. This is done so that we can losslessly go
back and forth between XML and object representations of configuration.</p>
<dl class="method">
<dt id="CedarBackup3.config.StoreConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>sourceDir=None</em>, <em>mediaType=None</em>, <em>deviceType=None</em>, <em>devicePath=None</em>, <em>deviceScsiId=None</em>, <em>driveSpeed=None</em>, <em>checkData=False</em>, <em>warnMidnite=False</em>, <em>noEject=False</em>, <em>checkMedia=False</em>, <em>blankBehavior=None</em>, <em>refreshMediaDelay=None</em>, <em>ejectDelay=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#StoreConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.StoreConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">StoreConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sourceDir</strong> &#8211; Directory whose contents should be written to media</li>
<li><strong>mediaType</strong> &#8211; Type of the media (see notes above)</li>
<li><strong>deviceType</strong> &#8211; Type of the device (optional, see notes above)</li>
<li><strong>devicePath</strong> &#8211; Filesystem device name for writer device, i.e. <code class="docutils literal"><span class="pre">/dev/cdrw</span></code></li>
<li><strong>deviceScsiId</strong> &#8211; SCSI id for writer device, i.e. <code class="docutils literal"><span class="pre">[&lt;method&gt;:]scsibus,target,lun</span></code></li>
<li><strong>driveSpeed</strong> &#8211; Speed of the drive, i.e. <code class="docutils literal"><span class="pre">2</span></code> for 2x drive, etc</li>
<li><strong>checkData</strong> &#8211; Whether resulting image should be validated</li>
<li><strong>checkMedia</strong> &#8211; Whether media should be checked before being written to</li>
<li><strong>warnMidnite</strong> &#8211; Whether to generate warnings for crossing midnite</li>
<li><strong>noEject</strong> &#8211; Indicates that the writer device should not be ejected</li>
<li><strong>blankBehavior</strong> &#8211; Controls optimized blanking behavior</li>
<li><strong>refreshMediaDelay</strong> &#8211; Delay, in seconds, to add after refreshing media</li>
<li><strong>ejectDelay</strong> &#8211; Delay, in seconds, to add after ejecting media before closing the tray</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.blankBehavior">
<code class="descname">blankBehavior</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.blankBehavior" title="Permalink to this definition">¶</a></dt>
<dd><p>Controls optimized blanking behavior.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.checkData">
<code class="descname">checkData</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.checkData" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether resulting image should be validated.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.checkMedia">
<code class="descname">checkMedia</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.checkMedia" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether media should be checked before being written to.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.devicePath">
<code class="descname">devicePath</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.devicePath" title="Permalink to this definition">¶</a></dt>
<dd><p>Filesystem device name for writer device.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.deviceScsiId">
<code class="descname">deviceScsiId</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.deviceScsiId" title="Permalink to this definition">¶</a></dt>
<dd><p>SCSI id for writer device (optional, see notes above).</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.deviceType">
<code class="descname">deviceType</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.deviceType" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of the device (optional, see notes above).</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.driveSpeed">
<code class="descname">driveSpeed</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.driveSpeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Speed of the drive.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.ejectDelay">
<code class="descname">ejectDelay</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.ejectDelay" title="Permalink to this definition">¶</a></dt>
<dd><p>Delay, in seconds, to add after ejecting media before closing the tray</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.mediaType">
<code class="descname">mediaType</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.mediaType" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of the media (see notes above).</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.noEject">
<code class="descname">noEject</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.noEject" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates that the writer device should not be ejected.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.refreshMediaDelay">
<code class="descname">refreshMediaDelay</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.refreshMediaDelay" title="Permalink to this definition">¶</a></dt>
<dd><p>Delay, in seconds, to add after refreshing media.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.sourceDir">
<code class="descname">sourceDir</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.sourceDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory whose contents should be written to media.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.config.StoreConfig.warnMidnite">
<code class="descname">warnMidnite</code><a class="headerlink" href="#CedarBackup3.config.StoreConfig.warnMidnite" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to generate warnings for crossing midnite.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.config.addByteQuantityNode">
<code class="descclassname">CedarBackup3.config.</code><code class="descname">addByteQuantityNode</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em>, <em>nodeName</em>, <em>byteQuantity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#addByteQuantityNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.addByteQuantityNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a text node as the next child of a parent, to contain a byte size.</p>
<p>If the <code class="docutils literal"><span class="pre">byteQuantity</span></code> is None, then the node will be created, but will
be empty (i.e. will contain no text node child).</p>
<p>The size in bytes will be normalized.  If it is larger than 1.0 GB, it will
be shown in GB (&#8220;1.0 GB&#8221;).  If it is larger than 1.0 MB (&#8220;1.0 MB&#8221;), it will
be shown in MB.  Otherwise, it will be shown in bytes (&#8220;423413&#8221;).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent node to create child for</li>
<li><strong>nodeName</strong> &#8211; Name of the new container node</li>
<li><strong>byteQuantity</strong> &#8211; ByteQuantity object to put into the XML document</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Reference to the newly-created node</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.config.readByteQuantity">
<code class="descclassname">CedarBackup3.config.</code><code class="descname">readByteQuantity</code><span class="sig-paren">(</span><em>parent</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/config.html#readByteQuantity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.config.readByteQuantity" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a byte size value from an XML document.</p>
<p>A byte size value is an interpreted string value.  If the string value
ends with &#8220;MB&#8221; or &#8220;GB&#8221;, then the string before that is interpreted as
megabytes or gigabytes.  Otherwise, it is intepreted as bytes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent</strong> &#8211; Parent node to search beneath</li>
<li><strong>name</strong> &#8211; Name of node to search for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">ByteQuantity parsed from XML document</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-CedarBackup3.customize">
<span id="cedarbackup3-customize-module"></span><h2>CedarBackup3.customize module<a class="headerlink" href="#module-CedarBackup3.customize" title="Permalink to this headline">¶</a></h2>
<p>Implements customized behavior.</p>
<p>Some behaviors need to vary when packaged for certain platforms.  For instance,
while Cedar Backup generally uses cdrecord and mkisofs, Debian ships compatible
utilities called wodim and genisoimage. I want there to be one single place
where Cedar Backup is patched for Debian, rather than having to maintain a
variety of patches in different places.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="CedarBackup3.customize.customizeOverrides">
<code class="descclassname">CedarBackup3.customize.</code><code class="descname">customizeOverrides</code><span class="sig-paren">(</span><em>config</em>, <em>platform='standard'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/customize.html#customizeOverrides"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.customize.customizeOverrides" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify command overrides based on the configured platform.</p>
<p>On some platforms, we want to add command overrides to configuration.  Each
override will only be added if the configuration does not already contain an
override with the same name.  That way, the user still has a way to choose
their own version of the command if they want.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config</strong> &#8211; Configuration to modify</li>
<li><strong>platform</strong> &#8211; Platform that is in use</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-CedarBackup3.filesystem">
<span id="cedarbackup3-filesystem-module"></span><h2>CedarBackup3.filesystem module<a class="headerlink" href="#module-CedarBackup3.filesystem" title="Permalink to this headline">¶</a></h2>
<p>Provides filesystem-related objects.
:author: Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</p>
<dl class="class">
<dt id="CedarBackup3.filesystem.BackupFileList">
<em class="property">class </em><code class="descclassname">CedarBackup3.filesystem.</code><code class="descname">BackupFileList</code><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#BackupFileList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.BackupFileList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList" title="CedarBackup3.filesystem.FilesystemList"><code class="xref py py-class docutils literal"><span class="pre">CedarBackup3.filesystem.FilesystemList</span></code></a></p>
<p>List of files to be backed up.</p>
<p>A BackupFileList is a <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList" title="CedarBackup3.filesystem.FilesystemList"><code class="xref any py py-class docutils literal"><span class="pre">FilesystemList</span></code></a> containing a list of files to be
backed up.  It only contains files, not directories (soft links are treated
like files).  On top of the generic functionality provided by
<a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList" title="CedarBackup3.filesystem.FilesystemList"><code class="xref any py py-class docutils literal"><span class="pre">FilesystemList</span></code></a>, this class adds functionality to keep a hash (checksum)
for each file in the list, and it also provides a method to calculate the
total size of the files in the list and a way to export the list into tar
form.</p>
<dl class="method">
<dt id="CedarBackup3.filesystem.BackupFileList.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#BackupFileList.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.BackupFileList.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a list with no configured exclusions.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.BackupFileList.addDir">
<code class="descname">addDir</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#BackupFileList.addDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.BackupFileList.addDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a directory to the list.</p>
<p>Note that this class does not allow directories to be added by themselves
(a backup list contains only files).  However, since links to directories
are technically files, we allow them to be added.</p>
<p>This method is implemented in terms of the superclass method, with one
additional validation: the superclass method is only called if the
passed-in path is both a directory and a link.  All of the superclass&#8217;s
existing validations and restrictions apply.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>path</strong> (<em>String representing a path on disk</em>) &#8211; Directory path to be added to the list</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Number of items added to the list</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If path is not a directory or does not exist</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the path could not be encoded properly</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.BackupFileList.generateDigestMap">
<code class="descname">generateDigestMap</code><span class="sig-paren">(</span><em>stripPrefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#BackupFileList.generateDigestMap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.BackupFileList.generateDigestMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a mapping from file to file digest.</p>
<p>Currently, the digest is an SHA hash, which should be pretty secure.  In
the future, this might be a different kind of hash, but we guarantee that
the type of the hash will not change unless the library major version
number is bumped.</p>
<p>Entries which do not exist on disk are ignored.</p>
<p>Soft links are ignored.  We would end up generating a digest for the file
that the soft link points at, which doesn&#8217;t make any sense.</p>
<p>If <code class="docutils literal"><span class="pre">stripPrefix</span></code> is passed in, then that prefix will be stripped from
each key when the map is generated.  This can be useful in generating two
&#8220;relative&#8221; digest maps to be compared to one another.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stripPrefix</strong> (<em>String with any contents</em>) &#8211; Common prefix to be stripped from paths</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Dictionary mapping file to digest value</td>
</tr>
</tbody>
</table>
<p>&#64;see: <a class="reference internal" href="#CedarBackup3.filesystem.BackupFileList.removeUnchanged" title="CedarBackup3.filesystem.BackupFileList.removeUnchanged"><code class="xref any py py-meth docutils literal"><span class="pre">removeUnchanged</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.BackupFileList.generateFitted">
<code class="descname">generateFitted</code><span class="sig-paren">(</span><em>capacity</em>, <em>algorithm='worst_fit'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#BackupFileList.generateFitted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.BackupFileList.generateFitted" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a list of items that fit in the indicated capacity.</p>
<p>Sometimes, callers would like to include every item in a list, but are
unable to because not all of the items fit in the space available.  This
method returns a copy of the list, containing only the items that fit in
a given capacity.  A copy is returned so that we don&#8217;t lose any
information if for some reason the fitted list is unsatisfactory.</p>
<p>The fitting is done using the functions in the knapsack module.  By
default, the first fit algorithm is used, but you can also choose
from best fit, worst fit and alternate fit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>capacity</strong> (<em>Integer, in bytes</em>) &#8211; Maximum capacity among the files in the new list</li>
<li><strong>algorithm</strong> (<em>One of &quot;first_fit&quot;, &quot;best_fit&quot;, &quot;worst_fit&quot;, &quot;alternate_fit&quot;</em>) &#8211; Knapsack (fit) algorithm to use</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Copy of list with total size no larger than indicated capacity</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the algorithm is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.BackupFileList.generateSizeMap">
<code class="descname">generateSizeMap</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#BackupFileList.generateSizeMap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.BackupFileList.generateSizeMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a mapping from file to file size in bytes.
The mapping does include soft links, which are listed with size zero.
Entries which do not exist on disk are ignored.
:returns: Dictionary mapping file to file size</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.BackupFileList.generateSpan">
<code class="descname">generateSpan</code><span class="sig-paren">(</span><em>capacity</em>, <em>algorithm='worst_fit'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#BackupFileList.generateSpan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.BackupFileList.generateSpan" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the list of items into sub-lists that fit in a given capacity.</p>
<p>Sometimes, callers need split to a backup file list into a set of smaller
lists.  For instance, you could use this to &#8220;span&#8221; the files across a set
of discs.</p>
<p>The fitting is done using the functions in the knapsack module.  By
default, the first fit algorithm is used, but you can also choose
from best fit, worst fit and alternate fit.</p>
<p><em>Note:</em> If any of your items are larger than the capacity, then it won&#8217;t
be possible to find a solution.  In this case, a value error will be
raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>capacity</strong> (<em>Integer, in bytes</em>) &#8211; Maximum capacity among the files in the new list</li>
<li><strong>algorithm</strong> (<em>One of &quot;first_fit&quot;, &quot;best_fit&quot;, &quot;worst_fit&quot;, &quot;alternate_fit&quot;</em>) &#8211; Knapsack (fit) algorithm to use</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">List of <a class="reference internal" href="#CedarBackup3.filesystem.SpanItem" title="CedarBackup3.filesystem.SpanItem"><code class="xref any py py-class docutils literal"><span class="pre">SpanItem</span></code></a> objects</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the algorithm is invalid</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If it&#8217;s not possible to fit some items</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.BackupFileList.generateTarfile">
<code class="descname">generateTarfile</code><span class="sig-paren">(</span><em>path</em>, <em>mode='tar'</em>, <em>ignore=False</em>, <em>flat=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#BackupFileList.generateTarfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.BackupFileList.generateTarfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a tar file containing the files in the list.</p>
<p>By default, this method will create uncompressed tar files.  If you pass
in mode <code class="docutils literal"><span class="pre">'targz'</span></code>, then it will create gzipped tar files, and if you
pass in mode <code class="docutils literal"><span class="pre">'tarbz2'</span></code>, then it will create bzipped tar files.</p>
<p>The tar file will be created as a GNU tar archive, which enables extended
file name lengths, etc.  Since GNU tar is so prevalent, I&#8217;ve decided that
the extra functionality out-weighs the disadvantage of not being
&#8220;standard&#8221;.</p>
<p>If you pass in <code class="docutils literal"><span class="pre">flat=True</span></code>, then a &#8220;flat&#8221; archive will be created, and
all of the files will be added to the root of the archive.  So, the file
<code class="docutils literal"><span class="pre">/tmp/something/whatever.txt</span></code> would be added as just <code class="docutils literal"><span class="pre">whatever.txt</span></code>.</p>
<p>By default, the whole method call fails if there are problems adding any
of the files to the archive, resulting in an exception.  Under these
circumstances, callers are advised that they might want to call
<a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.removeInvalid" title="CedarBackup3.filesystem.FilesystemList.removeInvalid"><code class="xref any py py-meth docutils literal"><span class="pre">removeInvalid</span></code></a> and then attempt to extract the tar file a second
time, since the most common cause of failures is a missing file (a file
that existed when the list was built, but is gone again by the time the
tar file is built).</p>
<p>If you want to, you can pass in <code class="docutils literal"><span class="pre">ignore=True</span></code>, and the method will
ignore errors encountered when adding individual files to the archive
(but not errors opening and closing the archive itself).</p>
<p>We&#8217;ll always attempt to remove the tarfile from disk if an exception will
be thrown.</p>
<p><em>Note:</em> No validation is done as to whether the entries in the list are
files, since only files or soft links should be in an object like this.
However, to be safe, everything is explicitly added to the tar archive
non-recursively so it&#8217;s safe to include soft links to directories.</p>
<p><em>Note:</em> The Python <code class="docutils literal"><span class="pre">tarfile</span></code> module, which is used internally here, is
supposed to deal properly with long filenames and links.  In my testing,
I have found that it appears to be able to add long really long filenames
to archives, but doesn&#8217;t do a good job reading them back out, even out of
an archive it created.  Fortunately, all Cedar Backup does is add files
to archives.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<em>String representing a path on disk</em>) &#8211; Path of tar file to create on disk</li>
<li><strong>mode</strong> (One of either <code class="docutils literal"><span class="pre">'tar'</span></code>, <code class="docutils literal"><span class="pre">'targz'</span></code> or <code class="docutils literal"><span class="pre">'tarbz2'</span></code>) &#8211; Tar creation mode</li>
<li><strong>ignore</strong> (<em>Boolean</em>) &#8211; Indicates whether to ignore certain errors</li>
<li><strong>flat</strong> (<em>Boolean</em>) &#8211; Creates &#8220;flat&#8221; archive by putting all items in root</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If mode is not valid</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If list is empty</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the path could not be encoded properly</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">TarError</span></code> &#8211; If there is a problem creating the tar file</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.BackupFileList.removeUnchanged">
<code class="descname">removeUnchanged</code><span class="sig-paren">(</span><em>digestMap</em>, <em>captureDigest=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#BackupFileList.removeUnchanged"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.BackupFileList.removeUnchanged" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes unchanged entries from the list.</p>
<p>This method relies on a digest map as returned from <a class="reference internal" href="#CedarBackup3.filesystem.BackupFileList.generateDigestMap" title="CedarBackup3.filesystem.BackupFileList.generateDigestMap"><code class="xref any py py-meth docutils literal"><span class="pre">generateDigestMap</span></code></a>.
For each entry in <code class="docutils literal"><span class="pre">digestMap</span></code>, if the entry also exists in the current
list <em>and</em> the entry in the current list has the same digest value as in
the map, the entry in the current list will be removed.</p>
<p>This method offers a convenient way for callers to filter unneeded
entries from a list.  The idea is that a caller will capture a digest map
from <code class="docutils literal"><span class="pre">generateDigestMap</span></code> at some point in time (perhaps the beginning of
the week), and will save off that map using <code class="docutils literal"><span class="pre">pickle</span></code> or some other
method.  Then, the caller could use this method sometime in the future to
filter out any unchanged files based on the saved-off map.</p>
<p>If <code class="docutils literal"><span class="pre">captureDigest</span></code> is passed-in as <code class="docutils literal"><span class="pre">True</span></code>, then digest information will
be captured for the entire list before the removal step occurs using the
same rules as in <a class="reference internal" href="#CedarBackup3.filesystem.BackupFileList.generateDigestMap" title="CedarBackup3.filesystem.BackupFileList.generateDigestMap"><code class="xref any py py-meth docutils literal"><span class="pre">generateDigestMap</span></code></a>.  The check will involve a lookup
into the complete digest map.</p>
<p>If <code class="docutils literal"><span class="pre">captureDigest</span></code> is passed in as <code class="docutils literal"><span class="pre">False</span></code>, we will only generate a
digest value for files we actually need to check, and we&#8217;ll ignore any
entry in the list which isn&#8217;t a file that currently exists on disk.</p>
<p>The return value varies depending on <code class="docutils literal"><span class="pre">captureDigest</span></code>, as well.  To
preserve backwards compatibility, if <code class="docutils literal"><span class="pre">captureDigest</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, then
we&#8217;ll just return a single value representing the number of entries
removed.  Otherwise, we&#8217;ll return a tuple of C{(entries removed, digest
map)}.  The returned digest map will be in exactly the form returned by
<a class="reference internal" href="#CedarBackup3.filesystem.BackupFileList.generateDigestMap" title="CedarBackup3.filesystem.BackupFileList.generateDigestMap"><code class="xref any py py-meth docutils literal"><span class="pre">generateDigestMap</span></code></a>.</p>
<p><em>Note:</em> For performance reasons, this method actually ends up rebuilding
the list from scratch.  First, we build a temporary dictionary containing
all of the items from the original list.  Then, we remove items as needed
from the dictionary (which is faster than the equivalent operation on a
list).  Finally, we replace the contents of the current list based on the
keys left in the dictionary.  This should be transparent to the caller.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>digestMap</strong> (Map as returned from <a class="reference internal" href="#CedarBackup3.filesystem.BackupFileList.generateDigestMap" title="CedarBackup3.filesystem.BackupFileList.generateDigestMap"><code class="xref any py py-meth docutils literal"><span class="pre">generateDigestMap</span></code></a>) &#8211; Dictionary mapping file name to digest value</li>
<li><strong>captureDigest</strong> (<em>Boolean</em>) &#8211; Indicates that digest information should be captured</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Results as discussed above (format varies based on arguments)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.BackupFileList.totalSize">
<code class="descname">totalSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#BackupFileList.totalSize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.BackupFileList.totalSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total size among all files in the list.
Only files are counted.
Soft links that point at files are ignored.
Entries which do not exist on disk are ignored.
:returns: Total size, in bytes</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.filesystem.FilesystemList">
<em class="property">class </em><code class="descclassname">CedarBackup3.filesystem.</code><code class="descname">FilesystemList</code><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">list</span></code></p>
<p>Represents a list of filesystem items.</p>
<p>This is a generic class that represents a list of filesystem items.  Callers
can add individual files or directories to the list, or can recursively add
the contents of a directory.  The class also allows for up-front exclusions
in several forms (all files, all directories, all items matching a pattern,
all items whose basename matches a pattern, or all directories containing a
specific &#8220;ignore file&#8221;).  Symbolic links are typically backed up
non-recursively, i.e. the link to a directory is backed up, but not the
contents of that link (we don&#8217;t want to deal with recursive loops, etc.).</p>
<p>The custom methods such as <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.addFile" title="CedarBackup3.filesystem.FilesystemList.addFile"><code class="xref any py py-meth docutils literal"><span class="pre">addFile</span></code></a> will only add items if they exist on
the filesystem and do not match any exclusions that are already in place.
However, since a FilesystemList is a subclass of Python&#8217;s standard list
class, callers can also add items to the list in the usual way, using
methods like <code class="docutils literal"><span class="pre">append()</span></code> or <code class="docutils literal"><span class="pre">insert()</span></code>.  No validations apply to items
added to the list in this way; however, many list-manipulation methods deal
&#8220;gracefully&#8221; with items that don&#8217;t exist in the filesystem, often by
ignoring them.</p>
<p>Once a list has been created, callers can remove individual items from the
list using standard methods like <code class="docutils literal"><span class="pre">pop()</span></code> or <code class="docutils literal"><span class="pre">remove()</span></code> or they can use
custom methods to remove specific types of entries or entries which match a
particular pattern.</p>
<p><em>Note:</em> Regular expression patterns that apply to paths are assumed to be
bounded at front and back by the beginning and end of the string, i.e. they
are treated as if they begin with <code class="docutils literal"><span class="pre">^</span></code> and end with <code class="docutils literal"><span class="pre">$</span></code>.  This is true
whether we are matching a complete path or a basename.</p>
<dl class="method">
<dt id="CedarBackup3.filesystem.FilesystemList.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a list with no configured exclusions.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.FilesystemList.addDir">
<code class="descname">addDir</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList.addDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.addDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a directory to the list.</p>
<p>The path must exist and must be a directory or a link to an existing
directory.  It will be added to the list subject to any exclusions that
are in place.  The <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.ignoreFile" title="CedarBackup3.filesystem.FilesystemList.ignoreFile"><code class="xref any py py-attr docutils literal"><span class="pre">ignoreFile</span></code></a> does not apply to this method, only to
<a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.addDirContents" title="CedarBackup3.filesystem.FilesystemList.addDirContents"><code class="xref any py py-meth docutils literal"><span class="pre">addDirContents</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>path</strong> (<em>String representing a path on disk</em>) &#8211; Directory path to be added to the list</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Number of items added to the list</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If path is not a directory or does not exist</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the path could not be encoded properly</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.FilesystemList.addDirContents">
<code class="descname">addDirContents</code><span class="sig-paren">(</span><em>path</em>, <em>recursive=True</em>, <em>addSelf=True</em>, <em>linkDepth=0</em>, <em>dereference=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList.addDirContents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.addDirContents" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the contents of a directory to the list.</p>
<p>The path must exist and must be a directory or a link to a directory.
The contents of the directory (as well as the directory path itself) will
be recursively added to the list, subject to any exclusions that are in
place.  If you only want the directory and its immediate contents to be
added, then pass in <code class="docutils literal"><span class="pre">recursive=False</span></code>.</p>
<p><em>Note:</em> If a directory&#8217;s absolute path matches an exclude pattern or path,
or if the directory contains the configured ignore file, then the
directory and all of its contents will be recursively excluded from the
list.</p>
<p><em>Note:</em> If the passed-in directory happens to be a soft link, it will be
recursed.  However, the linkDepth parameter controls whether any soft
links <em>within</em> the directory will be recursed.  The link depth is
maximum depth of the tree at which soft links should be followed.  So, a
depth of 0 does not follow any soft links, a depth of 1 follows only
links within the passed-in directory, a depth of 2 follows the links at
the next level down, etc.</p>
<p><em>Note:</em> Any invalid soft links (i.e.  soft links that point to
non-existent items) will be silently ignored.</p>
<p><em>Note:</em> The <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.excludeDirs" title="CedarBackup3.filesystem.FilesystemList.excludeDirs"><code class="xref any py py-attr docutils literal"><span class="pre">excludeDirs</span></code></a> flag only controls whether any given directory
path itself is added to the list once it has been discovered.  It does
<em>not</em> modify any behavior related to directory recursion.</p>
<p><em>Note:</em> If you call this method <em>on a link to a directory</em> that link will
never be dereferenced (it may, however, be followed).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<em>String representing a path on disk</em>) &#8211; Directory path whose contents should be added to the list</li>
<li><strong>recursive</strong> (<em>Boolean value</em>) &#8211; Indicates whether directory contents should be added recursively</li>
<li><strong>addSelf</strong> (<em>Boolean value</em>) &#8211; Indicates whether the directory itself should be added to the list</li>
<li><strong>linkDepth</strong> (<em>Integer value</em>) &#8211; Maximum depth of the tree at which soft links should be followed, zero means not to folow</li>
<li><strong>dereference</strong> (<em>Boolean value</em>) &#8211; Indicates whether soft links, if followed, should be dereferenced</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Number of items recursively added to the list</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If path is not a directory or does not exist</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the path could not be encoded properly</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.FilesystemList.addFile">
<code class="descname">addFile</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList.addFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.addFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a file to the list.</p>
<p>The path must exist and must be a file or a link to an existing file.  It
will be added to the list subject to any exclusions that are in place.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>path</strong> (<em>String representing a path on disk</em>) &#8211; File path to be added to the list</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Number of items added to the list</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If path is not a file or does not exist</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the path could not be encoded properly</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.filesystem.FilesystemList.excludeBasenamePatterns">
<code class="descname">excludeBasenamePatterns</code><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.excludeBasenamePatterns" title="Permalink to this definition">¶</a></dt>
<dd><p>List of regular expression patterns (matching basename) to be excluded.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.filesystem.FilesystemList.excludeDirs">
<code class="descname">excludeDirs</code><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.excludeDirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean indicating whether directories should be excluded.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.filesystem.FilesystemList.excludeFiles">
<code class="descname">excludeFiles</code><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.excludeFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean indicating whether files should be excluded.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.filesystem.FilesystemList.excludeLinks">
<code class="descname">excludeLinks</code><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.excludeLinks" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean indicating whether soft links should be excluded.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.filesystem.FilesystemList.excludePaths">
<code class="descname">excludePaths</code><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.excludePaths" title="Permalink to this definition">¶</a></dt>
<dd><p>List of absolute paths to be excluded.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.filesystem.FilesystemList.excludePatterns">
<code class="descname">excludePatterns</code><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.excludePatterns" title="Permalink to this definition">¶</a></dt>
<dd><p>List of regular expression patterns (matching complete path) to be excluded.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.filesystem.FilesystemList.ignoreFile">
<code class="descname">ignoreFile</code><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.ignoreFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of file which will cause directory contents to be ignored.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.FilesystemList.normalize">
<code class="descname">normalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList.normalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalizes the list, ensuring that each entry is unique.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.FilesystemList.removeDirs">
<code class="descname">removeDirs</code><span class="sig-paren">(</span><em>pattern=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList.removeDirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.removeDirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes directory entries from the list.</p>
<p>If <code class="docutils literal"><span class="pre">pattern</span></code> is not passed in or is <code class="docutils literal"><span class="pre">None</span></code>, then all directory entries
will be removed from the list.  Otherwise, only those directory entries
matching the pattern will be removed.  Any entry which does not exist on
disk will be ignored (use <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.removeInvalid" title="CedarBackup3.filesystem.FilesystemList.removeInvalid"><code class="xref any py py-meth docutils literal"><span class="pre">removeInvalid</span></code></a> to purge those entries).</p>
<p>This method might be fairly slow for large lists, since it must check the
type of each item in the list.  If you know ahead of time that you want
to exclude all directories, then you will be better off setting
<a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.excludeDirs" title="CedarBackup3.filesystem.FilesystemList.excludeDirs"><code class="xref any py py-attr docutils literal"><span class="pre">excludeDirs</span></code></a> to <code class="docutils literal"><span class="pre">True</span></code> before adding items to the list (note that this
will not prevent you from recursively adding the <em>contents</em> of
directories).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pattern</strong> &#8211; Regular expression pattern representing entries to remove</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Number of entries removed</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the passed-in pattern is not a valid regular expression</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.FilesystemList.removeFiles">
<code class="descname">removeFiles</code><span class="sig-paren">(</span><em>pattern=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList.removeFiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.removeFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes file entries from the list.</p>
<p>If <code class="docutils literal"><span class="pre">pattern</span></code> is not passed in or is <code class="docutils literal"><span class="pre">None</span></code>, then all file entries will
be removed from the list.  Otherwise, only those file entries matching
the pattern will be removed.  Any entry which does not exist on disk
will be ignored (use <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.removeInvalid" title="CedarBackup3.filesystem.FilesystemList.removeInvalid"><code class="xref any py py-meth docutils literal"><span class="pre">removeInvalid</span></code></a> to purge those entries).</p>
<p>This method might be fairly slow for large lists, since it must check the
type of each item in the list.  If you know ahead of time that you want
to exclude all files, then you will be better off setting <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.excludeFiles" title="CedarBackup3.filesystem.FilesystemList.excludeFiles"><code class="xref any py py-attr docutils literal"><span class="pre">excludeFiles</span></code></a>
to <code class="docutils literal"><span class="pre">True</span></code> before adding items to the list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pattern</strong> &#8211; Regular expression pattern representing entries to remove</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Number of entries removed</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the passed-in pattern is not a valid regular expression</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.FilesystemList.removeInvalid">
<code class="descname">removeInvalid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList.removeInvalid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.removeInvalid" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes from the list all entries that do not exist on disk.</p>
<p>This method removes from the list all entries which do not currently
exist on disk in some form.  No attention is paid to whether the entries
are files or directories.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Number of entries removed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.FilesystemList.removeLinks">
<code class="descname">removeLinks</code><span class="sig-paren">(</span><em>pattern=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList.removeLinks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.removeLinks" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes soft link entries from the list.</p>
<p>If <code class="docutils literal"><span class="pre">pattern</span></code> is not passed in or is <code class="docutils literal"><span class="pre">None</span></code>, then all soft link entries
will be removed from the list.  Otherwise, only those soft link entries
matching the pattern will be removed.  Any entry which does not exist on
disk will be ignored (use <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.removeInvalid" title="CedarBackup3.filesystem.FilesystemList.removeInvalid"><code class="xref any py py-meth docutils literal"><span class="pre">removeInvalid</span></code></a> to purge those entries).</p>
<p>This method might be fairly slow for large lists, since it must check the
type of each item in the list.  If you know ahead of time that you want
to exclude all soft links, then you will be better off setting
<a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.excludeLinks" title="CedarBackup3.filesystem.FilesystemList.excludeLinks"><code class="xref any py py-attr docutils literal"><span class="pre">excludeLinks</span></code></a> to <code class="docutils literal"><span class="pre">True</span></code> before adding items to the list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pattern</strong> &#8211; Regular expression pattern representing entries to remove</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Number of entries removed</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the passed-in pattern is not a valid regular expression</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.FilesystemList.removeMatch">
<code class="descname">removeMatch</code><span class="sig-paren">(</span><em>pattern</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList.removeMatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.removeMatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes from the list all entries matching a pattern.</p>
<p>This method removes from the list all entries which match the passed in
<code class="docutils literal"><span class="pre">pattern</span></code>.  Since there is no need to check the type of each entry, it
is faster to call this method than to call the <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.removeFiles" title="CedarBackup3.filesystem.FilesystemList.removeFiles"><code class="xref any py py-meth docutils literal"><span class="pre">removeFiles</span></code></a>,
<a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.removeDirs" title="CedarBackup3.filesystem.FilesystemList.removeDirs"><code class="xref any py py-meth docutils literal"><span class="pre">removeDirs</span></code></a> or <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.removeLinks" title="CedarBackup3.filesystem.FilesystemList.removeLinks"><code class="xref any py py-meth docutils literal"><span class="pre">removeLinks</span></code></a> methods individually.  If you know which
patterns you will want to remove ahead of time, you may be better off
setting <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.excludePatterns" title="CedarBackup3.filesystem.FilesystemList.excludePatterns"><code class="xref any py py-attr docutils literal"><span class="pre">excludePatterns</span></code></a> or <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.excludeBasenamePatterns" title="CedarBackup3.filesystem.FilesystemList.excludeBasenamePatterns"><code class="xref any py py-attr docutils literal"><span class="pre">excludeBasenamePatterns</span></code></a> before adding
items to the list.</p>
<p><em>Note:</em> Unlike when using the exclude lists, the pattern here is <em>not</em>
bounded at the front and the back of the string.  You can use any pattern
you want.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pattern</strong> &#8211; Regular expression pattern representing entries to remove</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Number of entries removed</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the passed-in pattern is not a valid regular expression</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.FilesystemList.verify">
<code class="descname">verify</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#FilesystemList.verify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.FilesystemList.verify" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies that all entries in the list exist on disk.
:returns: <code class="docutils literal"><span class="pre">True</span></code> if all entries exist, <code class="docutils literal"><span class="pre">False</span></code> otherwise</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.filesystem.PurgeItemList">
<em class="property">class </em><code class="descclassname">CedarBackup3.filesystem.</code><code class="descname">PurgeItemList</code><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#PurgeItemList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.PurgeItemList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList" title="CedarBackup3.filesystem.FilesystemList"><code class="xref py py-class docutils literal"><span class="pre">CedarBackup3.filesystem.FilesystemList</span></code></a></p>
<p>List of files and directories to be purged.</p>
<p>A PurgeItemList is a <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList" title="CedarBackup3.filesystem.FilesystemList"><code class="xref any py py-class docutils literal"><span class="pre">FilesystemList</span></code></a> containing a list of files and
directories to be purged.  On top of the generic functionality provided by
<a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList" title="CedarBackup3.filesystem.FilesystemList"><code class="xref any py py-class docutils literal"><span class="pre">FilesystemList</span></code></a>, this class adds functionality to remove items that are
too young to be purged, and to actually remove each item in the list from
the filesystem.</p>
<p>The other main difference is that when you add a directory&#8217;s contents to a
purge item list, the directory itself is not added to the list.  This way,
if someone asks to purge within in <code class="docutils literal"><span class="pre">/opt/backup/collect</span></code>, that directory
doesn&#8217;t get removed once all of the files within it is gone.</p>
<dl class="method">
<dt id="CedarBackup3.filesystem.PurgeItemList.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#PurgeItemList.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.PurgeItemList.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a list with no configured exclusions.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.PurgeItemList.addDirContents">
<code class="descname">addDirContents</code><span class="sig-paren">(</span><em>path</em>, <em>recursive=True</em>, <em>addSelf=True</em>, <em>linkDepth=0</em>, <em>dereference=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#PurgeItemList.addDirContents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.PurgeItemList.addDirContents" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the contents of a directory to the list.</p>
<p>The path must exist and must be a directory or a link to a directory.
The contents of the directory (but <em>not</em> the directory path itself) will
be recursively added to the list, subject to any exclusions that are in
place.  If you only want the directory and its contents to be added, then
pass in <code class="docutils literal"><span class="pre">recursive=False</span></code>.</p>
<p><em>Note:</em> If a directory&#8217;s absolute path matches an exclude pattern or path,
or if the directory contains the configured ignore file, then the
directory and all of its contents will be recursively excluded from the
list.</p>
<p><em>Note:</em> If the passed-in directory happens to be a soft link, it will be
recursed.  However, the linkDepth parameter controls whether any soft
links <em>within</em> the directory will be recursed.  The link depth is
maximum depth of the tree at which soft links should be followed.  So, a
depth of 0 does not follow any soft links, a depth of 1 follows only
links within the passed-in directory, a depth of 2 follows the links at
the next level down, etc.</p>
<p><em>Note:</em> Any invalid soft links (i.e.  soft links that point to
non-existent items) will be silently ignored.</p>
<p><em>Note:</em> The <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.excludeDirs" title="CedarBackup3.filesystem.FilesystemList.excludeDirs"><code class="xref any py py-attr docutils literal"><span class="pre">excludeDirs</span></code></a> flag only controls whether any given soft link
path itself is added to the list once it has been discovered.  It does
<em>not</em> modify any behavior related to directory recursion.</p>
<p><em>Note:</em> The <a class="reference internal" href="#CedarBackup3.filesystem.FilesystemList.excludeDirs" title="CedarBackup3.filesystem.FilesystemList.excludeDirs"><code class="xref any py py-attr docutils literal"><span class="pre">excludeDirs</span></code></a> flag only controls whether any given directory
path itself is added to the list once it has been discovered.  It does
<em>not</em> modify any behavior related to directory recursion.</p>
<p><em>Note:</em> If you call this method <em>on a link to a directory</em> that link will
never be dereferenced (it may, however, be followed).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<em>String representing a path on disk</em>) &#8211; Directory path whose contents should be added to the list</li>
<li><strong>recursive</strong> (<em>Boolean value</em>) &#8211; Indicates whether directory contents should be added recursively</li>
<li><strong>addSelf</strong> &#8211; Ignored in this subclass</li>
<li><strong>linkDepth</strong> (<em>Integer value, where zero means not to follow any soft links</em>) &#8211; Depth of soft links that should be followed</li>
<li><strong>dereference</strong> (<em>Boolean value</em>) &#8211; Indicates whether soft links, if followed, should be dereferenced</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Number of items recursively added to the list</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If path is not a directory or does not exist</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the path could not be encoded properly</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.PurgeItemList.purgeItems">
<code class="descname">purgeItems</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#PurgeItemList.purgeItems"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.PurgeItemList.purgeItems" title="Permalink to this definition">¶</a></dt>
<dd><p>Purges all items in the list.</p>
<p>Every item in the list will be purged.  Directories in the list will
<em>not</em> be purged recursively, and hence will only be removed if they are
empty.  Errors will be ignored.</p>
<p>To faciliate easy removal of directories that will end up being empty,
the delete process happens in two passes: files first (including soft
links), then directories.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Tuple containing count of (files, dirs) removed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.filesystem.PurgeItemList.removeYoungFiles">
<code class="descname">removeYoungFiles</code><span class="sig-paren">(</span><em>daysOld</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#PurgeItemList.removeYoungFiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.PurgeItemList.removeYoungFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes from the list files younger than a certain age (in days).</p>
<p>Any file whose &#8220;age&#8221; in days is less than (<code class="docutils literal"><span class="pre">&lt;</span></code>) the value of the
<code class="docutils literal"><span class="pre">daysOld</span></code> parameter will be removed from the list so that it will not be
purged later when <a class="reference internal" href="#CedarBackup3.filesystem.PurgeItemList.purgeItems" title="CedarBackup3.filesystem.PurgeItemList.purgeItems"><code class="xref any py py-meth docutils literal"><span class="pre">purgeItems</span></code></a> is called.  Directories and soft links
will be ignored.</p>
<p>The &#8220;age&#8221; of a file is the amount of time since the file was last used,
per the most recent of the file&#8217;s <code class="docutils literal"><span class="pre">st_atime</span></code> and <code class="docutils literal"><span class="pre">st_mtime</span></code> values.</p>
<p><em>Note:</em> Some people find the &#8220;sense&#8221; of this method confusing or
&#8220;backwards&#8221;.  Keep in mind that this method is used to remove items
<em>from the list</em>, not from the filesystem!  It removes from the list
those items that you would <em>not</em> want to purge because they are too
young.  As an example, passing in <code class="docutils literal"><span class="pre">daysOld</span></code> of zero (0) would remove
from the list no files, which would result in purging all of the files
later.  I would be happy to make a synonym of this method with an
easier-to-understand &#8220;sense&#8221;, if someone can suggest one.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>daysOld</strong> (<em>Integer value &gt;= 0</em>) &#8211; Minimum age of files that are to be kept in the list</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Number of entries removed</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.filesystem.SpanItem">
<em class="property">class </em><code class="descclassname">CedarBackup3.filesystem.</code><code class="descname">SpanItem</code><span class="sig-paren">(</span><em>fileList</em>, <em>size</em>, <em>capacity</em>, <em>utilization</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#SpanItem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.SpanItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Item returned by <a class="reference internal" href="#CedarBackup3.filesystem.BackupFileList.generateSpan" title="CedarBackup3.filesystem.BackupFileList.generateSpan"><code class="xref any py py-meth docutils literal"><span class="pre">BackupFileList.generateSpan</span></code></a>.</p>
<dl class="method">
<dt id="CedarBackup3.filesystem.SpanItem.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>fileList</em>, <em>size</em>, <em>capacity</em>, <em>utilization</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#SpanItem.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.SpanItem.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create object.
:param fileList: List of files
:param size: Size (in bytes) of files
:param utilization: Utilization, as a percentage (0-100)</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.filesystem.compareContents">
<code class="descclassname">CedarBackup3.filesystem.</code><code class="descname">compareContents</code><span class="sig-paren">(</span><em>path1</em>, <em>path2</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#compareContents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.compareContents" title="Permalink to this definition">¶</a></dt>
<dd><p>Compares the contents of two directories to see if they are equivalent.</p>
<p>The two directories are recursively compared.  First, we check whether they
contain exactly the same set of files.  Then, we check to see every given
file has exactly the same contents in both directories.</p>
<p>This is all relatively simple to implement through the magic of
<a class="reference internal" href="#CedarBackup3.filesystem.BackupFileList.generateDigestMap" title="CedarBackup3.filesystem.BackupFileList.generateDigestMap"><code class="xref any py py-meth docutils literal"><span class="pre">BackupFileList.generateDigestMap</span></code></a>, which knows how to strip a path prefix
off the front of each entry in the mapping it generates.  This makes our
comparison as simple as creating a list for each path, then generating a
digest map for each path and comparing the two.</p>
<p>If no exception is thrown, the two directories are considered identical.</p>
<p>If the <code class="docutils literal"><span class="pre">verbose</span></code> flag is <code class="docutils literal"><span class="pre">True</span></code>, then an alternate (but slower) method is
used so that any thrown exception can indicate exactly which file caused the
comparison to fail.  The thrown <code class="docutils literal"><span class="pre">ValueError</span></code> exception distinguishes
between the directories containing different files, and containing the same
files with differing content.</p>
<p><em>Note:</em> Symlinks are <em>not</em> followed for the purposes of this comparison.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path1</strong> (<em>String representing a path on disk</em>) &#8211; First path to compare</li>
<li><strong>path2</strong> (<em>String representing a path on disk</em>) &#8211; First path to compare</li>
<li><strong>verbose</strong> (<em>Boolean</em>) &#8211; Indicates whether a verbose response should be given</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a directory doesn&#8217;t exist or can&#8217;t be read</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the two directories are not equivalent</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is an unusual problem reading the directories</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.filesystem.compareDigestMaps">
<code class="descclassname">CedarBackup3.filesystem.</code><code class="descname">compareDigestMaps</code><span class="sig-paren">(</span><em>digest1</em>, <em>digest2</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#compareDigestMaps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.compareDigestMaps" title="Permalink to this definition">¶</a></dt>
<dd><p>Compares two digest maps and throws an exception if they differ.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>digest1</strong> (<em>Digest as returned from BackupFileList.generateDigestMap(</em>) &#8211; First digest to compare</li>
<li><strong>digest2</strong> (<em>Digest as returned from BackupFileList.generateDigestMap(</em>) &#8211; Second digest to compare</li>
<li><strong>verbose</strong> (<em>Boolean</em>) &#8211; Indicates whether a verbose response should be given</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the two directories are not equivalent</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.filesystem.normalizeDir">
<code class="descclassname">CedarBackup3.filesystem.</code><code class="descname">normalizeDir</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/filesystem.html#normalizeDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.filesystem.normalizeDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalizes a directory name.</p>
<p>For our purposes, a directory name is normalized by removing the trailing
path separator, if any.  This is important because we want directories to
appear within lists in a consistent way, although from the user&#8217;s
perspective passing in <code class="docutils literal"><span class="pre">/path/to/dir/</span></code> and <code class="docutils literal"><span class="pre">/path/to/dir</span></code> are equivalent.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>String representing a path on disk</em>) &#8211; Path to be normalized</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Normalized path, which should be equivalent to the original</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-CedarBackup3.image">
<span id="cedarbackup3-image-module"></span><h2>CedarBackup3.image module<a class="headerlink" href="#module-CedarBackup3.image" title="Permalink to this headline">¶</a></h2>
<p>Provides interface backwards compatibility.</p>
<p>In Cedar Backup 2.10.0, a refactoring effort took place while adding code to
support DVD hardware.  All of the writer functionality was moved to the
writers/ package.  This mostly-empty file remains to preserve the Cedar Backup
library interface.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-CedarBackup3.knapsack">
<span id="cedarbackup3-knapsack-module"></span><h2>CedarBackup3.knapsack module<a class="headerlink" href="#module-CedarBackup3.knapsack" title="Permalink to this headline">¶</a></h2>
<p>Provides the implementation for various knapsack algorithms.</p>
<p>Knapsack algorithms are &#8220;fit&#8221; algorithms, used to take a set of &#8220;things&#8221; and
decide on the optimal way to fit them into some container.  The focus of this
code is to fit files onto a disc, although the interface (in terms of item,
item size and capacity size, with no units) is generic enough that it can
be applied to items other than files.</p>
<p>All of the algorithms implemented below assume that &#8220;optimal&#8221; means &#8220;use up as
much of the disc&#8217;s capacity as possible&#8221;, but each produces slightly different
results.  For instance, the best fit and first fit algorithms tend to include
fewer files than the worst fit and alternate fit algorithms, even if they use
the disc space more efficiently.</p>
<p>Usually, for a given set of circumstances, it will be obvious to a human which
algorithm is the right one to use, based on trade-offs between number of files
included and ideal space utilization.  It&#8217;s a little more difficult to do this
programmatically.  For Cedar Backup&#8217;s purposes (i.e. trying to fit a small
number of collect-directory tarfiles onto a disc), worst-fit is probably the
best choice if the goal is to include as many of the collect directories as
possible.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="CedarBackup3.knapsack.alternateFit">
<code class="descclassname">CedarBackup3.knapsack.</code><code class="descname">alternateFit</code><span class="sig-paren">(</span><em>items</em>, <em>capacity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/knapsack.html#alternateFit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.knapsack.alternateFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the alternate-fit knapsack algorithm.</p>
<p>This algorithm (which I&#8217;m calling &#8220;alternate-fit&#8221; as in &#8220;alternate from one
to the other&#8221;) tries to balance small and large items to achieve better
end-of-disk performance.  Instead of just working one direction through a
list, it alternately works from the start and end of a sorted list (sorted
from smallest to largest), throwing away any item which causes capacity to
be exceeded.  The algorithm tends to be slower than the best-fit and
first-fit algorithms, and slightly faster than the worst-fit algorithm,
probably because of the number of items it considers on average before
completing.  It often achieves slightly better capacity utilization than the
worst-fit algorithm, while including slighly fewer items.</p>
<p>The &#8220;size&#8221; values in the items and capacity arguments must be comparable,
but they are unitless from the perspective of this function.  Zero-sized
items and capacity are considered degenerate cases.  If capacity is zero,
no items fit, period, even if the items list contains zero-sized items.</p>
<p>The dictionary is indexed by its key, and then includes its key.  This
seems kind of strange on first glance.  It works this way to facilitate
easy sorting of the list on key if needed.</p>
<p>The function assumes that the list of items may be used destructively, if
needed.  This avoids the overhead of having the function make a copy of the
list, if this is not required.  Callers should pass <code class="docutils literal"><span class="pre">items.copy()</span></code> if they
do not want their version of the list modified.</p>
<p>The function returns a list of chosen items and the unitless amount of
capacity used by the items.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>items</strong> (dictionary, keyed on item, of <code class="docutils literal"><span class="pre">item,</span> <span class="pre">size</span></code> tuples, item as string and size as integer) &#8211; Items to operate on</li>
<li><strong>capacity</strong> (<em>integer</em>) &#8211; Capacity of container to fit to</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Tuple <code class="docutils literal"><span class="pre">(items,</span> <span class="pre">used)</span></code> as described above</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.knapsack.bestFit">
<code class="descclassname">CedarBackup3.knapsack.</code><code class="descname">bestFit</code><span class="sig-paren">(</span><em>items</em>, <em>capacity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/knapsack.html#bestFit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.knapsack.bestFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the best-fit knapsack algorithm.</p>
<p>The best-fit algorithm proceeds through a sorted list of items (sorted from
largest to smallest) until running out of items or meeting capacity exactly.
If capacity is exceeded, the item that caused capacity to be exceeded is
thrown away and the next one is tried.  The algorithm effectively includes
the minimum number of items possible in its search for optimal capacity
utilization.  For large lists of mixed-size items, it&#8217;s not ususual to see
the algorithm achieve 100% capacity utilization by including fewer than 1%
of the items.  Probably because it often has to look at fewer of the items
before completing, it tends to be a little faster than the worst-fit or
alternate-fit algorithms.</p>
<p>The &#8220;size&#8221; values in the items and capacity arguments must be comparable,
but they are unitless from the perspective of this function.  Zero-sized
items and capacity are considered degenerate cases.  If capacity is zero,
no items fit, period, even if the items list contains zero-sized items.</p>
<p>The dictionary is indexed by its key, and then includes its key.  This
seems kind of strange on first glance.  It works this way to facilitate
easy sorting of the list on key if needed.</p>
<p>The function assumes that the list of items may be used destructively, if
needed.  This avoids the overhead of having the function make a copy of the
list, if this is not required.  Callers should pass <code class="docutils literal"><span class="pre">items.copy()</span></code> if they
do not want their version of the list modified.</p>
<p>The function returns a list of chosen items and the unitless amount of
capacity used by the items.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>items</strong> (dictionary, keyed on item, of <code class="docutils literal"><span class="pre">item,</span> <span class="pre">size</span></code> tuples, item as string and size as integer) &#8211; Items to operate on</li>
<li><strong>capacity</strong> (<em>integer</em>) &#8211; Capacity of container to fit to</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Tuple <code class="docutils literal"><span class="pre">(items,</span> <span class="pre">used)</span></code> as described above</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.knapsack.firstFit">
<code class="descclassname">CedarBackup3.knapsack.</code><code class="descname">firstFit</code><span class="sig-paren">(</span><em>items</em>, <em>capacity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/knapsack.html#firstFit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.knapsack.firstFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the first-fit knapsack algorithm.</p>
<p>The first-fit algorithm proceeds through an unsorted list of items until
running out of items or meeting capacity exactly.  If capacity is exceeded,
the item that caused capacity to be exceeded is thrown away and the next one
is tried.  This algorithm generally performs more poorly than the other
algorithms both in terms of capacity utilization and item utilization, but
can be as much as an order of magnitude faster on large lists of items
because it doesn&#8217;t require any sorting.</p>
<p>The &#8220;size&#8221; values in the items and capacity arguments must be comparable,
but they are unitless from the perspective of this function.  Zero-sized
items and capacity are considered degenerate cases.  If capacity is zero,
no items fit, period, even if the items list contains zero-sized items.</p>
<p>The dictionary is indexed by its key, and then includes its key.  This
seems kind of strange on first glance.  It works this way to facilitate
easy sorting of the list on key if needed.</p>
<p>The function assumes that the list of items may be used destructively, if
needed.  This avoids the overhead of having the function make a copy of the
list, if this is not required.  Callers should pass <code class="docutils literal"><span class="pre">items.copy()</span></code> if they
do not want their version of the list modified.</p>
<p>The function returns a list of chosen items and the unitless amount of
capacity used by the items.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>items</strong> (dictionary, keyed on item, of <code class="docutils literal"><span class="pre">item,</span> <span class="pre">size</span></code> tuples, item as string and size as integer) &#8211; Items to operate on</li>
<li><strong>capacity</strong> (<em>integer</em>) &#8211; Capacity of container to fit to</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Tuple <code class="docutils literal"><span class="pre">(items,</span> <span class="pre">used)</span></code> as described above</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.knapsack.worstFit">
<code class="descclassname">CedarBackup3.knapsack.</code><code class="descname">worstFit</code><span class="sig-paren">(</span><em>items</em>, <em>capacity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/knapsack.html#worstFit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.knapsack.worstFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the worst-fit knapsack algorithm.</p>
<p>The worst-fit algorithm proceeds through an a sorted list of items (sorted
from smallest to largest) until running out of items or meeting capacity
exactly.  If capacity is exceeded, the item that caused capacity to be
exceeded is thrown away and the next one is tried.  The algorithm
effectively includes the maximum number of items possible in its search for
optimal capacity utilization.  It tends to be somewhat slower than either
the best-fit or alternate-fit algorithm, probably because on average it has
to look at more items before completing.</p>
<p>The &#8220;size&#8221; values in the items and capacity arguments must be comparable,
but they are unitless from the perspective of this function.  Zero-sized
items and capacity are considered degenerate cases.  If capacity is zero,
no items fit, period, even if the items list contains zero-sized items.</p>
<p>The dictionary is indexed by its key, and then includes its key.  This
seems kind of strange on first glance.  It works this way to facilitate
easy sorting of the list on key if needed.</p>
<p>The function assumes that the list of items may be used destructively, if
needed.  This avoids the overhead of having the function make a copy of the
list, if this is not required.  Callers should pass <code class="docutils literal"><span class="pre">items.copy()</span></code> if they
do not want their version of the list modified.</p>
<p>The function returns a list of chosen items and the unitless amount of
capacity used by the items.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>items</strong> (dictionary, keyed on item, of <code class="docutils literal"><span class="pre">item,</span> <span class="pre">size</span></code> tuples, item as string and size as integer) &#8211; Items to operate on</li>
<li><strong>capacity</strong> (<em>integer</em>) &#8211; Capacity of container to fit to</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Tuple <code class="docutils literal"><span class="pre">(items,</span> <span class="pre">used)</span></code> as described above</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-CedarBackup3.peer">
<span id="cedarbackup3-peer-module"></span><h2>CedarBackup3.peer module<a class="headerlink" href="#module-CedarBackup3.peer" title="Permalink to this headline">¶</a></h2>
<p>Provides backup peer-related objects and utility functions.</p>
<div class="section" id="id4">
<h3>Module Attributes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="CedarBackup3.peer.DEF_COLLECT_INDICATOR">
<code class="descclassname">CedarBackup3.peer.</code><code class="descname">DEF_COLLECT_INDICATOR</code><a class="headerlink" href="#CedarBackup3.peer.DEF_COLLECT_INDICATOR" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the default collect indicator file</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.DEF_STAGE_INDICATOR">
<code class="descclassname">CedarBackup3.peer.</code><code class="descname">DEF_STAGE_INDICATOR</code><a class="headerlink" href="#CedarBackup3.peer.DEF_STAGE_INDICATOR" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the default stage indicator file</p>
</dd></dl>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.peer.LocalPeer">
<em class="property">class </em><code class="descclassname">CedarBackup3.peer.</code><code class="descname">LocalPeer</code><span class="sig-paren">(</span><em>name</em>, <em>collectDir</em>, <em>ignoreFailureMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#LocalPeer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.LocalPeer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Backup peer representing a local peer in a backup pool.</p>
<p>This is a class representing a local (non-network) peer in a backup pool.
Local peers are backed up by simple filesystem copy operations.  A local
peer has associated with it a name (typically, but not necessarily, a
hostname) and a collect directory.</p>
<p>The public methods other than the constructor are part of a &#8220;backup peer&#8221;
interface shared with the <code class="docutils literal"><span class="pre">RemotePeer</span></code> class.</p>
<dl class="method">
<dt id="CedarBackup3.peer.LocalPeer.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>name</em>, <em>collectDir</em>, <em>ignoreFailureMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#LocalPeer.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.LocalPeer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a local backup peer.</p>
<p>Note that the collect directory must be an absolute path, but does not
have to exist when the object is instantiated.  We do a lazy validation
on this value since we could (potentially) be creating peer objects
before an ongoing backup completed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> &#8211; Name of the backup peer</li>
<li><strong>collectDir</strong> &#8211; Path to the peer&#8217;s collect directory</li>
<li><strong>ignoreFailureMode</strong> &#8211; Ignore failure mode for this peer, one of <code class="docutils literal"><span class="pre">VALID_FAILURE_MODES</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the name is empty</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If collect directory is not an absolute path</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.peer.LocalPeer.checkCollectIndicator">
<code class="descname">checkCollectIndicator</code><span class="sig-paren">(</span><em>collectIndicator=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#LocalPeer.checkCollectIndicator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.LocalPeer.checkCollectIndicator" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the collect indicator in the peer&#8217;s staging directory.</p>
<p>When a peer has completed collecting its backup files, it will write an
empty indicator file into its collect directory.  This method checks to
see whether that indicator has been written.  We&#8217;re &#8220;stupid&#8221; here - if
the collect directory doesn&#8217;t exist, you&#8217;ll naturally get back <code class="docutils literal"><span class="pre">False</span></code>.</p>
<p>If you need to, you can override the name of the collect indicator file
by passing in a different name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>collectIndicator</strong> &#8211; Name of the collect indicator file to check</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Boolean true/false depending on whether the indicator exists</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a path cannot be encoded properly</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.LocalPeer.collectDir">
<code class="descname">collectDir</code><a class="headerlink" href="#CedarBackup3.peer.LocalPeer.collectDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the peer&#8217;s collect directory (an absolute local path).</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.LocalPeer.ignoreFailureMode">
<code class="descname">ignoreFailureMode</code><a class="headerlink" href="#CedarBackup3.peer.LocalPeer.ignoreFailureMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Ignore failure mode for peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.LocalPeer.name">
<code class="descname">name</code><a class="headerlink" href="#CedarBackup3.peer.LocalPeer.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the peer.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.peer.LocalPeer.stagePeer">
<code class="descname">stagePeer</code><span class="sig-paren">(</span><em>targetDir</em>, <em>ownership=None</em>, <em>permissions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#LocalPeer.stagePeer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.LocalPeer.stagePeer" title="Permalink to this definition">¶</a></dt>
<dd><p>Stages data from the peer into the indicated local target directory.</p>
<p>The collect and target directories must both already exist before this
method is called.  If passed in, ownership and permissions will be
applied to the files that are copied.</p>
<p><em>Note:</em> The caller is responsible for checking that the indicator exists,
if they care.  This function only stages the files within the directory.</p>
<p><em>Note:</em> If you have user/group as strings, call the <a class="reference internal" href="#CedarBackup3.util.getUidGid" title="CedarBackup3.util.getUidGid"><code class="xref any py py-func docutils literal"><span class="pre">util.getUidGid</span></code></a> function
to get the associated uid/gid as an ownership tuple.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>targetDir</strong> &#8211; Target directory to write data into</li>
<li><strong>ownership</strong> &#8211; Owner and group that files should have, tuple of numeric <code class="docutils literal"><span class="pre">(uid,</span> <span class="pre">gid)</span></code></li>
<li><strong>permissions</strong> &#8211; Unix permissions mode that the staged files should have, in octal like <code class="docutils literal"><span class="pre">0640</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Number of files copied from the source directory to the target directory</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If collect directory is not a directory or does not exist</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If target directory is not a directory, does not exist or is not absolute</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a path cannot be encoded properly</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there were no files to stage (i.e. the directory was empty)</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is an IO error copying a file</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">OSError</span></code> &#8211; If there is an OS error copying or changing permissions on a file</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.peer.LocalPeer.writeStageIndicator">
<code class="descname">writeStageIndicator</code><span class="sig-paren">(</span><em>stageIndicator=None</em>, <em>ownership=None</em>, <em>permissions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#LocalPeer.writeStageIndicator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.LocalPeer.writeStageIndicator" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the stage indicator in the peer&#8217;s staging directory.</p>
<p>When the master has completed collecting its backup files, it will write
an empty indicator file into the peer&#8217;s collect directory.  The presence
of this file implies that the staging process is complete.</p>
<p>If you need to, you can override the name of the stage indicator file by
passing in a different name.</p>
<p><em>Note:</em> If you have user/group as strings, call the <a class="reference internal" href="#CedarBackup3.util.getUidGid" title="CedarBackup3.util.getUidGid"><code class="xref any py py-func docutils literal"><span class="pre">util.getUidGid</span></code></a>
function to get the associated uid/gid as an ownership tuple.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stageIndicator</strong> &#8211; Name of the indicator file to write</li>
<li><strong>ownership</strong> &#8211; Owner and group that files should have, tuple of numeric <code class="docutils literal"><span class="pre">(uid,</span> <span class="pre">gid)</span></code></li>
<li><strong>permissions</strong> &#8211; Unix permissions mode that the staged files should have, in octal like <code class="docutils literal"><span class="pre">0640</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If collect directory is not a directory or does not exist</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a path cannot be encoded properly</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is an IO error creating the file</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">OSError</span></code> &#8211; If there is an OS error creating or changing permissions on the file</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.peer.RemotePeer">
<em class="property">class </em><code class="descclassname">CedarBackup3.peer.</code><code class="descname">RemotePeer</code><span class="sig-paren">(</span><em>name=None</em>, <em>collectDir=None</em>, <em>workingDir=None</em>, <em>remoteUser=None</em>, <em>rcpCommand=None</em>, <em>localUser=None</em>, <em>rshCommand=None</em>, <em>cbackCommand=None</em>, <em>ignoreFailureMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#RemotePeer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.RemotePeer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Backup peer representing a remote peer in a backup pool.</p>
<p>This is a class representing a remote (networked) peer in a backup pool.
Remote peers are backed up using an rcp-compatible copy command.  A remote
peer has associated with it a name (which must be a valid hostname), a
collect directory, a working directory and a copy method (an rcp-compatible
command).</p>
<p>You can also set an optional local user value.  This username will be used
as the local user for any remote copies that are required.  It can only be
used if the root user is executing the backup.  The root user will <code class="docutils literal"><span class="pre">su</span></code> to
the local user and execute the remote copies as that user.</p>
<p>The copy method is associated with the peer and not with the actual request
to copy, because we can envision that each remote host might have a
different connect method.</p>
<p>The public methods other than the constructor are part of a &#8220;backup peer&#8221;
interface shared with the <code class="docutils literal"><span class="pre">LocalPeer</span></code> class.</p>
<dl class="method">
<dt id="CedarBackup3.peer.RemotePeer.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>name=None</em>, <em>collectDir=None</em>, <em>workingDir=None</em>, <em>remoteUser=None</em>, <em>rcpCommand=None</em>, <em>localUser=None</em>, <em>rshCommand=None</em>, <em>cbackCommand=None</em>, <em>ignoreFailureMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#RemotePeer.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a remote backup peer.</p>
<p><em>Note:</em> If provided, each command will eventually be parsed into a list of
strings suitable for passing to <code class="docutils literal"><span class="pre">util.executeCommand</span></code> in order to avoid
security holes related to shell interpolation.   This parsing will be
done by the <a class="reference internal" href="#CedarBackup3.util.splitCommandLine" title="CedarBackup3.util.splitCommandLine"><code class="xref any py py-func docutils literal"><span class="pre">util.splitCommandLine</span></code></a> function.  See the documentation for
that function for some important notes about its limitations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> &#8211; Name of the backup peer, a valid DNS name</li>
<li><strong>collectDir</strong> &#8211; Path to the peer&#8217;s collect directory, absolute path</li>
<li><strong>workingDir</strong> &#8211; Working directory that can be used to create temporary files, etc, an absolute path</li>
<li><strong>remoteUser</strong> &#8211; Name of the Cedar Backup user on the remote peer</li>
<li><strong>localUser</strong> &#8211; Name of the Cedar Backup user on the current host</li>
<li><strong>rcpCommand</strong> &#8211; An rcp-compatible copy command to use for copying files from the peer</li>
<li><strong>rshCommand</strong> &#8211; An rsh-compatible copy command to use for remote shells to the peer</li>
<li><strong>cbackCommand</strong> &#8211; A chack-compatible command to use for executing managed actions</li>
<li><strong>ignoreFailureMode</strong> &#8211; Ignore failure mode for this peer, one of <code class="docutils literal"><span class="pre">VALID_FAILURE_MODES</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If collect directory is not an absolute path</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.RemotePeer.cbackCommand">
<code class="descname">cbackCommand</code><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.cbackCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>A chack-compatible command to use for executing managed actions.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.peer.RemotePeer.checkCollectIndicator">
<code class="descname">checkCollectIndicator</code><span class="sig-paren">(</span><em>collectIndicator=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#RemotePeer.checkCollectIndicator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.checkCollectIndicator" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the collect indicator in the peer&#8217;s staging directory.</p>
<p>When a peer has completed collecting its backup files, it will write an
empty indicator file into its collect directory.  This method checks to
see whether that indicator has been written.  If the remote copy command
fails, we return <code class="docutils literal"><span class="pre">False</span></code> as if the file weren&#8217;t there.</p>
<p>If you need to, you can override the name of the collect indicator file
by passing in a different name.</p>
<p><em>Note:</em> Apparently, we can&#8217;t count on all rcp-compatible implementations
to return sensible errors for some error conditions.  As an example, the
<code class="docutils literal"><span class="pre">scp</span></code> command in Debian &#8216;woody&#8217; returns a zero (normal) status even when
it can&#8217;t find a host or if the login or path is invalid.  Because of
this, the implementation of this method is rather convoluted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>collectIndicator</strong> &#8211; Name of the collect indicator file to check</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Boolean true/false depending on whether the indicator exists</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a path cannot be encoded properly</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.RemotePeer.collectDir">
<code class="descname">collectDir</code><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.collectDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the peer&#8217;s collect directory (an absolute local path).</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.peer.RemotePeer.executeManagedAction">
<code class="descname">executeManagedAction</code><span class="sig-paren">(</span><em>action</em>, <em>fullBackup</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#RemotePeer.executeManagedAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.executeManagedAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a managed action on this peer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>action</strong> &#8211; Name of the action to execute</li>
<li><strong>fullBackup</strong> &#8211; Whether a full backup should be executed</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is an error executing the action on the remote peer</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.peer.RemotePeer.executeRemoteCommand">
<code class="descname">executeRemoteCommand</code><span class="sig-paren">(</span><em>command</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#RemotePeer.executeRemoteCommand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.executeRemoteCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a command on the peer via remote shell.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>command</strong> &#8211; Command to execute</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is an error executing the command on the remote peer</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.RemotePeer.ignoreFailureMode">
<code class="descname">ignoreFailureMode</code><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.ignoreFailureMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Ignore failure mode for peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.RemotePeer.localUser">
<code class="descname">localUser</code><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.localUser" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the Cedar Backup user on the current host.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.RemotePeer.name">
<code class="descname">name</code><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the peer (a valid DNS hostname).</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.RemotePeer.rcpCommand">
<code class="descname">rcpCommand</code><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.rcpCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>An rcp-compatible copy command to use for copying files.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.RemotePeer.remoteUser">
<code class="descname">remoteUser</code><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.remoteUser" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the Cedar Backup user on the remote peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.RemotePeer.rshCommand">
<code class="descname">rshCommand</code><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.rshCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>An rsh-compatible command to use for remote shells to the peer.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.peer.RemotePeer.stagePeer">
<code class="descname">stagePeer</code><span class="sig-paren">(</span><em>targetDir</em>, <em>ownership=None</em>, <em>permissions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#RemotePeer.stagePeer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.stagePeer" title="Permalink to this definition">¶</a></dt>
<dd><p>Stages data from the peer into the indicated local target directory.</p>
<p>The target directory must already exist before this method is called.  If
passed in, ownership and permissions will be applied to the files that
are copied.</p>
<p><em>Note:</em> The returned count of copied files might be inaccurate if some of
the copied files already existed in the staging directory prior to the
copy taking place.  We don&#8217;t clear the staging directory first, because
some extension might also be using it.</p>
<p><em>Note:</em> If you have user/group as strings, call the <a class="reference internal" href="#CedarBackup3.util.getUidGid" title="CedarBackup3.util.getUidGid"><code class="xref any py py-func docutils literal"><span class="pre">util.getUidGid</span></code></a> function
to get the associated uid/gid as an ownership tuple.</p>
<p><em>Note:</em> Unlike the local peer version of this method, an I/O error might
or might not be raised if the directory is empty.  Since we&#8217;re using a
remote copy method, we just don&#8217;t have the fine-grained control over our
exceptions that&#8217;s available when we can look directly at the filesystem,
and we can&#8217;t control whether the remote copy method thinks an empty
directory is an error.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>targetDir</strong> &#8211; Target directory to write data into</li>
<li><strong>ownership</strong> &#8211; Owner and group that files should have, tuple of numeric <code class="docutils literal"><span class="pre">(uid,</span> <span class="pre">gid)</span></code></li>
<li><strong>permissions</strong> &#8211; Unix permissions mode that the staged files should have, in octal like <code class="docutils literal"><span class="pre">0640</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Number of files copied from the source directory to the target directory</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If target directory is not a directory, does not exist or is not absolute</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a path cannot be encoded properly</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there were no files to stage (i.e. the directory was empty)</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is an IO error copying a file</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">OSError</span></code> &#8211; If there is an OS error copying or changing permissions on a file</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.peer.RemotePeer.workingDir">
<code class="descname">workingDir</code><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.workingDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the peer&#8217;s working directory (an absolute local path).</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.peer.RemotePeer.writeStageIndicator">
<code class="descname">writeStageIndicator</code><span class="sig-paren">(</span><em>stageIndicator=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/peer.html#RemotePeer.writeStageIndicator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.peer.RemotePeer.writeStageIndicator" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the stage indicator in the peer&#8217;s staging directory.</p>
<p>When the master has completed collecting its backup files, it will write
an empty indicator file into the peer&#8217;s collect directory.  The presence
of this file implies that the staging process is complete.</p>
<p>If you need to, you can override the name of the stage indicator file by
passing in a different name.</p>
<p><em>Note:</em> If you have user/group as strings, call the <a class="reference internal" href="#CedarBackup3.util.getUidGid" title="CedarBackup3.util.getUidGid"><code class="xref any py py-func docutils literal"><span class="pre">util.getUidGid</span></code></a> function
to get the associated uid/gid as an ownership tuple.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>stageIndicator</strong> &#8211; Name of the indicator file to write</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a path cannot be encoded properly</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is an IO error creating the file</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">OSError</span></code> &#8211; If there is an OS error creating or changing permissions on the file</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-CedarBackup3.release">
<span id="cedarbackup3-release-module"></span><h2>CedarBackup3.release module<a class="headerlink" href="#module-CedarBackup3.release" title="Permalink to this headline">¶</a></h2>
<p>Provides location to maintain version information.</p>
<div class="section" id="id5">
<h3>Module Attributes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="CedarBackup3.release.AUTHOR">
<code class="descclassname">CedarBackup3.release.</code><code class="descname">AUTHOR</code><a class="headerlink" href="#CedarBackup3.release.AUTHOR" title="Permalink to this definition">¶</a></dt>
<dd><p>Author of software</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.release.EMAIL">
<code class="descclassname">CedarBackup3.release.</code><code class="descname">EMAIL</code><a class="headerlink" href="#CedarBackup3.release.EMAIL" title="Permalink to this definition">¶</a></dt>
<dd><p>Email address of author</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.release.COPYRIGHT">
<code class="descclassname">CedarBackup3.release.</code><code class="descname">COPYRIGHT</code><a class="headerlink" href="#CedarBackup3.release.COPYRIGHT" title="Permalink to this definition">¶</a></dt>
<dd><p>Copyright date</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.release.VERSION">
<code class="descclassname">CedarBackup3.release.</code><code class="descname">VERSION</code><a class="headerlink" href="#CedarBackup3.release.VERSION" title="Permalink to this definition">¶</a></dt>
<dd><p>Software version</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.release.DATE">
<code class="descclassname">CedarBackup3.release.</code><code class="descname">DATE</code><a class="headerlink" href="#CedarBackup3.release.DATE" title="Permalink to this definition">¶</a></dt>
<dd><p>Software release date</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.release.URL">
<code class="descclassname">CedarBackup3.release.</code><code class="descname">URL</code><a class="headerlink" href="#CedarBackup3.release.URL" title="Permalink to this definition">¶</a></dt>
<dd><p>URL of Cedar Backup webpage</p>
</dd></dl>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="module-CedarBackup3.testutil">
<span id="cedarbackup3-testutil-module"></span><h2>CedarBackup3.testutil module<a class="headerlink" href="#module-CedarBackup3.testutil" title="Permalink to this headline">¶</a></h2>
<p>Provides unit-testing utilities.</p>
<p>These utilities are kept here, separate from util.py, because they provide
common functionality that I do not want exported &#8220;publicly&#8221; once Cedar Backup
is installed on a system.  They are only used for unit testing, and are only
useful within the source tree.</p>
<p>Many of these functions are in here because they are &#8220;good enough&#8221; for unit
test work but are not robust enough to be real public functions.  Others (like
<a class="reference internal" href="#CedarBackup3.testutil.removedir" title="CedarBackup3.testutil.removedir"><code class="xref any py py-func docutils literal"><span class="pre">removedir</span></code></a>) do what they are supposed to, but I don&#8217;t want responsibility for
making them available to others.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="CedarBackup3.testutil.availableLocales">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">availableLocales</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#availableLocales"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.availableLocales" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of available locales on the system
:returns: List of string locale names</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.buildPath">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">buildPath</code><span class="sig-paren">(</span><em>components</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#buildPath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.buildPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a complete path from a list of components.
For instance, constructs <code class="docutils literal"><span class="pre">&quot;/a/b/c&quot;</span></code> from <code class="docutils literal"><span class="pre">[&quot;/a&quot;,</span> <span class="pre">&quot;b&quot;,</span> <span class="pre">&quot;c&quot;,]</span></code>.
:param components: List of components</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">String path constructed from components</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a path cannot be encoded properly</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.captureOutput">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">captureOutput</code><span class="sig-paren">(</span><em>c</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#captureOutput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.captureOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Captures the output (stdout, stderr) of a function or a method.</p>
<p>Some of our functions don&#8217;t do anything other than just print output.  We
need a way to test these functions (at least nominally) but we don&#8217;t want
any of the output spoiling the test suite output.</p>
<p>This function just creates a dummy file descriptor that can be used as a
target by the callable function, rather than <code class="docutils literal"><span class="pre">stdout</span></code> or <code class="docutils literal"><span class="pre">stderr</span></code>.</p>
<p><em>Note:</em> This method assumes that <code class="docutils literal"><span class="pre">callable</span></code> doesn&#8217;t take any arguments
besides keyword argument <code class="docutils literal"><span class="pre">fd</span></code> to specify the file descriptor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>c</strong> &#8211; Callable function or method</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Output of function, as one big string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.changeFileAge">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">changeFileAge</code><span class="sig-paren">(</span><em>filename</em>, <em>subtract=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#changeFileAge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.changeFileAge" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes a file age using the <code class="docutils literal"><span class="pre">os.utime</span></code> function.</p>
<p><em>Note:</em> Some platforms don&#8217;t seem to be able to set an age precisely.  As a
result, whereas we might have intended to set an age of 86400 seconds, we
actually get an age of 86399.375 seconds.  When util.calculateFileAge()
looks at that the file, it calculates an age of 0.999992766204 days, which
then gets truncated down to zero whole days.  The tests get very confused.
To work around this, I always subtract off one additional second as a fudge
factor.  That way, the file age will be <em>at least</em> as old as requested
later on.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> &#8211; File to operate on</li>
<li><strong>subtract</strong> &#8211; Number of seconds to subtract from the current time</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a path cannot be encoded properly</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.commandAvailable">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">commandAvailable</code><span class="sig-paren">(</span><em>command</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#commandAvailable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.commandAvailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether a command is available on $PATH somewhere.
This should work on both Windows and UNIX platforms.
:param command: Commang to search for</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Boolean true/false depending on whether command is available</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.extractTar">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">extractTar</code><span class="sig-paren">(</span><em>tmpdir</em>, <em>filepath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#extractTar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.extractTar" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the indicated tar file to the indicated tmpdir.
:param tmpdir: Temp directory to extract to
:param filepath: Path to tarfile to extract</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a path cannot be encoded properly</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.failUnlessAssignRaises">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">failUnlessAssignRaises</code><span class="sig-paren">(</span><em>testCase</em>, <em>exception</em>, <em>obj</em>, <em>prop</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#failUnlessAssignRaises"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.failUnlessAssignRaises" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of <code class="docutils literal"><span class="pre">failUnlessRaises</span></code>, but used for property assignments instead.</p>
<p>It&#8217;s nice to be able to use <code class="docutils literal"><span class="pre">failUnlessRaises</span></code> to check that a method call
raises the exception that you expect.  Unfortunately, this method can&#8217;t be
used to check Python propery assignments, even though these property
assignments are actually implemented underneath as methods.</p>
<p>This function (which can be easily called by unit test classes) provides an
easy way to wrap the assignment checks.  It&#8217;s not pretty, or as intuitive as
the original check it&#8217;s modeled on, but it does work.</p>
<p>Let&#8217;s assume you make this method call:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">testCase</span><span class="o">.</span><span class="n">failUnlessAssignRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">collectDir</span><span class="p">,</span> <span class="s2">&quot;absolutePath&quot;</span><span class="p">,</span> <span class="n">absolutePath</span><span class="p">)</span>
</pre></div>
</div>
<p>If you do this, a test case failure will be raised unless the assignment:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">collectDir</span><span class="o">.</span><span class="n">absolutePath</span> <span class="o">=</span> <span class="n">absolutePath</span>
</pre></div>
</div>
<p>fails with a <code class="docutils literal"><span class="pre">ValueError</span></code> exception.  The failure message differentiates
between the case where no exception was raised and the case where the wrong
exception was raised.</p>
<p><em>Note:</em> Internally, the <code class="docutils literal"><span class="pre">missed</span></code> and <code class="docutils literal"><span class="pre">instead</span></code> variables are used rather
than directly calling <code class="docutils literal"><span class="pre">testCase.fail</span></code> upon noticing a problem because the
act of &#8220;failure&#8221; itself generates an exception that would be caught by the
general <code class="docutils literal"><span class="pre">except</span></code> clause.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>testCase</strong> &#8211; PyUnit test case object (i.e. self)</li>
<li><strong>exception</strong> &#8211; Exception that is expected to be raised</li>
<li><strong>obj</strong> &#8211; Object whose property is to be assigned to</li>
<li><strong>prop</strong> &#8211; Name of the property, as a string</li>
<li><strong>value</strong> &#8211; Value that is to be assigned to the property</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>&#64;see: <code class="docutils literal"><span class="pre">unittest.TestCase.failUnlessRaises</span></code></p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.findResources">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">findResources</code><span class="sig-paren">(</span><em>resources</em>, <em>dataDirs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#findResources"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.findResources" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of locations for various resources.
:param resources: List of required resources
:param dataDirs: List of data directories to search within for resources</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dictionary mapping resource name to resource path</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">Exception</span></code> &#8211; If some resource cannot be found</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.getLogin">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">getLogin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#getLogin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.getLogin" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the currently-logged in user.  This might fail under
some circumstances - but if it does, our tests would fail anyway.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.getMaskAsMode">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">getMaskAsMode</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#getMaskAsMode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.getMaskAsMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the user&#8217;s current umask inverted to a mode.
A mode is mostly a bitwise inversion of a mask, i.e. mask 002 is mode 775.
:returns: Umask converted to a mode, as an integer</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.platformDebian">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">platformDebian</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#platformDebian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.platformDebian" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns boolean indicating whether this is the Debian platform.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.platformMacOsX">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">platformMacOsX</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#platformMacOsX"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.platformMacOsX" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns boolean indicating whether this is the Mac OS X platform.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.randomFilename">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">randomFilename</code><span class="sig-paren">(</span><em>length</em>, <em>prefix=None</em>, <em>suffix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#randomFilename"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.randomFilename" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a random filename with the given length.
:param length: Length of filename</p>
<p>&#64;return Random filename</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.removedir">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">removedir</code><span class="sig-paren">(</span><em>tree</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#removedir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.removedir" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively removes an entire directory.
This is basically taken from an example on python.com.
:param tree: Directory tree to remove</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a path cannot be encoded properly</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.runningAsRoot">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">runningAsRoot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#runningAsRoot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.runningAsRoot" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns boolean indicating whether the effective user id is root.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.setupDebugLogger">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">setupDebugLogger</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#setupDebugLogger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.setupDebugLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up a screen logger for debugging purposes.</p>
<p>Normally, the CLI functionality configures the logger so that
things get written to the right place.  However, for debugging
it&#8217;s sometimes nice to just get everything &#8211; debug information
and output &#8211; dumped to the screen.  This function takes care
of that.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.testutil.setupOverrides">
<code class="descclassname">CedarBackup3.testutil.</code><code class="descname">setupOverrides</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/testutil.html#setupOverrides"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.testutil.setupOverrides" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up any platform-specific overrides that might be required.</p>
<p>When packages are built, this is done manually (hardcoded) in customize.py
and the overrides are set up in cli.cli().  This way, no runtime checks need
to be done.  This is safe, because the package maintainer knows exactly
which platform (Debian or not) the package is being built for.</p>
<p>Unit tests are different, because they might be run anywhere.  So, we
attempt to make a guess about plaform using platformDebian(), and use that
to set up the custom overrides so that platform-specific unit tests continue
to work.</p>
</dd></dl>

</div>
<div class="section" id="module-CedarBackup3.util">
<span id="cedarbackup3-util-module"></span><h2>CedarBackup3.util module<a class="headerlink" href="#module-CedarBackup3.util" title="Permalink to this headline">¶</a></h2>
<p>Provides general-purpose utilities.</p>
<div class="section" id="id6">
<h3>Module Attributes<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="CedarBackup3.util.ISO_SECTOR_SIZE">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">ISO_SECTOR_SIZE</code><a class="headerlink" href="#CedarBackup3.util.ISO_SECTOR_SIZE" title="Permalink to this definition">¶</a></dt>
<dd><p>Size of an ISO image sector, in bytes</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.BYTES_PER_SECTOR">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">BYTES_PER_SECTOR</code><a class="headerlink" href="#CedarBackup3.util.BYTES_PER_SECTOR" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes (B) per ISO sector</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.BYTES_PER_KBYTE">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">BYTES_PER_KBYTE</code><a class="headerlink" href="#CedarBackup3.util.BYTES_PER_KBYTE" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes (B) per kilobyte (kB)</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.BYTES_PER_MBYTE">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">BYTES_PER_MBYTE</code><a class="headerlink" href="#CedarBackup3.util.BYTES_PER_MBYTE" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes (B) per megabyte (MB)</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.BYTES_PER_GBYTE">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">BYTES_PER_GBYTE</code><a class="headerlink" href="#CedarBackup3.util.BYTES_PER_GBYTE" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes (B) per megabyte (GB)</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.KBYTES_PER_MBYTE">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">KBYTES_PER_MBYTE</code><a class="headerlink" href="#CedarBackup3.util.KBYTES_PER_MBYTE" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of kilobytes (kB) per megabyte (MB)</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.MBYTES_PER_GBYTE">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">MBYTES_PER_GBYTE</code><a class="headerlink" href="#CedarBackup3.util.MBYTES_PER_GBYTE" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of megabytes (MB) per gigabyte (GB)</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.SECONDS_PER_MINUTE">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">SECONDS_PER_MINUTE</code><a class="headerlink" href="#CedarBackup3.util.SECONDS_PER_MINUTE" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of seconds per minute</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.MINUTES_PER_HOUR">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">MINUTES_PER_HOUR</code><a class="headerlink" href="#CedarBackup3.util.MINUTES_PER_HOUR" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of minutes per hour</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.HOURS_PER_DAY">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">HOURS_PER_DAY</code><a class="headerlink" href="#CedarBackup3.util.HOURS_PER_DAY" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of hours per day</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.SECONDS_PER_DAY">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">SECONDS_PER_DAY</code><a class="headerlink" href="#CedarBackup3.util.SECONDS_PER_DAY" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of seconds per day</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.UNIT_BYTES">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">UNIT_BYTES</code><a class="headerlink" href="#CedarBackup3.util.UNIT_BYTES" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant representing the byte (B) unit for conversion</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.UNIT_KBYTES">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">UNIT_KBYTES</code><a class="headerlink" href="#CedarBackup3.util.UNIT_KBYTES" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant representing the kilobyte (kB) unit for conversion</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.UNIT_MBYTES">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">UNIT_MBYTES</code><a class="headerlink" href="#CedarBackup3.util.UNIT_MBYTES" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant representing the megabyte (MB) unit for conversion</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.UNIT_GBYTES">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">UNIT_GBYTES</code><a class="headerlink" href="#CedarBackup3.util.UNIT_GBYTES" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant representing the gigabyte (GB) unit for conversion</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.UNIT_SECTORS">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">UNIT_SECTORS</code><a class="headerlink" href="#CedarBackup3.util.UNIT_SECTORS" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant representing the ISO sector unit for conversion</p>
</dd></dl>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.util.AbsolutePathList">
<em class="property">class </em><code class="descclassname">CedarBackup3.util.</code><code class="descname">AbsolutePathList</code><a class="reference internal" href="_modules/CedarBackup3/util.html#AbsolutePathList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.AbsolutePathList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CedarBackup3.util.UnorderedList" title="CedarBackup3.util.UnorderedList"><code class="xref py py-class docutils literal"><span class="pre">CedarBackup3.util.UnorderedList</span></code></a></p>
<p>Class representing a list of absolute paths.</p>
<p>This is an unordered list.</p>
<p>We override the <code class="docutils literal"><span class="pre">append</span></code>, <code class="docutils literal"><span class="pre">insert</span></code> and <code class="docutils literal"><span class="pre">extend</span></code> methods to ensure that
any item added to the list is an absolute path.</p>
<p>Each item added to the list is encoded using <a class="reference internal" href="#CedarBackup3.util.encodePath" title="CedarBackup3.util.encodePath"><code class="xref any py py-func docutils literal"><span class="pre">encodePath</span></code></a>.  If we don&#8217;t do
this, we have problems trying certain operations between strings and unicode
objects, particularly for &#8220;odd&#8221; filenames that can&#8217;t be encoded in standard
ASCII.</p>
<dl class="method">
<dt id="CedarBackup3.util.AbsolutePathList.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#AbsolutePathList.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.AbsolutePathList.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">append</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item is not an absolute path</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.AbsolutePathList.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#AbsolutePathList.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.AbsolutePathList.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">insert</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If any item is not an absolute path</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.AbsolutePathList.insert">
<code class="descname">insert</code><span class="sig-paren">(</span><em>index</em>, <em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#AbsolutePathList.insert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.AbsolutePathList.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">insert</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item is not an absolute path</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.util.Diagnostics">
<em class="property">class </em><code class="descclassname">CedarBackup3.util.</code><code class="descname">Diagnostics</code><a class="reference internal" href="_modules/CedarBackup3/util.html#Diagnostics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.Diagnostics" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class holding runtime diagnostic information.</p>
<p>Diagnostic information is information that is useful to get from users for
debugging purposes.  I&#8217;m consolidating it all here into one object.</p>
<dl class="method">
<dt id="CedarBackup3.util.Diagnostics.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#Diagnostics.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.Diagnostics.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">Diagnostics</span></code> class.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.Diagnostics.encoding">
<code class="descname">encoding</code><a class="headerlink" href="#CedarBackup3.util.Diagnostics.encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Filesystem encoding that is in effect.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.Diagnostics.getValues">
<code class="descname">getValues</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#Diagnostics.getValues"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.Diagnostics.getValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a map containing all of the diagnostic values.
:returns: Map from diagnostic name to diagnostic value</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.Diagnostics.interpreter">
<code class="descname">interpreter</code><a class="headerlink" href="#CedarBackup3.util.Diagnostics.interpreter" title="Permalink to this definition">¶</a></dt>
<dd><p>Python interpreter version.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.Diagnostics.locale">
<code class="descname">locale</code><a class="headerlink" href="#CedarBackup3.util.Diagnostics.locale" title="Permalink to this definition">¶</a></dt>
<dd><p>Locale that is in effect.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.Diagnostics.logDiagnostics">
<code class="descname">logDiagnostics</code><span class="sig-paren">(</span><em>method</em>, <em>prefix=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#Diagnostics.logDiagnostics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.Diagnostics.logDiagnostics" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty-print diagnostic information using a logger method.
:param method: Logger method to use for logging (i.e. logger.info)
:param prefix: Prefix string (if any) to place onto printed lines</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.Diagnostics.platform">
<code class="descname">platform</code><a class="headerlink" href="#CedarBackup3.util.Diagnostics.platform" title="Permalink to this definition">¶</a></dt>
<dd><p>Platform identifying information.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.Diagnostics.printDiagnostics">
<code class="descname">printDiagnostics</code><span class="sig-paren">(</span><em>fd=&lt;_io.TextIOWrapper name='&lt;stdout&gt;' mode='w' encoding='UTF-8'&gt;</em>, <em>prefix=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#Diagnostics.printDiagnostics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.Diagnostics.printDiagnostics" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty-print diagnostic information to a file descriptor.
:param fd: File descriptor used to print information
:param prefix: Prefix string (if any) to place onto printed lines</p>
<p><em>Note:</em> The <code class="docutils literal"><span class="pre">fd</span></code> is used rather than <code class="docutils literal"><span class="pre">print</span></code> to facilitate unit testing.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.Diagnostics.timestamp">
<code class="descname">timestamp</code><a class="headerlink" href="#CedarBackup3.util.Diagnostics.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Current timestamp.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.Diagnostics.version">
<code class="descname">version</code><a class="headerlink" href="#CedarBackup3.util.Diagnostics.version" title="Permalink to this definition">¶</a></dt>
<dd><p>Cedar Backup version.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.util.DirectedGraph">
<em class="property">class </em><code class="descclassname">CedarBackup3.util.</code><code class="descname">DirectedGraph</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#DirectedGraph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.DirectedGraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Represents a directed graph.</p>
<p>A graph <strong>G=(V,E)</strong> consists of a set of vertices <strong>V</strong> together with a set
<strong>E</strong> of vertex pairs or edges.  In a directed graph, each edge also has an
associated direction (from vertext <strong>v1</strong> to vertex <strong>v2</strong>).  A <code class="docutils literal"><span class="pre">DirectedGraph</span></code>
object provides a way to construct a directed graph and execute a depth-
first search.</p>
<p>This data structure was designed based on the graphing chapter in
U{The Algorithm Design Manual&lt;<a class="reference external" href="http://www2.toki.or.id/book/AlgDesignManual/">http://www2.toki.or.id/book/AlgDesignManual/</a>&gt;},
by Steven S. Skiena.</p>
<p>This class is intended to be used by Cedar Backup for dependency ordering.
Because of this, it&#8217;s not quite general-purpose.  Unlike a &#8220;general&#8221; graph,
every vertex in this graph has at least one edge pointing to it, from a
special &#8220;start&#8221; vertex.  This is so no vertices get &#8220;lost&#8221; either because
they have no dependencies or because nothing depends on them.</p>
<dl class="method">
<dt id="CedarBackup3.util.DirectedGraph.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#DirectedGraph.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.DirectedGraph.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Directed graph constructor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>String value</em>) &#8211; Name of this graph</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.DirectedGraph.createEdge">
<code class="descname">createEdge</code><span class="sig-paren">(</span><em>start</em>, <em>finish</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#DirectedGraph.createEdge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.DirectedGraph.createEdge" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an edge with an associated direction, from <code class="docutils literal"><span class="pre">start</span></code> vertex to <code class="docutils literal"><span class="pre">finish</span></code> vertex.
:param start: Name of start vertex
:param finish: Name of finish vertex</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the named vertices is unknown</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.DirectedGraph.createVertex">
<code class="descname">createVertex</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#DirectedGraph.createVertex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.DirectedGraph.createVertex" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a named vertex.
:param name: vertex name</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the vertex name is <code class="docutils literal"><span class="pre">None</span></code> or empty</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.DirectedGraph.name">
<code class="descname">name</code><a class="headerlink" href="#CedarBackup3.util.DirectedGraph.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the graph.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.DirectedGraph.topologicalSort">
<code class="descname">topologicalSort</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#DirectedGraph.topologicalSort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.DirectedGraph.topologicalSort" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements a topological sort of the graph.</p>
<p>This method also enforces that the graph is a directed acyclic graph,
which is a requirement of a topological sort.</p>
<p>A directed acyclic graph (or &#8220;DAG&#8221;) is a directed graph with no directed
cycles.  A topological sort of a DAG is an ordering on the vertices such
that all edges go from left to right.  Only an acyclic graph can have a
topological sort, but any DAG has at least one topological sort.</p>
<p>Since a topological sort only makes sense for an acyclic graph, this
method throws an exception if a cycle is found.</p>
<p>A depth-first search only makes sense if the graph is acyclic.  If the
graph contains any cycles, it is not possible to determine a consistent
ordering for the vertices.</p>
<p><em>Note:</em> If a particular vertex has no edges, then its position in the
final list depends on the order in which the vertices were created in the
graph.  If you&#8217;re using this method to determine a dependency order, this
makes sense: a vertex with no dependencies can go anywhere (and will).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Ordering on the vertices so that all edges go from left to right</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If a cycle is found in the graph</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.util.ObjectTypeList">
<em class="property">class </em><code class="descclassname">CedarBackup3.util.</code><code class="descname">ObjectTypeList</code><span class="sig-paren">(</span><em>objectType</em>, <em>objectName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#ObjectTypeList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.ObjectTypeList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CedarBackup3.util.UnorderedList" title="CedarBackup3.util.UnorderedList"><code class="xref py py-class docutils literal"><span class="pre">CedarBackup3.util.UnorderedList</span></code></a></p>
<p>Class representing a list containing only objects with a certain type.</p>
<p>This is an unordered list.</p>
<p>We override the <code class="docutils literal"><span class="pre">append</span></code>, <code class="docutils literal"><span class="pre">insert</span></code> and <code class="docutils literal"><span class="pre">extend</span></code> methods to ensure that
any item added to the list matches the type that is requested.  The
comparison uses the built-in <code class="docutils literal"><span class="pre">isinstance</span></code>, which should allow subclasses of
of the requested type to be added to the list as well.</p>
<p>The <code class="docutils literal"><span class="pre">objectName</span></code> value will be used in exceptions, i.e. C{&#8220;Item must be a
CollectDir object.&#8221;} if <code class="docutils literal"><span class="pre">objectName</span></code> is <code class="docutils literal"><span class="pre">&quot;CollectDir&quot;</span></code>.</p>
<dl class="method">
<dt id="CedarBackup3.util.ObjectTypeList.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>objectType</em>, <em>objectName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#ObjectTypeList.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.ObjectTypeList.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a typed list for a particular type.
:param objectType: Type that the list elements must match
:param objectName: Short string containing the &#8220;name&#8221; of the type</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.ObjectTypeList.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#ObjectTypeList.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.ObjectTypeList.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">append</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item does not match requested type</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.ObjectTypeList.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#ObjectTypeList.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.ObjectTypeList.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">insert</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item does not match requested type</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.ObjectTypeList.insert">
<code class="descname">insert</code><span class="sig-paren">(</span><em>index</em>, <em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#ObjectTypeList.insert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.ObjectTypeList.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">insert</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item does not match requested type</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.util.PathResolverSingleton">
<em class="property">class </em><code class="descclassname">CedarBackup3.util.</code><code class="descname">PathResolverSingleton</code><a class="reference internal" href="_modules/CedarBackup3/util.html#PathResolverSingleton"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.PathResolverSingleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Singleton used for resolving executable paths.</p>
<p>Various functions throughout Cedar Backup (including extensions) need a way
to resolve the path of executables that they use.  For instance, the image
functionality needs to find the <code class="docutils literal"><span class="pre">mkisofs</span></code> executable, and the Subversion
extension needs to find the <code class="docutils literal"><span class="pre">svnlook</span></code> executable.  Cedar Backup&#8217;s original
behavior was to assume that the simple name (<code class="docutils literal"><span class="pre">&quot;svnlook&quot;</span></code> or whatever) was
available on the caller&#8217;s <code class="docutils literal"><span class="pre">$PATH</span></code>, and to fail otherwise.   However, this
turns out to be less than ideal, since for instance the root user might not
always have executables like <code class="docutils literal"><span class="pre">svnlook</span></code> in its path.</p>
<p>One solution is to specify a path (either via an absolute path or some sort
of path insertion or path appending mechanism) that would apply to the
<code class="docutils literal"><span class="pre">executeCommand()</span></code> function.  This is not difficult to implement, but it
seem like kind of a &#8220;big hammer&#8221; solution.  Besides that, it might also
represent a security flaw (for instance, I prefer not to mess with root&#8217;s
<code class="docutils literal"><span class="pre">$PATH</span></code> on the application level if I don&#8217;t have to).</p>
<p>The alternative is to set up some sort of configuration for the path to
certain executables, i.e. &#8220;find <code class="docutils literal"><span class="pre">svnlook</span></code> in <code class="docutils literal"><span class="pre">/usr/local/bin/svnlook</span></code>&#8221; or
whatever.  This PathResolverSingleton aims to provide a good solution to the
mapping problem.  Callers of all sorts (extensions or not) can get an
instance of the singleton.  Then, they call the <code class="docutils literal"><span class="pre">lookup</span></code> method to try and
resolve the executable they are looking for.  Through the <code class="docutils literal"><span class="pre">lookup</span></code> method,
the caller can also specify a default to use if a mapping is not found.
This way, with no real effort on the part of the caller, behavior can neatly
degrade to something equivalent to the current behavior if there is no
special mapping or if the singleton was never initialized in the first
place.</p>
<p>Even better, extensions automagically get access to the same resolver
functionality, and they don&#8217;t even need to understand how the mapping
happens.  All extension authors need to do is document what executables
their code requires, and the standard resolver configuration section will
meet their needs.</p>
<p>The class should be initialized once through the constructor somewhere in
the main routine.  Then, the main routine should call the <a class="reference internal" href="#CedarBackup3.util.PathResolverSingleton.fill" title="CedarBackup3.util.PathResolverSingleton.fill"><code class="xref any py py-meth docutils literal"><span class="pre">fill</span></code></a> method to
fill in the resolver&#8217;s internal structures.  Everyone else who needs to
resolve a path will get an instance of the class using <a class="reference internal" href="#CedarBackup3.util.PathResolverSingleton.getInstance" title="CedarBackup3.util.PathResolverSingleton.getInstance"><code class="xref any py py-attr docutils literal"><span class="pre">getInstance</span></code></a> and
will then just call the <a class="reference internal" href="#CedarBackup3.util.PathResolverSingleton.lookup" title="CedarBackup3.util.PathResolverSingleton.lookup"><code class="xref any py py-meth docutils literal"><span class="pre">lookup</span></code></a> method.</p>
<dl class="attribute">
<dt id="CedarBackup3.util.PathResolverSingleton._instance">
<code class="descname">_instance</code><a class="headerlink" href="#CedarBackup3.util.PathResolverSingleton._instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds a reference to the singleton</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.PathResolverSingleton._mapping">
<code class="descname">_mapping</code><a class="headerlink" href="#CedarBackup3.util.PathResolverSingleton._mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal mapping from resource name to path</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.PathResolverSingleton.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#PathResolverSingleton.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.PathResolverSingleton.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Singleton constructor, which just creates the singleton instance.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.PathResolverSingleton.fill">
<code class="descname">fill</code><span class="sig-paren">(</span><em>mapping</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#PathResolverSingleton.fill"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.PathResolverSingleton.fill" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills in the singleton&#8217;s internal mapping from name to resource.
:param mapping: Mapping from resource name to path
:type mapping: Dictionary mapping name to path, both as strings</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.util.PathResolverSingleton.getInstance">
<code class="descname">getInstance</code><em class="property"> = &lt;CedarBackup3.util.PathResolverSingleton._Helper object&gt;</em><a class="headerlink" href="#CedarBackup3.util.PathResolverSingleton.getInstance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.PathResolverSingleton.lookup">
<code class="descname">lookup</code><span class="sig-paren">(</span><em>name</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#PathResolverSingleton.lookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.PathResolverSingleton.lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks up name and returns the resolved path associated with the name.
:param name: Name of the path resource to resolve
:param default: Default to return if resource cannot be resolved</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Resolved path associated with name, or default if name can&#8217;t be resolved</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.util.Pipe">
<em class="property">class </em><code class="descclassname">CedarBackup3.util.</code><code class="descname">Pipe</code><span class="sig-paren">(</span><em>cmd</em>, <em>bufsize=-1</em>, <em>ignoreStderr=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#Pipe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.Pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">subprocess.Popen</span></code></p>
<p>Specialized pipe class for use by <code class="docutils literal"><span class="pre">executeCommand</span></code>.</p>
<p>The <a class="reference internal" href="#CedarBackup3.util.executeCommand" title="CedarBackup3.util.executeCommand"><code class="xref any py py-func docutils literal"><span class="pre">executeCommand</span></code></a> function needs a specialized way of interacting
with a pipe.  First, <code class="docutils literal"><span class="pre">executeCommand</span></code> only reads from the pipe, and
never writes to it.  Second, <code class="docutils literal"><span class="pre">executeCommand</span></code> needs a way to discard all
output written to <code class="docutils literal"><span class="pre">stderr</span></code>, as a means of simulating the shell
<code class="docutils literal"><span class="pre">2&gt;/dev/null</span></code> construct.</p>
<dl class="method">
<dt id="CedarBackup3.util.Pipe.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>cmd</em>, <em>bufsize=-1</em>, <em>ignoreStderr=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#Pipe.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.Pipe.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.util.RegexList">
<em class="property">class </em><code class="descclassname">CedarBackup3.util.</code><code class="descname">RegexList</code><a class="reference internal" href="_modules/CedarBackup3/util.html#RegexList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RegexList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CedarBackup3.util.UnorderedList" title="CedarBackup3.util.UnorderedList"><code class="xref py py-class docutils literal"><span class="pre">CedarBackup3.util.UnorderedList</span></code></a></p>
<p>Class representing a list of valid regular expression strings.</p>
<p>This is an unordered list.</p>
<p>We override the <code class="docutils literal"><span class="pre">append</span></code>, <code class="docutils literal"><span class="pre">insert</span></code> and <code class="docutils literal"><span class="pre">extend</span></code> methods to ensure that
any item added to the list is a valid regular expression.</p>
<dl class="method">
<dt id="CedarBackup3.util.RegexList.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RegexList.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RegexList.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">append</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item is not an absolute path</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.RegexList.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RegexList.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RegexList.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">insert</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If any item is not an absolute path</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.RegexList.insert">
<code class="descname">insert</code><span class="sig-paren">(</span><em>index</em>, <em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RegexList.insert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RegexList.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">insert</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item is not an absolute path</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.util.RegexMatchList">
<em class="property">class </em><code class="descclassname">CedarBackup3.util.</code><code class="descname">RegexMatchList</code><span class="sig-paren">(</span><em>valuesRegex</em>, <em>emptyAllowed=True</em>, <em>prefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RegexMatchList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RegexMatchList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CedarBackup3.util.UnorderedList" title="CedarBackup3.util.UnorderedList"><code class="xref py py-class docutils literal"><span class="pre">CedarBackup3.util.UnorderedList</span></code></a></p>
<p>Class representing a list containing only strings that match a regular expression.</p>
<p>If <code class="docutils literal"><span class="pre">emptyAllowed</span></code> is passed in as <code class="docutils literal"><span class="pre">False</span></code>, then empty strings are
explicitly disallowed, even if they happen to match the regular expression.
(<code class="docutils literal"><span class="pre">None</span></code> values are always disallowed, since string operations are not
permitted on <code class="docutils literal"><span class="pre">None</span></code>.)</p>
<p>This is an unordered list.</p>
<p>We override the <code class="docutils literal"><span class="pre">append</span></code>, <code class="docutils literal"><span class="pre">insert</span></code> and <code class="docutils literal"><span class="pre">extend</span></code> methods to ensure that
any item added to the list matches the indicated regular expression.</p>
<p><em>Note:</em> If you try to put values that are not strings into the list, you will
likely get either TypeError or AttributeError exceptions as a result.</p>
<dl class="method">
<dt id="CedarBackup3.util.RegexMatchList.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>valuesRegex</em>, <em>emptyAllowed=True</em>, <em>prefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RegexMatchList.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RegexMatchList.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a list restricted to containing certain values.
:param valuesRegex: Regular expression that must be matched, as a string
:param emptyAllowed: Indicates whether empty or None values are allowed
:param prefix: Prefix to use in error messages (None results in prefix &#8220;Item&#8221;)</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.RegexMatchList.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RegexMatchList.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RegexMatchList.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">append</span></code> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item is None</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item is empty and empty values are not allowed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item does not match the configured regular expression</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.RegexMatchList.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RegexMatchList.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RegexMatchList.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">insert</span></code> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If any item is None</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If any item is empty and empty values are not allowed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If any item does not match the configured regular expression</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.RegexMatchList.insert">
<code class="descname">insert</code><span class="sig-paren">(</span><em>index</em>, <em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RegexMatchList.insert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RegexMatchList.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">insert</span></code> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item is None</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item is empty and empty values are not allowed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item does not match the configured regular expression</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.util.RestrictedContentList">
<em class="property">class </em><code class="descclassname">CedarBackup3.util.</code><code class="descname">RestrictedContentList</code><span class="sig-paren">(</span><em>valuesList</em>, <em>valuesDescr</em>, <em>prefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RestrictedContentList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RestrictedContentList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CedarBackup3.util.UnorderedList" title="CedarBackup3.util.UnorderedList"><code class="xref py py-class docutils literal"><span class="pre">CedarBackup3.util.UnorderedList</span></code></a></p>
<p>Class representing a list containing only object with certain values.</p>
<p>This is an unordered list.</p>
<p>We override the <code class="docutils literal"><span class="pre">append</span></code>, <code class="docutils literal"><span class="pre">insert</span></code> and <code class="docutils literal"><span class="pre">extend</span></code> methods to ensure that
any item added to the list is among the valid values.  We use a standard
comparison, so pretty much anything can be in the list of valid values.</p>
<p>The <code class="docutils literal"><span class="pre">valuesDescr</span></code> value will be used in exceptions, i.e. C{&#8220;Item must be
one of values in VALID_ACTIONS&#8221;} if <code class="docutils literal"><span class="pre">valuesDescr</span></code> is <code class="docutils literal"><span class="pre">&quot;VALID_ACTIONS&quot;</span></code>.</p>
<p><em>Note:</em>  This class doesn&#8217;t make any attempt to trap for nonsensical
arguments.  All of the values in the values list should be of the same type
(i.e. strings).  Then, all list operations also need to be of that type
(i.e. you should always insert or append just strings).  If you mix types &#8211;
for instance lists and strings &#8211; you will likely see AttributeError
exceptions or other problems.</p>
<dl class="method">
<dt id="CedarBackup3.util.RestrictedContentList.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>valuesList</em>, <em>valuesDescr</em>, <em>prefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RestrictedContentList.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RestrictedContentList.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a list restricted to containing certain values.
:param valuesList: List of valid values
:param valuesDescr: Short string describing list of values
:param prefix: Prefix to use in error messages (None results in prefix &#8220;Item&#8221;)</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.RestrictedContentList.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RestrictedContentList.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RestrictedContentList.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">append</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item is not in the values list</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.RestrictedContentList.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RestrictedContentList.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RestrictedContentList.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">insert</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item is not in the values list</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.util.RestrictedContentList.insert">
<code class="descname">insert</code><span class="sig-paren">(</span><em>index</em>, <em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#RestrictedContentList.insert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.RestrictedContentList.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the standard <code class="docutils literal"><span class="pre">insert</span></code> method.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If item is not in the values list</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.util.UnorderedList">
<em class="property">class </em><code class="descclassname">CedarBackup3.util.</code><code class="descname">UnorderedList</code><a class="reference internal" href="_modules/CedarBackup3/util.html#UnorderedList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.UnorderedList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">list</span></code></p>
<p>Class representing an &#8220;unordered list&#8221;.</p>
<p>An &#8220;unordered list&#8221; is a list in which only the contents matter, not the
order in which the contents appear in the list.</p>
<p>For instance, we might be keeping track of set of paths in a list, because
it&#8217;s convenient to have them in that form.  However, for comparison
purposes, we would only care that the lists contain exactly the same
contents, regardless of order.</p>
<p>I have come up with two reasonable ways of doing this, plus a couple more
that would work but would be a pain to implement.  My first method is to
copy and sort each list, comparing the sorted versions.  This will only work
if two lists with exactly the same members are guaranteed to sort in exactly
the same order.  The second way would be to create two Sets and then compare
the sets.  However, this would lose information about any duplicates in
either list.  I&#8217;ve decided to go with option #1 for now.  I&#8217;ll modify this
code if I run into problems in the future.</p>
<p>We override the original <code class="docutils literal"><span class="pre">__eq__</span></code>, <code class="docutils literal"><span class="pre">__ne__</span></code>, <code class="docutils literal"><span class="pre">__ge__</span></code>, <code class="docutils literal"><span class="pre">__gt__</span></code>,
<code class="docutils literal"><span class="pre">__le__</span></code> and <code class="docutils literal"><span class="pre">__lt__</span></code> list methods to change the definition of the various
comparison operators.  In all cases, the comparison is changed to return the
result of the original operation <em>but instead comparing sorted lists</em>.
This is going to be quite a bit slower than a normal list, so you probably
only want to use it on small lists.</p>
<dl class="staticmethod">
<dt id="CedarBackup3.util.UnorderedList.mixedkey">
<em class="property">static </em><code class="descname">mixedkey</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#UnorderedList.mixedkey"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.UnorderedList.mixedkey" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a key for use by mixedsort()</p>
</dd></dl>

<dl class="staticmethod">
<dt id="CedarBackup3.util.UnorderedList.mixedsort">
<em class="property">static </em><code class="descname">mixedsort</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#UnorderedList.mixedsort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.UnorderedList.mixedsort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort a list, making sure we don&#8217;t blow up if the list happens to include mixed values.
&#64;see: <a class="reference external" href="http://stackoverflow.com/questions/26575183/how-can-i-get-2-x-like-sorting-behaviour-in-python-3-x">http://stackoverflow.com/questions/26575183/how-can-i-get-2-x-like-sorting-behaviour-in-python-3-x</a></p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.buildNormalizedPath">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">buildNormalizedPath</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#buildNormalizedPath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.buildNormalizedPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a &#8220;normalized&#8221; path based on a path name.</p>
<p>A normalized path is a representation of a path that is also a valid file
name.  To make a valid file name out of a complete path, we have to convert
or remove some characters that are significant to the filesystem &#8211; in
particular, the path separator and any leading <code class="docutils literal"><span class="pre">'.'</span></code> character (which would
cause the file to be hidden in a file listing).</p>
<p>Note that this is a one-way transformation &#8211; you can&#8217;t safely derive the
original path from the normalized path.</p>
<p>To normalize a path, we begin by looking at the first character.  If the
first character is <code class="docutils literal"><span class="pre">'/'</span></code> or <code class="docutils literal"><span class="pre">'\'</span></code>, it gets removed.  If the first
character is <code class="docutils literal"><span class="pre">'.'</span></code>, it gets converted to <code class="docutils literal"><span class="pre">'_'</span></code>.  Then, we look through the
rest of the path and convert all remaining <code class="docutils literal"><span class="pre">'/'</span></code> or <code class="docutils literal"><span class="pre">'\'</span></code> characters
<code class="docutils literal"><span class="pre">'-'</span></code>, and all remaining whitespace characters to <code class="docutils literal"><span class="pre">'_'</span></code>.</p>
<p>As a special case, a path consisting only of a single <code class="docutils literal"><span class="pre">'/'</span></code> or <code class="docutils literal"><span class="pre">'\'</span></code>
character will be converted to <code class="docutils literal"><span class="pre">'-'</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> &#8211; Path to normalize</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Normalized path as described above</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the path is None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.calculateFileAge">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">calculateFileAge</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#calculateFileAge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.calculateFileAge" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the age (in days) of a file.</p>
<p>The &#8220;age&#8221; of a file is the amount of time since the file was last used, per
the most recent of the file&#8217;s <code class="docutils literal"><span class="pre">st_atime</span></code> and <code class="docutils literal"><span class="pre">st_mtime</span></code> values.</p>
<p>Technically, we only intend this function to work with files, but it will
probably work with anything on the filesystem.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> &#8211; Path to a file on disk</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Age of the file in days (possibly fractional)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">OSError</span></code> &#8211; If the file doesn&#8217;t exist</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.changeOwnership">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">changeOwnership</code><span class="sig-paren">(</span><em>path</em>, <em>user</em>, <em>group</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#changeOwnership"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.changeOwnership" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes ownership of path to match the user and group.</p>
<p>This is a no-op if user/group functionality is not available on the
platform, or if the either passed-in user or group is <code class="docutils literal"><span class="pre">None</span></code>.  Further, we
won&#8217;t even try to do it unless running as root, since it&#8217;s unlikely to work.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> &#8211; Path whose ownership to change</li>
<li><strong>user</strong> &#8211; User which owns file</li>
<li><strong>group</strong> &#8211; Group which owns file</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.checkUnique">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">checkUnique</code><span class="sig-paren">(</span><em>prefix</em>, <em>values</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#checkUnique"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.checkUnique" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that all values are unique.</p>
<p>The values list is checked for duplicate values.  If there are
duplicates, an exception is thrown.  All duplicate values are listed in
the exception.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>prefix</strong> &#8211; Prefix to use in the thrown exception</li>
<li><strong>values</strong> &#8211; List of values to check</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If there are duplicates in the list</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.convertSize">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">convertSize</code><span class="sig-paren">(</span><em>size</em>, <em>fromUnit</em>, <em>toUnit</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#convertSize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.convertSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a size in one unit to a size in another unit.</p>
<p>This is just a convenience function so that the functionality can be
implemented in just one place.  Internally, we convert values to bytes and
then to the final unit.</p>
<p>The available units are:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">UNIT_BYTES</span></code> - Bytes</li>
<li><code class="docutils literal"><span class="pre">UNIT_KBYTES</span></code> - Kilobytes, where 1 kB = 1024 B</li>
<li><code class="docutils literal"><span class="pre">UNIT_MBYTES</span></code> - Megabytes, where 1 MB = 1024 kB</li>
<li><code class="docutils literal"><span class="pre">UNIT_GBYTES</span></code> - Gigabytes, where 1 GB = 1024 MB</li>
<li><code class="docutils literal"><span class="pre">UNIT_SECTORS</span></code> - Sectors, where 1 sector = 2048 B</li>
</ul>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>size</strong> (Integer or float value in units of <code class="docutils literal"><span class="pre">fromUnit</span></code>) &#8211; Size to convert</li>
<li><strong>fromUnit</strong> (<em>One of the units listed above</em>) &#8211; Unit to convert from</li>
<li><strong>toUnit</strong> (<em>One of the units listed above</em>) &#8211; Unit to convert to</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Number converted to new unit, as a float</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the units is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.dereferenceLink">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">dereferenceLink</code><span class="sig-paren">(</span><em>path</em>, <em>absolute=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#dereferenceLink"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.dereferenceLink" title="Permalink to this definition">¶</a></dt>
<dd><p>Deference a soft link, optionally normalizing it to an absolute path.
:param path: Path of link to dereference
:param absolute: Whether to normalize the result to an absolute path</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dereferenced path, or original path if original is not a link</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.deriveDayOfWeek">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">deriveDayOfWeek</code><span class="sig-paren">(</span><em>dayName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#deriveDayOfWeek"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.deriveDayOfWeek" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts English day name to numeric day of week as from <code class="docutils literal"><span class="pre">time.localtime</span></code>.</p>
<p>For instance, the day <code class="docutils literal"><span class="pre">monday</span></code> would be converted to the number <code class="docutils literal"><span class="pre">0</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dayName</strong> (string, i.e. <code class="docutils literal"><span class="pre">&quot;monday&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;tuesday&quot;</span></code>, etc) &#8211; Day of week to convert</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Integer, where Monday is 0 and Sunday is 6; or -1 if no conversion is possible</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.deviceMounted">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">deviceMounted</code><span class="sig-paren">(</span><em>devicePath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#deviceMounted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.deviceMounted" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether a specific filesystem device is currently mounted.</p>
<p>We determine whether the device is mounted by looking through the system&#8217;s
<code class="docutils literal"><span class="pre">mtab</span></code> file.  This file shows every currently-mounted filesystem, ordered
by device.  We only do the check if the <code class="docutils literal"><span class="pre">mtab</span></code> file exists and is readable.
Otherwise, we assume that the device is not mounted.</p>
<p><em>Note:</em> This only works on platforms that have a concept of an mtab file
to show mounted volumes, like UNIXes.  It won&#8217;t work on Windows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>devicePath</strong> &#8211; Path of device to be checked</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if device is mounted, false otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.displayBytes">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">displayBytes</code><span class="sig-paren">(</span><em>bytes</em>, <em>digits=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#displayBytes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.displayBytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a byte quantity so it can be sensibly displayed.</p>
<p>It&#8217;s rather difficult to look at a number like &#8220;72372224 bytes&#8221; and get any
meaningful information out of it.  It would be more useful to see something
like &#8220;69.02 MB&#8221;.  That&#8217;s what this function does.  Any time you want to display
a byte value, i.e.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="s2">&quot;Size: </span><span class="si">%s</span><span class="s2"> bytes&quot;</span> <span class="o">%</span> <span class="nb">bytes</span>
</pre></div>
</div>
<p>Call this function instead:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="s2">&quot;Size: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">displayBytes</span><span class="p">(</span><span class="nb">bytes</span><span class="p">)</span>
</pre></div>
</div>
<p>What comes out will be sensibly formatted.  The indicated number of digits
will be listed after the decimal point, rounded based on whatever rules are
used by Python&#8217;s standard <code class="docutils literal"><span class="pre">%f</span></code> string format specifier. (Values less than 1
kB will be listed in bytes and will not have a decimal point, since the
concept of a fractional byte is nonsensical.)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>bytes</strong> (<em>Integer number of bytes</em>) &#8211; Byte quantity</li>
<li><strong>digits</strong> (<em>Integer value, typically 2-5</em>) &#8211; Number of digits to display after the decimal point</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">String, formatted for sensible display</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.encodePath">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">encodePath</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#encodePath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.encodePath" title="Permalink to this definition">¶</a></dt>
<dd><p>Safely encodes a filesystem path as a Unicode string, converting bytes to fileystem encoding if necessary.
:param path: Path to encode</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Path, as a string, encoded appropriately</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the path cannot be encoded properly</td>
</tr>
</tbody>
</table>
<p>&#64;see: <a class="reference external" href="http://lucumr.pocoo.org/2013/7/2/the-updated-guide-to-unicode/">http://lucumr.pocoo.org/2013/7/2/the-updated-guide-to-unicode/</a></p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.executeCommand">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">executeCommand</code><span class="sig-paren">(</span><em>command</em>, <em>args</em>, <em>returnOutput=False</em>, <em>ignoreStderr=False</em>, <em>doNotLog=False</em>, <em>outputFile=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#executeCommand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.executeCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a shell command, hopefully in a safe way.</p>
<p>This function exists to replace direct calls to <code class="docutils literal"><span class="pre">os.popen</span></code> in the Cedar
Backup code.  It&#8217;s not safe to call a function such as <code class="docutils literal"><span class="pre">os.popen()</span></code> with
untrusted arguments, since that can cause problems if the string contains
non-safe variables or other constructs (imagine that the argument is
<code class="docutils literal"><span class="pre">$WHATEVER</span></code>, but <code class="docutils literal"><span class="pre">$WHATEVER</span></code> contains something like C{&#8221;; rm -fR ~/;
echo&#8221;} in the current environment).</p>
<p>Instead, it&#8217;s safer to pass a list of arguments in the style supported bt
<code class="docutils literal"><span class="pre">popen2</span></code> or <code class="docutils literal"><span class="pre">popen4</span></code>.  This function actually uses a specialized <code class="docutils literal"><span class="pre">Pipe</span></code>
class implemented using either <code class="docutils literal"><span class="pre">subprocess.Popen</span></code> or <code class="docutils literal"><span class="pre">popen2.Popen4</span></code>.</p>
<p>Under the normal case, this function will return a tuple of C{(status,
None)} where the status is the wait-encoded return status of the call per
the <code class="docutils literal"><span class="pre">popen2.Popen4</span></code> documentation.  If <code class="docutils literal"><span class="pre">returnOutput</span></code> is passed in as
<code class="docutils literal"><span class="pre">True</span></code>, the function will return a tuple of <code class="docutils literal"><span class="pre">(status,</span> <span class="pre">output)</span></code> where
<code class="docutils literal"><span class="pre">output</span></code> is a list of strings, one entry per line in the output from the
command.  Output is always logged to the <code class="docutils literal"><span class="pre">outputLogger.info()</span></code> target,
regardless of whether it&#8217;s returned.</p>
<p>By default, <code class="docutils literal"><span class="pre">stdout</span></code> and <code class="docutils literal"><span class="pre">stderr</span></code> will be intermingled in the output.
However, if you pass in <code class="docutils literal"><span class="pre">ignoreStderr=True</span></code>, then only <code class="docutils literal"><span class="pre">stdout</span></code> will be
included in the output.</p>
<p>The <code class="docutils literal"><span class="pre">doNotLog</span></code> parameter exists so that callers can force the function to
not log command output to the debug log.  Normally, you would want to log.
However, if you&#8217;re using this function to write huge output files (i.e.
database backups written to <code class="docutils literal"><span class="pre">stdout</span></code>) then you might want to avoid putting
all that information into the debug log.</p>
<p>The <code class="docutils literal"><span class="pre">outputFile</span></code> parameter exists to make it easier for a caller to push
output into a file, i.e. as a substitute for redirection to a file.  If this
value is passed in, each time a line of output is generated, it will be
written to the file using <code class="docutils literal"><span class="pre">outputFile.write()</span></code>.  At the end, the file
descriptor will be flushed using <code class="docutils literal"><span class="pre">outputFile.flush()</span></code>.  The caller
maintains responsibility for closing the file object appropriately.</p>
<p><em>Note:</em> I know that it&#8217;s a bit confusing that the command and the arguments
are both lists.  I could have just required the caller to pass in one big
list.  However, I think it makes some sense to keep the command (the
constant part of what we&#8217;re executing, i.e. <code class="docutils literal"><span class="pre">&quot;scp</span> <span class="pre">-B&quot;</span></code>) separate from its
arguments, even if they both end up looking kind of similar.</p>
<p><em>Note:</em> You cannot redirect output via shell constructs (i.e. <code class="docutils literal"><span class="pre">&gt;file</span></code>,
<code class="docutils literal"><span class="pre">2&gt;/dev/null</span></code>, etc.) using this function.  The redirection string would be
passed to the command just like any other argument.  However, you can
implement the equivalent to redirection using <code class="docutils literal"><span class="pre">ignoreStderr</span></code> and
<code class="docutils literal"><span class="pre">outputFile</span></code>, as discussed above.</p>
<p><em>Note:</em> The operating system environment is partially sanitized before
the command is invoked.  See <a class="reference internal" href="#CedarBackup3.util.sanitizeEnvironment" title="CedarBackup3.util.sanitizeEnvironment"><code class="xref any py py-func docutils literal"><span class="pre">sanitizeEnvironment</span></code></a> for details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>command</strong> (<em>List of individual arguments that make up the command</em>) &#8211; Shell command to execute</li>
<li><strong>args</strong> (<em>List of additional arguments to the command</em>) &#8211; List of arguments to the command</li>
<li><strong>returnOutput</strong> (Boolean <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code>) &#8211; Indicates whether to return the output of the command</li>
<li><strong>ignoreStderr</strong> (<em>Boolean True or False</em>) &#8211; Whether stderr should be discarded</li>
<li><strong>doNotLog</strong> (Boolean <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code>) &#8211; Indicates that output should not be logged</li>
<li><strong>outputFile</strong> (File as from <code class="docutils literal"><span class="pre">open</span></code> or <code class="docutils literal"><span class="pre">file</span></code>, binary write) &#8211; File that all output should be written to</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Tuple of <code class="docutils literal"><span class="pre">(result,</span> <span class="pre">output)</span></code> as described above</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.getFunctionReference">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">getFunctionReference</code><span class="sig-paren">(</span><em>module</em>, <em>function</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#getFunctionReference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.getFunctionReference" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a reference to a named function.</p>
<p>This does some hokey-pokey to get back a reference to a dynamically named
function.  For instance, say you wanted to get a reference to the
<code class="docutils literal"><span class="pre">os.path.isdir</span></code> function.  You could use:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">myfunc</span> <span class="o">=</span> <span class="n">getFunctionReference</span><span class="p">(</span><span class="s2">&quot;os.path&quot;</span><span class="p">,</span> <span class="s2">&quot;isdir&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Although we won&#8217;t bomb out directly, behavior is pretty much undefined if
you pass in <code class="docutils literal"><span class="pre">None</span></code> or <code class="docutils literal"><span class="pre">&quot;&quot;</span></code> for either <code class="docutils literal"><span class="pre">module</span></code> or <code class="docutils literal"><span class="pre">function</span></code>.</p>
<p>The only validation we enforce is that whatever we get back must be
callable.</p>
<p>I derived this code based on the internals of the Python unittest
implementation.  I don&#8217;t claim to completely understand how it works.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>module</strong> (<em>Something like &quot;os.path&quot; or &quot;CedarBackup3.util&quot;</em>) &#8211; Name of module associated with function</li>
<li><strong>function</strong> (<em>Something like &quot;isdir&quot; or &quot;getUidGid&quot;</em>) &#8211; Name of function</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Reference to function associated with name</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ImportError</span></code> &#8211; If the function cannot be found</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the resulting reference is not callable</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>&#64;copyright: Some of this code, prior to customization, was originally part
of the Python 2.3 codebase.  Python code is copyright (c) 2001, 2002 Python
Software Foundation; All Rights Reserved.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.getUidGid">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">getUidGid</code><span class="sig-paren">(</span><em>user</em>, <em>group</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#getUidGid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.getUidGid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the uid/gid associated with a user/group pair</p>
<p>This is a no-op if user/group functionality is not available on the platform.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>user</strong> (<em>User name as a string</em>) &#8211; User name</li>
<li><strong>group</strong> (<em>Group name as a string</em>) &#8211; Group name</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Tuple <code class="docutils literal"><span class="pre">(uid,</span> <span class="pre">gid)</span></code> matching passed-in user and group</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the ownership user/group values are invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.isRunningAsRoot">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">isRunningAsRoot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#isRunningAsRoot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.isRunningAsRoot" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether the program is running as the root user.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.isStartOfWeek">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">isStartOfWeek</code><span class="sig-paren">(</span><em>startingDay</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#isStartOfWeek"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.isStartOfWeek" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether &#8220;today&#8221; is the backup starting day per configuration.</p>
<p>If the current day&#8217;s English name matches the indicated starting day, then
today is a starting day.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>startingDay</strong> (string, i.e. <code class="docutils literal"><span class="pre">&quot;monday&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;tuesday&quot;</span></code>, etc) &#8211; Configured starting day</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Boolean indicating whether today is the starting day</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.mount">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">mount</code><span class="sig-paren">(</span><em>devicePath</em>, <em>mountPoint</em>, <em>fsType</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#mount"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.mount" title="Permalink to this definition">¶</a></dt>
<dd><p>Mounts the indicated device at the indicated mount point.</p>
<p>For instance, to mount a CD, you might use device path <code class="docutils literal"><span class="pre">/dev/cdrw</span></code>, mount
point <code class="docutils literal"><span class="pre">/media/cdrw</span></code> and filesystem type <code class="docutils literal"><span class="pre">iso9660</span></code>.  You can safely use any
filesystem type that is supported by <code class="docutils literal"><span class="pre">mount</span></code> on your platform.  If the type
is <code class="docutils literal"><span class="pre">None</span></code>, we&#8217;ll attempt to let <code class="docutils literal"><span class="pre">mount</span></code> auto-detect it.  This may or may
not work on all systems.</p>
<p><em>Note:</em> This only works on platforms that have a concept of &#8220;mounting&#8221; a
filesystem through a command-line <code class="docutils literal"><span class="pre">&quot;mount&quot;</span></code> command, like UNIXes.  It
won&#8217;t work on Windows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>devicePath</strong> &#8211; Path of device to be mounted</li>
<li><strong>mountPoint</strong> &#8211; Path that device should be mounted at</li>
<li><strong>fsType</strong> &#8211; Type of the filesystem assumed to be available via the device</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If the device cannot be mounted</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.nullDevice">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">nullDevice</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#nullDevice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.nullDevice" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to portably return the null device on this system.</p>
<p>The null device is something like <code class="docutils literal"><span class="pre">/dev/null</span></code> on a UNIX system.  The name
varies on other platforms.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.parseCommaSeparatedString">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">parseCommaSeparatedString</code><span class="sig-paren">(</span><em>commaString</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#parseCommaSeparatedString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.parseCommaSeparatedString" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a list of values out of a comma-separated string.</p>
<p>The items in the list are split by comma, and then have whitespace
stripped.  As a special case, if <code class="docutils literal"><span class="pre">commaString</span></code> is <code class="docutils literal"><span class="pre">None</span></code>, then <code class="docutils literal"><span class="pre">None</span></code>
will be returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>commaString</strong> &#8211; List of values in comma-separated string format</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Values from commaString split into a list, or <code class="docutils literal"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.removeKeys">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">removeKeys</code><span class="sig-paren">(</span><em>d</em>, <em>keys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#removeKeys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.removeKeys" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all of the keys from the dictionary.
The dictionary is altered in-place.
Each key must exist in the dictionary.
:param d: Dictionary to operate on
:param keys: List of keys to remove</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">KeyError</span></code> &#8211; If one of the keys does not exist</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.resolveCommand">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">resolveCommand</code><span class="sig-paren">(</span><em>command</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#resolveCommand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.resolveCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolves the real path to a command through the path resolver mechanism.</p>
<p>Both extensions and standard Cedar Backup functionality need a way to
resolve the &#8220;real&#8221; location of various executables.  Normally, they assume
that these executables are on the system path, but some callers need to
specify an alternate location.</p>
<p>Ideally, we want to handle this configuration in a central location.  The
Cedar Backup path resolver mechanism (a singleton called
<a class="reference internal" href="#CedarBackup3.util.PathResolverSingleton" title="CedarBackup3.util.PathResolverSingleton"><code class="xref any py py-class docutils literal"><span class="pre">PathResolverSingleton</span></code></a>) provides the central location to store the
mappings.  This function wraps access to the singleton, and is what all
functions (extensions or standard functionality) should call if they need to
find a command.</p>
<p>The passed-in command must actually be a list, in the standard form used by
all existing Cedar Backup code (something like <code class="docutils literal"><span class="pre">[&quot;svnlook&quot;,</span> <span class="pre">]</span></code>).  The
lookup will actually be done on the first element in the list, and the
returned command will always be in list form as well.</p>
<p>If the passed-in command can&#8217;t be resolved or no mapping exists, then the
command itself will be returned unchanged.  This way, we neatly fall back on
default behavior if we have no sensible alternative.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>command</strong> (List form of command, i.e. <code class="docutils literal"><span class="pre">[&quot;svnlook&quot;,</span> <span class="pre">]</span></code>) &#8211; Command to resolve</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Path to command or just command itself if no mapping exists</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.sanitizeEnvironment">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">sanitizeEnvironment</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#sanitizeEnvironment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.sanitizeEnvironment" title="Permalink to this definition">¶</a></dt>
<dd><p>Sanitizes the operating system environment.</p>
<p>The operating system environment is contained in <code class="docutils literal"><span class="pre">os.environ</span></code>.  This method
sanitizes the contents of that dictionary.</p>
<p>Currently, all it does is reset the locale (removing <code class="docutils literal"><span class="pre">$LC_*</span></code>) and set the
default language (<code class="docutils literal"><span class="pre">$LANG</span></code>) to <code class="docutils literal"><span class="pre">DEFAULT_LANGUAGE</span></code>.  This way, we can count
on consistent localization regardless of what the end-user has configured.
This is important for code that needs to parse program output.</p>
<p>The <code class="docutils literal"><span class="pre">os.environ</span></code> dictionary is modifed in-place.  If <code class="docutils literal"><span class="pre">$LANG</span></code> is already
set to the proper value, it is not re-set, so we can avoid the memory leaks
that are documented to occur on BSD-based systems.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Copy of the sanitized environment</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.sortDict">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">sortDict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#sortDict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.sortDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the keys of the dictionary sorted by value.
:param d: Dictionary to operate on</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of dictionary keys sorted in order by dictionary value</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.splitCommandLine">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">splitCommandLine</code><span class="sig-paren">(</span><em>commandLine</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#splitCommandLine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.splitCommandLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a command line string into a list of arguments.</p>
<p>Unfortunately, there is no &#8220;standard&#8221; way to parse a command line string,
and it&#8217;s actually not an easy problem to solve portably (essentially, we
have to emulate the shell argument-processing logic).  This code only
respects double quotes (<code class="docutils literal"><span class="pre">&quot;</span></code>) for grouping arguments, not single quotes
(<code class="docutils literal"><span class="pre">'</span></code>).  Make sure you take this into account when building your command
line.</p>
<p>Incidentally, I found this particular parsing method while digging around in
Google Groups, and I tweaked it for my own use.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>commandLine</strong> (<em>String, i.e. &quot;cback3 --verbose stage store&quot;</em>) &#8211; Command line string</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of arguments, suitable for passing to <code class="docutils literal"><span class="pre">popen2</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the command line is None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.util.unmount">
<code class="descclassname">CedarBackup3.util.</code><code class="descname">unmount</code><span class="sig-paren">(</span><em>mountPoint</em>, <em>removeAfter=False</em>, <em>attempts=1</em>, <em>waitSeconds=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/util.html#unmount"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.util.unmount" title="Permalink to this definition">¶</a></dt>
<dd><p>Unmounts whatever device is mounted at the indicated mount point.</p>
<p>Sometimes, it might not be possible to unmount the mount point immediately,
if there are still files open there.  Use the <code class="docutils literal"><span class="pre">attempts</span></code> and <code class="docutils literal"><span class="pre">waitSeconds</span></code>
arguments to indicate how many unmount attempts to make and how many seconds
to wait between attempts.  If you pass in zero attempts, no attempts will be
made (duh).</p>
<p>If the indicated mount point is not really a mount point per
<code class="docutils literal"><span class="pre">os.path.ismount()</span></code>, then it will be ignored.  This seems to be a safer
check then looking through <code class="docutils literal"><span class="pre">/etc/mtab</span></code>, since <code class="docutils literal"><span class="pre">ismount()</span></code> is already in
the Python standard library and is documented as working on all POSIX
systems.</p>
<p>If <code class="docutils literal"><span class="pre">removeAfter</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, then the mount point will be removed using
<code class="docutils literal"><span class="pre">os.rmdir()</span></code> after the unmount action succeeds.  If for some reason the
mount point is not a directory, then it will not be removed.</p>
<p><em>Note:</em> This only works on platforms that have a concept of &#8220;mounting&#8221; a
filesystem through a command-line <code class="docutils literal"><span class="pre">&quot;mount&quot;</span></code> command, like UNIXes.  It
won&#8217;t work on Windows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mountPoint</strong> &#8211; Mount point to be unmounted</li>
<li><strong>removeAfter</strong> &#8211; Remove the mount point after unmounting it</li>
<li><strong>attempts</strong> &#8211; Number of times to attempt the unmount</li>
<li><strong>waitSeconds</strong> &#8211; Number of seconds to wait between repeated attempts</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If the mount point is still mounted after attempts are exhausted</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-CedarBackup3.writer">
<span id="cedarbackup3-writer-module"></span><h2>CedarBackup3.writer module<a class="headerlink" href="#module-CedarBackup3.writer" title="Permalink to this headline">¶</a></h2>
<p>Provides interface backwards compatibility.</p>
<p>In Cedar Backup 2.10.0, a refactoring effort took place while adding code to
support DVD hardware.  All of the writer functionality was moved to the
writers/ package.  This mostly-empty file remains to preserve the Cedar Backup
library interface.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-CedarBackup3.xmlutil">
<span id="cedarbackup3-xmlutil-module"></span><h2>CedarBackup3.xmlutil module<a class="headerlink" href="#module-CedarBackup3.xmlutil" title="Permalink to this headline">¶</a></h2>
<p>Provides general XML-related functionality.</p>
<p>What I&#8217;m trying to do here is abstract much of the functionality that directly
accesses the DOM tree.  This is not so much to &#8220;protect&#8221; the other code from
the DOM, but to standardize the way it&#8217;s used.  It will also help extension
authors write code that easily looks more like the rest of Cedar Backup.</p>
<div class="section" id="id7">
<h3>Module Attributes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="CedarBackup3.xmlutil.TRUE_BOOLEAN_VALUES">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">TRUE_BOOLEAN_VALUES</code><a class="headerlink" href="#CedarBackup3.xmlutil.TRUE_BOOLEAN_VALUES" title="Permalink to this definition">¶</a></dt>
<dd><p>List of boolean values in XML representing <code class="docutils literal"><span class="pre">True</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.xmlutil.FALSE_BOOLEAN_VALUES">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">FALSE_BOOLEAN_VALUES</code><a class="headerlink" href="#CedarBackup3.xmlutil.FALSE_BOOLEAN_VALUES" title="Permalink to this definition">¶</a></dt>
<dd><p>List of boolean values in XML representing <code class="docutils literal"><span class="pre">False</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.xmlutil.VALID_BOOLEAN_VALUES">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">VALID_BOOLEAN_VALUES</code><a class="headerlink" href="#CedarBackup3.xmlutil.VALID_BOOLEAN_VALUES" title="Permalink to this definition">¶</a></dt>
<dd><p>List of valid boolean values in XML</p>
</dd></dl>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.xmlutil.Serializer">
<em class="property">class </em><code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">Serializer</code><span class="sig-paren">(</span><em>stream=&lt;_io.TextIOWrapper name='&lt;stdout&gt;' mode='w' encoding='UTF-8'&gt;</em>, <em>encoding='UTF-8'</em>, <em>indent=3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#Serializer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.Serializer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>XML serializer class.</p>
<p>This is a customized serializer that I hacked together based on what I found
in the PyXML distribution.  Basically, around release 2.7.0, the only reason
I still had around a dependency on PyXML was for the PrettyPrint
functionality, and that seemed pointless.  So, I stripped the PrettyPrint
code out of PyXML and hacked bits of it off until it did just what I needed
and no more.</p>
<p>This code started out being called PrintVisitor, but I decided it makes more
sense just calling it a serializer.  I&#8217;ve made nearly all of the methods
private, and I&#8217;ve added a new high-level serialize() method rather than
having clients call <code class="docutils literal"><span class="pre">visit()</span></code>.</p>
<p>Anyway, as a consequence of my hacking with it, this can&#8217;t quite be called a
complete XML serializer any more.  I ripped out support for HTML and XHTML,
and there is also no longer any support for namespaces (which I took out
because this dragged along a lot of extra code, and Cedar Backup doesn&#8217;t use
namespaces).  However, everything else should pretty much work as expected.</p>
<p>&#64;copyright: This code, prior to customization, was part of the PyXML
codebase, and before that was part of the 4DOM suite developed by
Fourthought, Inc.  It its original form, it was Copyright (c) 2000
Fourthought Inc, USA; All Rights Reserved.</p>
<dl class="method">
<dt id="CedarBackup3.xmlutil.Serializer.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>stream=&lt;_io.TextIOWrapper name='&lt;stdout&gt;' mode='w' encoding='UTF-8'&gt;</em>, <em>encoding='UTF-8'</em>, <em>indent=3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#Serializer.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.Serializer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a serializer.
:param stream: Stream to write output to
:param encoding: Output encoding
:param indent: Number of spaces to indent, as an integer</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.xmlutil.Serializer.serialize">
<code class="descname">serialize</code><span class="sig-paren">(</span><em>xmlDom</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#Serializer.serialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.Serializer.serialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize the passed-in XML document.
:param xmlDom: XML DOM tree to serialize</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If there&#8217;s an unknown node type in the document</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.addBooleanNode">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">addBooleanNode</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em>, <em>nodeName</em>, <em>nodeValue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#addBooleanNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.addBooleanNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a text node as the next child of a parent, to contain a boolean.</p>
<p>If the <code class="docutils literal"><span class="pre">nodeValue</span></code> is None, then the node will be created, but will be
empty (i.e. will contain no text node child).</p>
<p>Boolean <code class="docutils literal"><span class="pre">True</span></code>, or anything else interpreted as <code class="docutils literal"><span class="pre">True</span></code> by Python, will
be converted to a string &#8220;Y&#8221;.  Anything else will be converted to a
string &#8220;N&#8221;.  The result is added to the document via <a class="reference internal" href="#CedarBackup3.xmlutil.addStringNode" title="CedarBackup3.xmlutil.addStringNode"><code class="xref any py py-func docutils literal"><span class="pre">addStringNode</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent node to create child for</li>
<li><strong>nodeName</strong> &#8211; Name of the new container node</li>
<li><strong>nodeValue</strong> &#8211; The value to put into the node</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Reference to the newly-created node</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.addContainerNode">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">addContainerNode</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em>, <em>nodeName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#addContainerNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.addContainerNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a container node as the next child of a parent node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent node to create child for</li>
<li><strong>nodeName</strong> &#8211; Name of the new container node</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Reference to the newly-created node</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.addIntegerNode">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">addIntegerNode</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em>, <em>nodeName</em>, <em>nodeValue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#addIntegerNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.addIntegerNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a text node as the next child of a parent, to contain an integer.</p>
<p>If the <code class="docutils literal"><span class="pre">nodeValue</span></code> is None, then the node will be created, but will be
empty (i.e. will contain no text node child).</p>
<p>The integer will be converted to a string using &#8220;%d&#8221;.  The result will be
added to the document via <a class="reference internal" href="#CedarBackup3.xmlutil.addStringNode" title="CedarBackup3.xmlutil.addStringNode"><code class="xref any py py-func docutils literal"><span class="pre">addStringNode</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent node to create child for</li>
<li><strong>nodeName</strong> &#8211; Name of the new container node</li>
<li><strong>nodeValue</strong> &#8211; The value to put into the node</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Reference to the newly-created node</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.addLongNode">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">addLongNode</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em>, <em>nodeName</em>, <em>nodeValue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#addLongNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.addLongNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a text node as the next child of a parent, to contain a long integer.</p>
<p>If the <code class="docutils literal"><span class="pre">nodeValue</span></code> is None, then the node will be created, but will be
empty (i.e. will contain no text node child).</p>
<p>The integer will be converted to a string using &#8220;%d&#8221;.  The result will be
added to the document via <a class="reference internal" href="#CedarBackup3.xmlutil.addStringNode" title="CedarBackup3.xmlutil.addStringNode"><code class="xref any py py-func docutils literal"><span class="pre">addStringNode</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent node to create child for</li>
<li><strong>nodeName</strong> &#8211; Name of the new container node</li>
<li><strong>nodeValue</strong> &#8211; The value to put into the node</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Reference to the newly-created node</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.addStringNode">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">addStringNode</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em>, <em>nodeName</em>, <em>nodeValue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#addStringNode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.addStringNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a text node as the next child of a parent, to contain a string.</p>
<p>If the <code class="docutils literal"><span class="pre">nodeValue</span></code> is None, then the node will be created, but will be
empty (i.e. will contain no text node child).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent node to create child for</li>
<li><strong>nodeName</strong> &#8211; Name of the new container node</li>
<li><strong>nodeValue</strong> &#8211; The value to put into the node</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Reference to the newly-created node</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.createInputDom">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">createInputDom</code><span class="sig-paren">(</span><em>xmlData</em>, <em>name='cb_config'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#createInputDom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.createInputDom" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a DOM tree based on reading an XML string.
:param name: Assumed base name of the document (root node name)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Tuple (xmlDom, parentNode) for the parsed document</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the document can&#8217;t be parsed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.createOutputDom">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">createOutputDom</code><span class="sig-paren">(</span><em>name='cb_config'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#createOutputDom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.createOutputDom" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a DOM tree used for writing an XML document.
:param name: Base name of the document (root node name)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Tuple (xmlDom, parentNode) for the new document</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.isElement">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">isElement</code><span class="sig-paren">(</span><em>node</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#isElement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.isElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True or False depending on whether the XML node is an element node.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.readBoolean">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">readBoolean</code><span class="sig-paren">(</span><em>parent</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#readBoolean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.readBoolean" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns boolean contents of the first child with a given name immediately
beneath the parent.</p>
<p>By &#8220;immediately beneath&#8221; the parent, we mean from among nodes that are
direct children of the passed-in parent node.</p>
<p>The string value of the node must be one of the values in <a class="reference internal" href="#CedarBackup3.xmlutil.VALID_BOOLEAN_VALUES" title="CedarBackup3.xmlutil.VALID_BOOLEAN_VALUES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_BOOLEAN_VALUES</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent</strong> &#8211; Parent node to search beneath</li>
<li><strong>name</strong> &#8211; Name of node to search for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Boolean contents of node or <code class="docutils literal"><span class="pre">None</span></code> if no matching nodes are found</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the string at the location can&#8217;t be converted to a boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.readChildren">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">readChildren</code><span class="sig-paren">(</span><em>parent</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#readChildren"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.readChildren" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of nodes with a given name immediately beneath the
parent.</p>
<p>By &#8220;immediately beneath&#8221; the parent, we mean from among nodes that are
direct children of the passed-in parent node.</p>
<p>Underneath, we use the Python <code class="docutils literal"><span class="pre">getElementsByTagName</span></code> method, which is
pretty cool, but which (surprisingly?) returns a list of all children
with a given name below the parent, at any level.  We just prune that
list to include only children whose <code class="docutils literal"><span class="pre">parentNode</span></code> matches the passed-in
parent.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent</strong> &#8211; Parent node to search beneath</li>
<li><strong>name</strong> &#8211; Name of nodes to search for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of child nodes with correct parent, or an empty list if</p>
</td>
</tr>
</tbody>
</table>
<p>no matching nodes are found.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.readFirstChild">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">readFirstChild</code><span class="sig-paren">(</span><em>parent</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#readFirstChild"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.readFirstChild" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the first child with a given name immediately beneath the parent.</p>
<p>By &#8220;immediately beneath&#8221; the parent, we mean from among nodes that are
direct children of the passed-in parent node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent</strong> &#8211; Parent node to search beneath</li>
<li><strong>name</strong> &#8211; Name of node to search for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">First properly-named child of parent, or <code class="docutils literal"><span class="pre">None</span></code> if no matching nodes are found</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.readFloat">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">readFloat</code><span class="sig-paren">(</span><em>parent</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#readFloat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.readFloat" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns float contents of the first child with a given name immediately
beneath the parent.</p>
<p>By &#8220;immediately beneath&#8221; the parent, we mean from among nodes that are
direct children of the passed-in parent node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent</strong> &#8211; Parent node to search beneath</li>
<li><strong>name</strong> &#8211; Name of node to search for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Float contents of node or <code class="docutils literal"><span class="pre">None</span></code> if no matching nodes are found</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the string at the location can&#8217;t be converted to a</p>
</td>
</tr>
</tbody>
</table>
<p>float value.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.readInteger">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">readInteger</code><span class="sig-paren">(</span><em>parent</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#readInteger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.readInteger" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns integer contents of the first child with a given name immediately
beneath the parent.</p>
<p>By &#8220;immediately beneath&#8221; the parent, we mean from among nodes that are
direct children of the passed-in parent node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent</strong> &#8211; Parent node to search beneath</li>
<li><strong>name</strong> &#8211; Name of node to search for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Integer contents of node or <code class="docutils literal"><span class="pre">None</span></code> if no matching nodes are found</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the string at the location can&#8217;t be converted to an integer</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.readLong">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">readLong</code><span class="sig-paren">(</span><em>parent</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#readLong"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.readLong" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns long integer contents of the first child with a given name immediately
beneath the parent.</p>
<p>By &#8220;immediately beneath&#8221; the parent, we mean from among nodes that are
direct children of the passed-in parent node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent</strong> &#8211; Parent node to search beneath</li>
<li><strong>name</strong> &#8211; Name of node to search for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Long integer contents of node or <code class="docutils literal"><span class="pre">None</span></code> if no matching nodes are found</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the string at the location can&#8217;t be converted to an integer</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.readString">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">readString</code><span class="sig-paren">(</span><em>parent</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#readString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.readString" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns string contents of the first child with a given name immediately
beneath the parent.</p>
<p>By &#8220;immediately beneath&#8221; the parent, we mean from among nodes that are
direct children of the passed-in parent node.  We assume that string
contents of a given node belong to the first <code class="docutils literal"><span class="pre">TEXT_NODE</span></code> child of that
node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent</strong> &#8211; Parent node to search beneath</li>
<li><strong>name</strong> &#8211; Name of node to search for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">String contents of node or <code class="docutils literal"><span class="pre">None</span></code> if no matching nodes are found</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.readStringList">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">readStringList</code><span class="sig-paren">(</span><em>parent</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#readStringList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.readStringList" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of the string contents associated with nodes with a given
name immediately beneath the parent.</p>
<p>By &#8220;immediately beneath&#8221; the parent, we mean from among nodes that are
direct children of the passed-in parent node.</p>
<p>First, we find all of the nodes using <a class="reference internal" href="#CedarBackup3.xmlutil.readChildren" title="CedarBackup3.xmlutil.readChildren"><code class="xref any py py-func docutils literal"><span class="pre">readChildren</span></code></a>, and then we
retrieve the &#8220;string contents&#8221; of each of those nodes.  The returned list
has one entry per matching node.  We assume that string contents of a
given node belong to the first <code class="docutils literal"><span class="pre">TEXT_NODE</span></code> child of that node.  Nodes
which have no <code class="docutils literal"><span class="pre">TEXT_NODE</span></code> children are not represented in the returned
list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent</strong> &#8211; Parent node to search beneath</li>
<li><strong>name</strong> &#8211; Name of node to search for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of strings as described above, or <code class="docutils literal"><span class="pre">None</span></code> if no matching nodes are found</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.xmlutil.serializeDom">
<code class="descclassname">CedarBackup3.xmlutil.</code><code class="descname">serializeDom</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>indent=3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/xmlutil.html#serializeDom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.xmlutil.serializeDom" title="Permalink to this definition">¶</a></dt>
<dd><p>Serializes a DOM tree and returns the result in a string.
:param xmlDom: XML DOM tree to serialize
:param indent: Number of spaces to indent, as an integer</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">String form of DOM tree, pretty-printed</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">CedarBackup3 package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.action">CedarBackup3.action module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.cli">CedarBackup3.cli module</a><ul>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#module-attributes">Module Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-CedarBackup3.config">CedarBackup3.config module</a><ul>
<li><a class="reference internal" href="#id1">Summary</a></li>
<li><a class="reference internal" href="#id2">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#xml-configuration-structure">XML Configuration Structure</a></li>
<li><a class="reference internal" href="#unicode-vs-string-data">Unicode vs. String Data</a></li>
<li><a class="reference internal" href="#validation">Validation</a></li>
<li><a class="reference internal" href="#id3">Module Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-CedarBackup3.customize">CedarBackup3.customize module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.filesystem">CedarBackup3.filesystem module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.image">CedarBackup3.image module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.knapsack">CedarBackup3.knapsack module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.peer">CedarBackup3.peer module</a><ul>
<li><a class="reference internal" href="#id4">Module Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-CedarBackup3.release">CedarBackup3.release module</a><ul>
<li><a class="reference internal" href="#id5">Module Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-CedarBackup3.testutil">CedarBackup3.testutil module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.util">CedarBackup3.util module</a><ul>
<li><a class="reference internal" href="#id6">Module Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-CedarBackup3.writer">CedarBackup3.writer module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.xmlutil">CedarBackup3.xmlutil module</a><ul>
<li><a class="reference internal" href="#id7">Module Attributes</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Cedar Backup v3 API Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="CedarBackup3.actions.html"
                        title="next chapter">CedarBackup3.actions package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/CedarBackup3.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="CedarBackup3.actions.html" title="CedarBackup3.actions package"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Cedar Backup v3 API Documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cedar Backup v3  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>
