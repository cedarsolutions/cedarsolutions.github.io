<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CedarBackup3.extend package &#8212; Cedar Backup v3  documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="Cedar Backup v3  documentation" href="index.html" />
    <link rel="up" title="CedarBackup3 package" href="CedarBackup3.html" />
    <link rel="next" title="CedarBackup3.tools package" href="CedarBackup3.tools.html" />
    <link rel="prev" title="CedarBackup3.actions package" href="CedarBackup3.actions.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="CedarBackup3.tools.html" title="CedarBackup3.tools package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="CedarBackup3.actions.html" title="CedarBackup3.actions package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cedar Backup v3  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="CedarBackup3.html" accesskey="U">CedarBackup3 package</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-CedarBackup3.extend">
<span id="cedarbackup3-extend-package"></span><h1>CedarBackup3.extend package<a class="headerlink" href="#module-CedarBackup3.extend" title="Permalink to this headline">¶</a></h1>
<p>Official Cedar Backup Extensions</p>
<p>This package provides official Cedar Backup extensions.  These are Cedar Backup
actions that are not part of the &#8220;standard&#8221; set of Cedar Backup actions, but
are officially supported along with Cedar Backup.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-CedarBackup3.extend.amazons3">
<span id="cedarbackup3-extend-amazons3-module"></span><h2>CedarBackup3.extend.amazons3 module<a class="headerlink" href="#module-CedarBackup3.extend.amazons3" title="Permalink to this headline">¶</a></h2>
<p>Store-type extension that writes data to Amazon S3.</p>
<p>This extension requires a new configuration section &lt;amazons3&gt; and is intended
to be run immediately after the standard stage action, replacing the standard
store action.  Aside from its own configuration, it requires the options and
staging configuration sections in the standard Cedar Backup configuration file.
Since it is intended to replace the store action, it does not rely on any store
configuration.</p>
<p>The underlying functionality relies on the U{AWS CLI interface
&lt;<a class="reference external" href="http://aws.amazon.com/documentation/cli/">http://aws.amazon.com/documentation/cli/</a>&gt;}.  Before you use this extension,
you need to set up your Amazon S3 account and configure the AWS CLI connection
per Amazon&#8217;s documentation.  The extension assumes that the backup is being
executed as root, and switches over to the configured backup user to
communicate with AWS.  So, make sure you configure AWS CLI as the backup user
and not root.</p>
<p>You can optionally configure Cedar Backup to encrypt data before sending it
to S3.  To do that, provide a complete command line using the <code class="docutils literal"><span class="pre">${input</span></code>} and
<code class="docutils literal"><span class="pre">${output</span></code>} variables to represent the original input file and the encrypted
output file.  This command will be executed as the backup user.</p>
<p>For instance, you can use something like this with GPG:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>/usr/bin/gpg -c --no-use-agent --batch --yes --passphrase-file /home/backup/.passphrase -o ${output} ${input}
</pre></div>
</div>
<p>The GPG mechanism depends on a strong passphrase for security.  One way to
generate a strong passphrase is using your system random number generator, i.e.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dd</span> <span class="k">if</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">urandom</span> <span class="n">count</span><span class="o">=</span><span class="mi">20</span> <span class="n">bs</span><span class="o">=</span><span class="mi">1</span> <span class="o">|</span> <span class="n">xxd</span> <span class="o">-</span><span class="n">ps</span>
</pre></div>
</div>
<p>(See U{StackExchange &lt;<a class="reference external" href="http://security.stackexchange.com/questions/14867/gpg-encryption-security">http://security.stackexchange.com/questions/14867/gpg-encryption-security</a>&gt;}
for more details about that advice.) If you decide to use encryption, make sure
you save off the passphrase in a safe place, so you can get at your backup data
later if you need to.  And obviously, make sure to set permissions on the
passphrase file so it can only be read by the backup user.</p>
<p>This extension was written for and tested on Linux.  It will throw an exception
if run on Windows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.extend.amazons3.AmazonS3Config">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.amazons3.</code><code class="descname">AmazonS3Config</code><span class="sig-paren">(</span><em>warnMidnite=None</em>, <em>s3Bucket=None</em>, <em>encryptCommand=None</em>, <em>fullBackupSizeLimit=None</em>, <em>incrementalBackupSizeLimit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/amazons3.html#AmazonS3Config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.amazons3.AmazonS3Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing Amazon S3 configuration.</p>
<p>Amazon S3 configuration is used for storing backup data in Amazon&#8217;s S3 cloud
storage using the <code class="docutils literal"><span class="pre">s3cmd</span></code> tool.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The s3Bucket value must be a non-empty string</li>
<li>The encryptCommand value, if set, must be a non-empty string</li>
<li>The full backup size limit, if set, must be a ByteQuantity &gt;= 0</li>
<li>The incremental backup size limit, if set, must be a ByteQuantity &gt;= 0</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.extend.amazons3.AmazonS3Config.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>warnMidnite=None</em>, <em>s3Bucket=None</em>, <em>encryptCommand=None</em>, <em>fullBackupSizeLimit=None</em>, <em>incrementalBackupSizeLimit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/amazons3.html#AmazonS3Config.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.amazons3.AmazonS3Config.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">AmazonS3Config</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>warnMidnite</strong> &#8211; Whether to generate warnings for crossing midnite</li>
<li><strong>s3Bucket</strong> &#8211; Name of the Amazon S3 bucket in which to store the data</li>
<li><strong>encryptCommand</strong> &#8211; Command used to encrypt backup data before upload to S3</li>
<li><strong>fullBackupSizeLimit</strong> &#8211; Maximum size of a full backup, a ByteQuantity</li>
<li><strong>incrementalBackupSizeLimit</strong> &#8211; Maximum size of an incremental backup, a ByteQuantity</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.amazons3.AmazonS3Config.encryptCommand">
<code class="descname">encryptCommand</code><a class="headerlink" href="#CedarBackup3.extend.amazons3.AmazonS3Config.encryptCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Command used to encrypt data before upload to S3</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.amazons3.AmazonS3Config.fullBackupSizeLimit">
<code class="descname">fullBackupSizeLimit</code><a class="headerlink" href="#CedarBackup3.extend.amazons3.AmazonS3Config.fullBackupSizeLimit" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum size of a full backup, as a ByteQuantity</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.amazons3.AmazonS3Config.incrementalBackupSizeLimit">
<code class="descname">incrementalBackupSizeLimit</code><a class="headerlink" href="#CedarBackup3.extend.amazons3.AmazonS3Config.incrementalBackupSizeLimit" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum size of an incremental backup, as a ByteQuantity</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.amazons3.AmazonS3Config.s3Bucket">
<code class="descname">s3Bucket</code><a class="headerlink" href="#CedarBackup3.extend.amazons3.AmazonS3Config.s3Bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Amazon S3 Bucket in which to store data</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.amazons3.AmazonS3Config.warnMidnite">
<code class="descname">warnMidnite</code><a class="headerlink" href="#CedarBackup3.extend.amazons3.AmazonS3Config.warnMidnite" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to generate warnings for crossing midnite.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.amazons3.LocalConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.amazons3.</code><code class="descname">LocalConfig</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/amazons3.html#LocalConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.amazons3.LocalConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing this extension&#8217;s configuration document.</p>
<p>This is not a general-purpose configuration object like the main Cedar
Backup configuration object.  Instead, it just knows how to parse and emit
amazons3-specific configuration values.  Third parties who need to read and
write configuration related to this extension should access it through the
constructor, <code class="docutils literal"><span class="pre">validate</span></code> and <code class="docutils literal"><span class="pre">addConfig</span></code> methods.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.extend.amazons3.LocalConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/amazons3.html#LocalConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.amazons3.LocalConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a configuration object.</p>
<p>If you initialize the object without passing either <code class="docutils literal"><span class="pre">xmlData</span></code> or
<code class="docutils literal"><span class="pre">xmlPath</span></code> then configuration will be empty and will be invalid until it
is filled in properly.</p>
<p>No reference to the original XML data or original path is saved off by
this class.  Once the data has been parsed (successfully or not) this
original information is discarded.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> argument is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.extend.amazons3.LocalConfig.validate" title="CedarBackup3.extend.amazons3.LocalConfig.validate"><code class="xref any py py-meth docutils literal"><span class="pre">LocalConfig.validate</span></code></a>
method will be called (with its default arguments) against configuration
after successfully parsing any passed-in XML.  Keep in mind that even if
<code class="docutils literal"><span class="pre">validate</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, it might not be possible to parse the passed-in
XML document if lower-level validations fail.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to read in
invalid configuration from disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlData</strong> (<em>String data</em>) &#8211; XML data representing configuration</li>
<li><strong>xmlPath</strong> (<em>Absolute path to a file on disk</em>) &#8211; Path to an XML file on disk</li>
<li><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the document after parsing it</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If both <code class="docutils literal"><span class="pre">xmlData</span></code> and <code class="docutils literal"><span class="pre">xmlPath</span></code> are passed-in</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the XML data in <code class="docutils literal"><span class="pre">xmlData</span></code> or <code class="docutils literal"><span class="pre">xmlPath</span></code> cannot be parsed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the parsed configuration document is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.amazons3.LocalConfig.addConfig">
<code class="descname">addConfig</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/amazons3.html#LocalConfig.addConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.amazons3.LocalConfig.addConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an &lt;amazons3&gt; configuration section as the next child of a parent.</p>
<p>Third parties should use this function to write configuration related to
this extension.</p>
<p>We add the following fields to the document:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">warnMidnite</span>                 <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">amazons3</span><span class="o">/</span><span class="n">warn_midnite</span>
<span class="n">s3Bucket</span>                    <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">amazons3</span><span class="o">/</span><span class="n">s3_bucket</span>
<span class="n">encryptCommand</span>              <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">amazons3</span><span class="o">/</span><span class="n">encrypt</span>
<span class="n">fullBackupSizeLimit</span>         <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">amazons3</span><span class="o">/</span><span class="n">full_size_limit</span>
<span class="n">incrementalBackupSizeLimit</span>  <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">amazons3</span><span class="o">/</span><span class="n">incr_size_limit</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent that the section should be appended to</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.amazons3.LocalConfig.amazons3">
<code class="descname">amazons3</code><a class="headerlink" href="#CedarBackup3.extend.amazons3.LocalConfig.amazons3" title="Permalink to this definition">¶</a></dt>
<dd><p>AmazonS3 configuration in terms of a <code class="docutils literal"><span class="pre">AmazonS3Config</span></code> object.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.amazons3.LocalConfig.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/amazons3.html#LocalConfig.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.amazons3.LocalConfig.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates configuration represented by the object.</p>
<p>AmazonS3 configuration must be filled in.  Within that, the s3Bucket target must be filled in</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the validations fails</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.amazons3.executeAction">
<code class="descclassname">CedarBackup3.extend.amazons3.</code><code class="descname">executeAction</code><span class="sig-paren">(</span><em>configPath</em>, <em>options</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/amazons3.html#executeAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.amazons3.executeAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the amazons3 backup action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>configPath</strong> (<em>String representing a path on disk</em>) &#8211; Path to configuration file on disk</li>
<li><strong>options</strong> (<em>Options object</em>) &#8211; Program command-line options</li>
<li><strong>config</strong> (<em>Config object</em>) &#8211; Program configuration</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; Under many generic error conditions</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there are I/O problems reading or writing files</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-CedarBackup3.extend.capacity">
<span id="cedarbackup3-extend-capacity-module"></span><h2>CedarBackup3.extend.capacity module<a class="headerlink" href="#module-CedarBackup3.extend.capacity" title="Permalink to this headline">¶</a></h2>
<p>Provides an extension to check remaining media capacity.</p>
<p>Some users have asked for advance warning that their media is beginning to fill
up.  This is an extension that checks the current capacity of the media in the
writer, and prints a warning if the media is more than X% full, or has fewer
than X bytes of capacity remaining.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.extend.capacity.CapacityConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.capacity.</code><code class="descname">CapacityConfig</code><span class="sig-paren">(</span><em>maxPercentage=None</em>, <em>minBytes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/capacity.html#CapacityConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.capacity.CapacityConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing capacity configuration.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The maximum percentage utilized must be a PercentageQuantity</li>
<li>The minimum bytes remaining must be a ByteQuantity</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.extend.capacity.CapacityConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>maxPercentage=None</em>, <em>minBytes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/capacity.html#CapacityConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.capacity.CapacityConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">CapacityConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>maxPercentage</strong> &#8211; Maximum percentage of the media that may be utilized</li>
<li><strong>minBytes</strong> &#8211; Minimum number of free bytes that must be available</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.capacity.CapacityConfig.maxPercentage">
<code class="descname">maxPercentage</code><a class="headerlink" href="#CedarBackup3.extend.capacity.CapacityConfig.maxPercentage" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum percentage of the media that may be utilized.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.capacity.CapacityConfig.minBytes">
<code class="descname">minBytes</code><a class="headerlink" href="#CedarBackup3.extend.capacity.CapacityConfig.minBytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimum number of free bytes that must be available.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.capacity.LocalConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.capacity.</code><code class="descname">LocalConfig</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/capacity.html#LocalConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.capacity.LocalConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing this extension&#8217;s configuration document.</p>
<p>This is not a general-purpose configuration object like the main Cedar
Backup configuration object.  Instead, it just knows how to parse and emit
specific configuration values to this extension.  Third parties who need to
read and write configuration related to this extension should access it
through the constructor, <code class="docutils literal"><span class="pre">validate</span></code> and <code class="docutils literal"><span class="pre">addConfig</span></code> methods.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.extend.capacity.LocalConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/capacity.html#LocalConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.capacity.LocalConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a configuration object.</p>
<p>If you initialize the object without passing either <code class="docutils literal"><span class="pre">xmlData</span></code> or
<code class="docutils literal"><span class="pre">xmlPath</span></code> then configuration will be empty and will be invalid until it
is filled in properly.</p>
<p>No reference to the original XML data or original path is saved off by
this class.  Once the data has been parsed (successfully or not) this
original information is discarded.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> argument is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.extend.capacity.LocalConfig.validate" title="CedarBackup3.extend.capacity.LocalConfig.validate"><code class="xref any py py-meth docutils literal"><span class="pre">LocalConfig.validate</span></code></a>
method will be called (with its default arguments) against configuration
after successfully parsing any passed-in XML.  Keep in mind that even if
<code class="docutils literal"><span class="pre">validate</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, it might not be possible to parse the passed-in
XML document if lower-level validations fail.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to read in
invalid configuration from disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlData</strong> (<em>String data</em>) &#8211; XML data representing configuration</li>
<li><strong>xmlPath</strong> (<em>Absolute path to a file on disk</em>) &#8211; Path to an XML file on disk</li>
<li><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the document after parsing it</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If both <code class="docutils literal"><span class="pre">xmlData</span></code> and <code class="docutils literal"><span class="pre">xmlPath</span></code> are passed-in</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the XML data in <code class="docutils literal"><span class="pre">xmlData</span></code> or <code class="docutils literal"><span class="pre">xmlPath</span></code> cannot be parsed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the parsed configuration document is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.capacity.LocalConfig.addConfig">
<code class="descname">addConfig</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/capacity.html#LocalConfig.addConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.capacity.LocalConfig.addConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a &lt;capacity&gt; configuration section as the next child of a parent.</p>
<p>Third parties should use this function to write configuration related to
this extension.</p>
<p>We add the following fields to the document:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">maxPercentage</span>  <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">capacity</span><span class="o">/</span><span class="n">max_percentage</span>
<span class="n">minBytes</span>       <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">capacity</span><span class="o">/</span><span class="n">min_bytes</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent that the section should be appended to</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.capacity.LocalConfig.capacity">
<code class="descname">capacity</code><a class="headerlink" href="#CedarBackup3.extend.capacity.LocalConfig.capacity" title="Permalink to this definition">¶</a></dt>
<dd><p>Capacity configuration in terms of a <code class="docutils literal"><span class="pre">CapacityConfig</span></code> object.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.capacity.LocalConfig.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/capacity.html#LocalConfig.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.capacity.LocalConfig.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates configuration represented by the object.
THere must be either a percentage, or a byte capacity, but not both.
:raises: <code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the validations fails</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.capacity.PercentageQuantity">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.capacity.</code><code class="descname">PercentageQuantity</code><span class="sig-paren">(</span><em>quantity=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/capacity.html#PercentageQuantity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.capacity.PercentageQuantity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing a percentage quantity.</p>
<p>The percentage is maintained internally as a string so that issues of
precision can be avoided.  It really isn&#8217;t possible to store a floating
point number here while being able to losslessly translate back and forth
between XML and object representations.  (Perhaps the Python 2.4 Decimal
class would have been an option, but I originally wanted to stay compatible
with Python 2.3.)</p>
<p>Even though the quantity is maintained as a string, the string must be in a
valid floating point positive number.  Technically, any floating point
string format supported by Python is allowble.  However, it does not make
sense to have a negative percentage in this context.</p>
<dl class="method">
<dt id="CedarBackup3.extend.capacity.PercentageQuantity.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>quantity=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/capacity.html#PercentageQuantity.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.capacity.PercentageQuantity.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">PercentageQuantity</span></code> class.
:param quantity: Percentage quantity, as a string (i.e. &#8220;99.9&#8221; or &#8220;12&#8221;)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the quantity value is invaid</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.capacity.PercentageQuantity.percentage">
<code class="descname">percentage</code><a class="headerlink" href="#CedarBackup3.extend.capacity.PercentageQuantity.percentage" title="Permalink to this definition">¶</a></dt>
<dd><p>Percentage value, as a floating point number.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.capacity.PercentageQuantity.quantity">
<code class="descname">quantity</code><a class="headerlink" href="#CedarBackup3.extend.capacity.PercentageQuantity.quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>Percentage value, as a string</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.capacity.executeAction">
<code class="descclassname">CedarBackup3.extend.capacity.</code><code class="descname">executeAction</code><span class="sig-paren">(</span><em>configPath</em>, <em>options</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/capacity.html#executeAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.capacity.executeAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the capacity action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>configPath</strong> (<em>String representing a path on disk</em>) &#8211; Path to configuration file on disk</li>
<li><strong>options</strong> (<em>Options object</em>) &#8211; Program command-line options</li>
<li><strong>config</strong> (<em>Config object</em>) &#8211; Program configuration</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; Under many generic error conditions</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there are I/O problems reading or writing files</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-CedarBackup3.extend.encrypt">
<span id="cedarbackup3-extend-encrypt-module"></span><h2>CedarBackup3.extend.encrypt module<a class="headerlink" href="#module-CedarBackup3.extend.encrypt" title="Permalink to this headline">¶</a></h2>
<p>Provides an extension to encrypt staging directories.</p>
<p>When this extension is executed, all backed-up files in the configured Cedar
Backup staging directory will be encrypted using gpg.  Any directory which has
already been encrypted (as indicated by the <code class="docutils literal"><span class="pre">cback.encrypt</span></code> file) will be
ignored.</p>
<p>This extension requires a new configuration section &lt;encrypt&gt; and is intended
to be run immediately after the standard stage action or immediately before the
standard store action.  Aside from its own configuration, it requires the
options and staging configuration sections in the standard Cedar Backup
configuration file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.extend.encrypt.EncryptConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.encrypt.</code><code class="descname">EncryptConfig</code><span class="sig-paren">(</span><em>encryptMode=None</em>, <em>encryptTarget=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/encrypt.html#EncryptConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.encrypt.EncryptConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing encrypt configuration.</p>
<p>Encrypt configuration is used for encrypting staging directories.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The encrypt mode must be one of the values in <code class="docutils literal"><span class="pre">VALID_ENCRYPT_MODES</span></code></li>
<li>The encrypt target value must be a non-empty string</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.extend.encrypt.EncryptConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>encryptMode=None</em>, <em>encryptTarget=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/encrypt.html#EncryptConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.encrypt.EncryptConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">EncryptConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>encryptMode</strong> &#8211; Encryption mode</li>
<li><strong>encryptTarget</strong> &#8211; Encryption target (for instance, GPG recipient)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.encrypt.EncryptConfig.encryptMode">
<code class="descname">encryptMode</code><a class="headerlink" href="#CedarBackup3.extend.encrypt.EncryptConfig.encryptMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Encrypt mode.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.encrypt.EncryptConfig.encryptTarget">
<code class="descname">encryptTarget</code><a class="headerlink" href="#CedarBackup3.extend.encrypt.EncryptConfig.encryptTarget" title="Permalink to this definition">¶</a></dt>
<dd><p>Encrypt target (i.e. GPG recipient).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.encrypt.LocalConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.encrypt.</code><code class="descname">LocalConfig</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/encrypt.html#LocalConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.encrypt.LocalConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing this extension&#8217;s configuration document.</p>
<p>This is not a general-purpose configuration object like the main Cedar
Backup configuration object.  Instead, it just knows how to parse and emit
encrypt-specific configuration values.  Third parties who need to read and
write configuration related to this extension should access it through the
constructor, <code class="docutils literal"><span class="pre">validate</span></code> and <code class="docutils literal"><span class="pre">addConfig</span></code> methods.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.extend.encrypt.LocalConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/encrypt.html#LocalConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.encrypt.LocalConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a configuration object.</p>
<p>If you initialize the object without passing either <code class="docutils literal"><span class="pre">xmlData</span></code> or
<code class="docutils literal"><span class="pre">xmlPath</span></code> then configuration will be empty and will be invalid until it
is filled in properly.</p>
<p>No reference to the original XML data or original path is saved off by
this class.  Once the data has been parsed (successfully or not) this
original information is discarded.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> argument is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.extend.encrypt.LocalConfig.validate" title="CedarBackup3.extend.encrypt.LocalConfig.validate"><code class="xref any py py-meth docutils literal"><span class="pre">LocalConfig.validate</span></code></a>
method will be called (with its default arguments) against configuration
after successfully parsing any passed-in XML.  Keep in mind that even if
<code class="docutils literal"><span class="pre">validate</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, it might not be possible to parse the passed-in
XML document if lower-level validations fail.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to read in
invalid configuration from disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlData</strong> (<em>String data</em>) &#8211; XML data representing configuration</li>
<li><strong>xmlPath</strong> (<em>Absolute path to a file on disk</em>) &#8211; Path to an XML file on disk</li>
<li><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the document after parsing it</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If both <code class="docutils literal"><span class="pre">xmlData</span></code> and <code class="docutils literal"><span class="pre">xmlPath</span></code> are passed-in</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the XML data in <code class="docutils literal"><span class="pre">xmlData</span></code> or <code class="docutils literal"><span class="pre">xmlPath</span></code> cannot be parsed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the parsed configuration document is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.encrypt.LocalConfig.addConfig">
<code class="descname">addConfig</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/encrypt.html#LocalConfig.addConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.encrypt.LocalConfig.addConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an &lt;encrypt&gt; configuration section as the next child of a parent.</p>
<p>Third parties should use this function to write configuration related to
this extension.</p>
<p>We add the following fields to the document:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">encryptMode</span>    <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">encrypt</span><span class="o">/</span><span class="n">encrypt_mode</span>
<span class="n">encryptTarget</span>  <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">encrypt</span><span class="o">/</span><span class="n">encrypt_target</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent that the section should be appended to</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.encrypt.LocalConfig.encrypt">
<code class="descname">encrypt</code><a class="headerlink" href="#CedarBackup3.extend.encrypt.LocalConfig.encrypt" title="Permalink to this definition">¶</a></dt>
<dd><p>Encrypt configuration in terms of a <code class="docutils literal"><span class="pre">EncryptConfig</span></code> object.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.encrypt.LocalConfig.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/encrypt.html#LocalConfig.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.encrypt.LocalConfig.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates configuration represented by the object.</p>
<p>Encrypt configuration must be filled in.  Within that, both the encrypt
mode and encrypt target must be filled in.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the validations fails</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.encrypt.executeAction">
<code class="descclassname">CedarBackup3.extend.encrypt.</code><code class="descname">executeAction</code><span class="sig-paren">(</span><em>configPath</em>, <em>options</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/encrypt.html#executeAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.encrypt.executeAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the encrypt backup action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>configPath</strong> (<em>String representing a path on disk</em>) &#8211; Path to configuration file on disk</li>
<li><strong>options</strong> (<em>Options object</em>) &#8211; Program command-line options</li>
<li><strong>config</strong> (<em>Config object</em>) &#8211; Program configuration</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; Under many generic error conditions</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there are I/O problems reading or writing files</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-CedarBackup3.extend.mbox">
<span id="cedarbackup3-extend-mbox-module"></span><h2>CedarBackup3.extend.mbox module<a class="headerlink" href="#module-CedarBackup3.extend.mbox" title="Permalink to this headline">¶</a></h2>
<p>Provides an extension to back up mbox email files.</p>
<div class="section" id="backing-up-email">
<h3>Backing up email<a class="headerlink" href="#backing-up-email" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Email folders (often stored as mbox flatfiles) are not well-suited being backed
up with an incremental backup like the one offered by Cedar Backup.  This is
because mbox files often change on a daily basis, forcing the incremental
backup process to back them up every day in order to avoid losing data.  This
can result in quite a bit of wasted space when backing up large folders.  (Note
that the alternative maildir format does not share this problem, since it
typically uses one file per message.)</p>
<p>One solution to this problem is to design a smarter incremental backup process,
which backs up baseline content on the first day of the week, and then backs up
only new messages added to that folder on every other day of the week.  This way,
the backup for any single day is only as large as the messages placed into the
folder on that day.  The backup isn&#8217;t as &#8220;perfect&#8221; as the incremental backup
process, because it doesn&#8217;t preserve information about messages deleted from
the backed-up folder.  However, it should be much more space-efficient, and
in a recovery situation, it seems better to restore too much data rather
than too little.</p>
</div></blockquote>
</div>
<div class="section" id="what-is-this-extension">
<h3>What is this extension?<a class="headerlink" href="#what-is-this-extension" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>This is a Cedar Backup extension used to back up mbox email files via the Cedar
Backup command line.  Individual mbox files or directories containing mbox
files can be backed up using the same collect modes allowed for filesystems in
the standard Cedar Backup collect action: weekly, daily, incremental.  It
implements the &#8220;smart&#8221; incremental backup process discussed above, using
functionality provided by the <code class="docutils literal"><span class="pre">grepmail</span></code> utility.</p>
<p>This extension requires a new configuration section &lt;mbox&gt; and is intended to
be run either immediately before or immediately after the standard collect
action.  Aside from its own configuration, it requires the options and collect
configuration sections in the standard Cedar Backup configuration file.</p>
<p>The mbox action is conceptually similar to the standard collect action,
except that mbox directories are not collected recursively.  This implies
some configuration changes (i.e. there&#8217;s no need for global exclusions or an
ignore file).  If you back up a directory, all of the mbox files in that
directory are backed up into a single tar file using the indicated
compression method.</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.extend.mbox.LocalConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.mbox.</code><code class="descname">LocalConfig</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mbox.html#LocalConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mbox.LocalConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing this extension&#8217;s configuration document.</p>
<p>This is not a general-purpose configuration object like the main Cedar
Backup configuration object.  Instead, it just knows how to parse and emit
Mbox-specific configuration values.  Third parties who need to read and
write configuration related to this extension should access it through the
constructor, <code class="docutils literal"><span class="pre">validate</span></code> and <code class="docutils literal"><span class="pre">addConfig</span></code> methods.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.extend.mbox.LocalConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mbox.html#LocalConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mbox.LocalConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a configuration object.</p>
<p>If you initialize the object without passing either <code class="docutils literal"><span class="pre">xmlData</span></code> or
<code class="docutils literal"><span class="pre">xmlPath</span></code> then configuration will be empty and will be invalid until it
is filled in properly.</p>
<p>No reference to the original XML data or original path is saved off by
this class.  Once the data has been parsed (successfully or not) this
original information is discarded.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> argument is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.extend.mbox.LocalConfig.validate" title="CedarBackup3.extend.mbox.LocalConfig.validate"><code class="xref any py py-meth docutils literal"><span class="pre">LocalConfig.validate</span></code></a>
method will be called (with its default arguments) against configuration
after successfully parsing any passed-in XML.  Keep in mind that even if
<code class="docutils literal"><span class="pre">validate</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, it might not be possible to parse the passed-in
XML document if lower-level validations fail.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to read in
invalid configuration from disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlData</strong> (<em>String data</em>) &#8211; XML data representing configuration</li>
<li><strong>xmlPath</strong> (<em>Absolute path to a file on disk</em>) &#8211; Path to an XML file on disk</li>
<li><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the document after parsing it</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If both <code class="docutils literal"><span class="pre">xmlData</span></code> and <code class="docutils literal"><span class="pre">xmlPath</span></code> are passed-in</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the XML data in <code class="docutils literal"><span class="pre">xmlData</span></code> or <code class="docutils literal"><span class="pre">xmlPath</span></code> cannot be parsed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the parsed configuration document is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.mbox.LocalConfig.addConfig">
<code class="descname">addConfig</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mbox.html#LocalConfig.addConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mbox.LocalConfig.addConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an &lt;mbox&gt; configuration section as the next child of a parent.</p>
<p>Third parties should use this function to write configuration related to
this extension.</p>
<p>We add the following fields to the document:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">collectMode</span>    <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mbox</span><span class="o">/</span><span class="n">collectMode</span>
<span class="n">compressMode</span>   <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mbox</span><span class="o">/</span><span class="n">compressMode</span>
</pre></div>
</div>
<p>We also add groups of the following items, one list element per
item:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mboxFiles</span>      <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mbox</span><span class="o">/</span><span class="n">file</span>
<span class="n">mboxDirs</span>       <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mbox</span><span class="o">/</span><span class="nb">dir</span>
</pre></div>
</div>
<p>The mbox files and mbox directories are added by <code class="docutils literal"><span class="pre">_addMboxFile</span></code> and
<code class="docutils literal"><span class="pre">_addMboxDir</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent that the section should be appended to</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.LocalConfig.mbox">
<code class="descname">mbox</code><a class="headerlink" href="#CedarBackup3.extend.mbox.LocalConfig.mbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Mbox configuration in terms of a <code class="docutils literal"><span class="pre">MboxConfig</span></code> object.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.mbox.LocalConfig.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mbox.html#LocalConfig.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mbox.LocalConfig.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates configuration represented by the object.</p>
<p>Mbox configuration must be filled in.  Within that, the collect mode and
compress mode are both optional, but the list of repositories must
contain at least one entry.</p>
<p>Each configured file or directory must contain an absolute path, and then
must be either able to take collect mode and compress mode configuration
from the parent <code class="docutils literal"><span class="pre">MboxConfig</span></code> object, or must set each value on its own.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the validations fails</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.mbox.MboxConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.mbox.</code><code class="descname">MboxConfig</code><span class="sig-paren">(</span><em>collectMode=None</em>, <em>compressMode=None</em>, <em>mboxFiles=None</em>, <em>mboxDirs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mbox.html#MboxConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing mbox configuration.</p>
<p>Mbox configuration is used for backing up mbox email files.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The collect mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COLLECT_MODES" title="CedarBackup3.config.VALID_COLLECT_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COLLECT_MODES</span></code></a>.</li>
<li>The compress mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COMPRESS_MODES" title="CedarBackup3.config.VALID_COMPRESS_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COMPRESS_MODES</span></code></a>.</li>
<li>The <code class="docutils literal"><span class="pre">mboxFiles</span></code> list must be a list of <code class="docutils literal"><span class="pre">MboxFile</span></code> objects</li>
<li>The <code class="docutils literal"><span class="pre">mboxDirs</span></code> list must be a list of <code class="docutils literal"><span class="pre">MboxDir</span></code> objects</li>
</ul>
</div></blockquote>
<p>For the <code class="docutils literal"><span class="pre">mboxFiles</span></code> and <code class="docutils literal"><span class="pre">mboxDirs</span></code> lists, validation is accomplished
through the <a class="reference internal" href="CedarBackup3.html#CedarBackup3.util.ObjectTypeList" title="CedarBackup3.util.ObjectTypeList"><code class="xref any py py-class docutils literal"><span class="pre">util.ObjectTypeList</span></code></a> list implementation that overrides common
list methods and transparently ensures that each element is of the proper
type.</p>
<p>Unlike collect configuration, no global exclusions are allowed on this
level.  We only allow relative exclusions at the mbox directory level.
Also, there is no configured ignore file.  This is because mbox directory
backups are not recursive.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.extend.mbox.MboxConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>collectMode=None</em>, <em>compressMode=None</em>, <em>mboxFiles=None</em>, <em>mboxDirs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mbox.html#MboxConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">MboxConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>collectMode</strong> &#8211; Default collect mode</li>
<li><strong>compressMode</strong> &#8211; Default compress mode</li>
<li><strong>mboxFiles</strong> &#8211; List of mbox files to back up</li>
<li><strong>mboxDirs</strong> &#8211; List of mbox directories to back up</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxConfig.collectMode">
<code class="descname">collectMode</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxConfig.collectMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Default collect mode.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxConfig.compressMode">
<code class="descname">compressMode</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxConfig.compressMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Default compress mode.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxConfig.mboxDirs">
<code class="descname">mboxDirs</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxConfig.mboxDirs" title="Permalink to this definition">¶</a></dt>
<dd><p>List of mbox directories to back up.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxConfig.mboxFiles">
<code class="descname">mboxFiles</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxConfig.mboxFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>List of mbox files to back up.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.mbox.MboxDir">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.mbox.</code><code class="descname">MboxDir</code><span class="sig-paren">(</span><em>absolutePath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em>, <em>relativeExcludePaths=None</em>, <em>excludePatterns=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mbox.html#MboxDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing mbox directory configuration..</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The absolute path must be absolute.</li>
<li>The collect mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COLLECT_MODES" title="CedarBackup3.config.VALID_COLLECT_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COLLECT_MODES</span></code></a>.</li>
<li>The compress mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COMPRESS_MODES" title="CedarBackup3.config.VALID_COMPRESS_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COMPRESS_MODES</span></code></a>.</li>
</ul>
</div></blockquote>
<p>Unlike collect directory configuration, this is the only place exclusions
are allowed (no global exclusions at the &lt;mbox&gt; configuration level).  Also,
we only allow relative exclusions and there is no configured ignore file.
This is because mbox directory backups are not recursive.</p>
<dl class="method">
<dt id="CedarBackup3.extend.mbox.MboxDir.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>absolutePath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em>, <em>relativeExcludePaths=None</em>, <em>excludePatterns=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mbox.html#MboxDir.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxDir.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">MboxDir</span></code> class.</p>
<p>You should never directly instantiate this class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>absolutePath</strong> &#8211; Absolute path to a mbox file on disk</li>
<li><strong>collectMode</strong> &#8211; Overridden collect mode for this directory</li>
<li><strong>compressMode</strong> &#8211; Overridden compression mode for this directory</li>
<li><strong>relativeExcludePaths</strong> &#8211; List of relative paths to exclude</li>
<li><strong>excludePatterns</strong> &#8211; List of regular expression patterns to exclude</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxDir.absolutePath">
<code class="descname">absolutePath</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxDir.absolutePath" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path to the mbox directory.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxDir.collectMode">
<code class="descname">collectMode</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxDir.collectMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden collect mode for this mbox directory.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxDir.compressMode">
<code class="descname">compressMode</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxDir.compressMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden compress mode for this mbox directory.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxDir.excludePatterns">
<code class="descname">excludePatterns</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxDir.excludePatterns" title="Permalink to this definition">¶</a></dt>
<dd><p>List of regular expression patterns to exclude.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxDir.relativeExcludePaths">
<code class="descname">relativeExcludePaths</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxDir.relativeExcludePaths" title="Permalink to this definition">¶</a></dt>
<dd><p>List of relative paths to exclude.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.mbox.MboxFile">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.mbox.</code><code class="descname">MboxFile</code><span class="sig-paren">(</span><em>absolutePath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mbox.html#MboxFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing mbox file configuration..</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The absolute path must be absolute.</li>
<li>The collect mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COLLECT_MODES" title="CedarBackup3.config.VALID_COLLECT_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COLLECT_MODES</span></code></a>.</li>
<li>The compress mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COMPRESS_MODES" title="CedarBackup3.config.VALID_COMPRESS_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COMPRESS_MODES</span></code></a>.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.extend.mbox.MboxFile.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>absolutePath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mbox.html#MboxFile.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxFile.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">MboxFile</span></code> class.</p>
<p>You should never directly instantiate this class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>absolutePath</strong> &#8211; Absolute path to an mbox file on disk</li>
<li><strong>collectMode</strong> &#8211; Overridden collect mode for this directory</li>
<li><strong>compressMode</strong> &#8211; Overridden compression mode for this directory</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxFile.absolutePath">
<code class="descname">absolutePath</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxFile.absolutePath" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path to the mbox file.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxFile.collectMode">
<code class="descname">collectMode</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxFile.collectMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden collect mode for this mbox file.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mbox.MboxFile.compressMode">
<code class="descname">compressMode</code><a class="headerlink" href="#CedarBackup3.extend.mbox.MboxFile.compressMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden compress mode for this mbox file.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.mbox.executeAction">
<code class="descclassname">CedarBackup3.extend.mbox.</code><code class="descname">executeAction</code><span class="sig-paren">(</span><em>configPath</em>, <em>options</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mbox.html#executeAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mbox.executeAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the mbox backup action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>configPath</strong> (<em>String representing a path on disk</em>) &#8211; Path to configuration file on disk</li>
<li><strong>options</strong> (<em>Options object</em>) &#8211; Program command-line options</li>
<li><strong>config</strong> (<em>Config object</em>) &#8211; Program configuration</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; Under many generic error conditions</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If a backup could not be written for some reason</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-CedarBackup3.extend.mysql">
<span id="cedarbackup3-extend-mysql-module"></span><h2>CedarBackup3.extend.mysql module<a class="headerlink" href="#module-CedarBackup3.extend.mysql" title="Permalink to this headline">¶</a></h2>
<p>Provides an extension to back up MySQL databases.</p>
<p>This is a Cedar Backup extension used to back up MySQL databases via the Cedar
Backup command line.  It requires a new configuration section &lt;mysql&gt; and is
intended to be run either immediately before or immediately after the standard
collect action.  Aside from its own configuration, it requires the options and
collect configuration sections in the standard Cedar Backup configuration file.</p>
<p>The backup is done via the <code class="docutils literal"><span class="pre">mysqldump</span></code> command included with the MySQL
product.  Output can be compressed using <code class="docutils literal"><span class="pre">gzip</span></code> or <code class="docutils literal"><span class="pre">bzip2</span></code>.  Administrators
can configure the extension either to back up all databases or to back up only
specific databases.  Note that this code always produces a full backup.  There
is currently no facility for making incremental backups.  If/when someone has a
need for this and can describe how to do it, I&#8217;ll update this extension or
provide another.</p>
<p>The extension assumes that all configured databases can be backed up by a
single user.  Often, the &#8220;root&#8221; database user will be used.  An alternative is
to create a separate MySQL &#8220;backup&#8221; user and grant that user rights to read
(but not write) various databases as needed.  This second option is probably
the best choice.</p>
<p>The extension accepts a username and password in configuration.  However, you
probably do not want to provide those values in Cedar Backup configuration.
This is because Cedar Backup will provide these values to <code class="docutils literal"><span class="pre">mysqldump</span></code> via the
command-line <code class="docutils literal"><span class="pre">--user</span></code> and <code class="docutils literal"><span class="pre">--password</span></code> switches, which will be visible to
other users in the process listing.</p>
<p>Instead, you should configure the username and password in one of MySQL&#8217;s
configuration files.  Typically, that would be done by putting a stanza like
this in <code class="docutils literal"><span class="pre">/root/.my.cnf</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">mysqldump</span><span class="p">]</span>
<span class="n">user</span>     <span class="o">=</span> <span class="n">root</span>
<span class="n">password</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">secret</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Regardless of whether you are using <code class="docutils literal"><span class="pre">~/.my.cnf</span></code> or <code class="docutils literal"><span class="pre">/etc/cback3.conf</span></code> to store
database login and password information, you should be careful about who is
allowed to view that information.  Typically, this means locking down
permissions so that only the file owner can read the file contents (i.e. use
mode <code class="docutils literal"><span class="pre">0600</span></code>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.extend.mysql.LocalConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.mysql.</code><code class="descname">LocalConfig</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mysql.html#LocalConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing this extension&#8217;s configuration document.</p>
<p>This is not a general-purpose configuration object like the main Cedar
Backup configuration object.  Instead, it just knows how to parse and emit
MySQL-specific configuration values.  Third parties who need to read and
write configuration related to this extension should access it through the
constructor, <code class="docutils literal"><span class="pre">validate</span></code> and <code class="docutils literal"><span class="pre">addConfig</span></code> methods.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.extend.mysql.LocalConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mysql.html#LocalConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a configuration object.</p>
<p>If you initialize the object without passing either <code class="docutils literal"><span class="pre">xmlData</span></code> or
<code class="docutils literal"><span class="pre">xmlPath</span></code> then configuration will be empty and will be invalid until it
is filled in properly.</p>
<p>No reference to the original XML data or original path is saved off by
this class.  Once the data has been parsed (successfully or not) this
original information is discarded.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> argument is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.extend.mysql.LocalConfig.validate" title="CedarBackup3.extend.mysql.LocalConfig.validate"><code class="xref any py py-meth docutils literal"><span class="pre">LocalConfig.validate</span></code></a>
method will be called (with its default arguments) against configuration
after successfully parsing any passed-in XML.  Keep in mind that even if
<code class="docutils literal"><span class="pre">validate</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, it might not be possible to parse the passed-in
XML document if lower-level validations fail.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to read in
invalid configuration from disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlData</strong> (<em>String data</em>) &#8211; XML data representing configuration</li>
<li><strong>xmlPath</strong> (<em>Absolute path to a file on disk</em>) &#8211; Path to an XML file on disk</li>
<li><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the document after parsing it</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If both <code class="docutils literal"><span class="pre">xmlData</span></code> and <code class="docutils literal"><span class="pre">xmlPath</span></code> are passed-in</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the XML data in <code class="docutils literal"><span class="pre">xmlData</span></code> or <code class="docutils literal"><span class="pre">xmlPath</span></code> cannot be parsed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the parsed configuration document is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.mysql.LocalConfig.addConfig">
<code class="descname">addConfig</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mysql.html#LocalConfig.addConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.addConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a &lt;mysql&gt; configuration section as the next child of a parent.</p>
<p>Third parties should use this function to write configuration related to
this extension.</p>
<p>We add the following fields to the document:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">user</span>           <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">user</span>
<span class="n">password</span>       <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">password</span>
<span class="n">compressMode</span>   <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">compress_mode</span>
<span class="nb">all</span>            <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="nb">all</span>
</pre></div>
</div>
<p>We also add groups of the following items, one list element per
item:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">database</span>       <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">database</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent that the section should be appended to</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mysql.LocalConfig.mysql">
<code class="descname">mysql</code><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.mysql" title="Permalink to this definition">¶</a></dt>
<dd><p>Mysql configuration in terms of a <code class="docutils literal"><span class="pre">MysqlConfig</span></code> object.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.mysql.LocalConfig.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mysql.html#LocalConfig.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mysql.LocalConfig.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates configuration represented by the object.</p>
<p>The compress mode must be filled in.  Then, if the &#8216;all&#8217; flag <em>is</em> set,
no databases are allowed, and if the &#8216;all&#8217; flag is <em>not</em> set, at least
one database is required.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the validations fails</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.mysql.MysqlConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.mysql.</code><code class="descname">MysqlConfig</code><span class="sig-paren">(</span><em>user=None</em>, <em>password=None</em>, <em>compressMode=None</em>, <em>all=None</em>, <em>databases=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mysql.html#MysqlConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing MySQL configuration.</p>
<p>The MySQL configuration information is used for backing up MySQL databases.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The compress mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COMPRESS_MODES" title="CedarBackup3.config.VALID_COMPRESS_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COMPRESS_MODES</span></code></a>.</li>
<li>The &#8216;all&#8217; flag must be &#8216;Y&#8217; if no databases are defined.</li>
<li>The &#8216;all&#8217; flag must be &#8216;N&#8217; if any databases are defined.</li>
<li>Any values in the databases list must be strings.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.extend.mysql.MysqlConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>user=None</em>, <em>password=None</em>, <em>compressMode=None</em>, <em>all=None</em>, <em>databases=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mysql.html#MysqlConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">MysqlConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>user</strong> &#8211; User to execute backup as</li>
<li><strong>password</strong> &#8211; Password associated with user</li>
<li><strong>compressMode</strong> &#8211; Compress mode for backed-up files</li>
<li><strong>all</strong> &#8211; Indicates whether to back up all databases</li>
<li><strong>databases</strong> &#8211; List of databases to back up</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mysql.MysqlConfig.all">
<code class="descname">all</code><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether to back up all databases.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mysql.MysqlConfig.compressMode">
<code class="descname">compressMode</code><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.compressMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Compress mode to be used for backed-up files.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mysql.MysqlConfig.databases">
<code class="descname">databases</code><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.databases" title="Permalink to this definition">¶</a></dt>
<dd><p>List of databases to back up.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mysql.MysqlConfig.password">
<code class="descname">password</code><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.password" title="Permalink to this definition">¶</a></dt>
<dd><p>Password associated with user.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.mysql.MysqlConfig.user">
<code class="descname">user</code><a class="headerlink" href="#CedarBackup3.extend.mysql.MysqlConfig.user" title="Permalink to this definition">¶</a></dt>
<dd><p>User to execute backup as.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.mysql.backupDatabase">
<code class="descclassname">CedarBackup3.extend.mysql.</code><code class="descname">backupDatabase</code><span class="sig-paren">(</span><em>user</em>, <em>password</em>, <em>backupFile</em>, <em>database=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mysql.html#backupDatabase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mysql.backupDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>Backs up an individual MySQL database, or all databases.</p>
<p>This function backs up either a named local MySQL database or all local
MySQL databases, using the passed-in user and password (if provided) for
connectivity.  This function call <em>always</em> results a full backup.  There is
no facility for incremental backups.</p>
<p>The backup data will be written into the passed-in backup file.  Normally,
this would be an object as returned from <code class="docutils literal"><span class="pre">open</span></code>, but it is possible to
use something like a <code class="docutils literal"><span class="pre">GzipFile</span></code> to write compressed output.  The caller is
responsible for closing the passed-in backup file.</p>
<p>Often, the &#8220;root&#8221; database user will be used when backing up all databases.
An alternative is to create a separate MySQL &#8220;backup&#8221; user and grant that
user rights to read (but not write) all of the databases that will be backed
up.</p>
<p>This function accepts a username and password.  However, you probably do not
want to pass those values in.  This is because they will be provided to
<code class="docutils literal"><span class="pre">mysqldump</span></code> via the command-line <code class="docutils literal"><span class="pre">--user</span></code> and <code class="docutils literal"><span class="pre">--password</span></code> switches,
which will be visible to other users in the process listing.</p>
<p>Instead, you should configure the username and password in one of MySQL&#8217;s
configuration files.  Typically, this would be done by putting a stanza like
this in <code class="docutils literal"><span class="pre">/root/.my.cnf</span></code>, to provide <code class="docutils literal"><span class="pre">mysqldump</span></code> with the root database
username and its password:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">mysqldump</span><span class="p">]</span>
<span class="n">user</span>     <span class="o">=</span> <span class="n">root</span>
<span class="n">password</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">secret</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If you are executing this function as some system user other than root, then
the <code class="docutils literal"><span class="pre">.my.cnf</span></code> file would be placed in the home directory of that user.  In
either case, make sure to set restrictive permissions (typically, mode
<code class="docutils literal"><span class="pre">0600</span></code>) on <code class="docutils literal"><span class="pre">.my.cnf</span></code> to make sure that other users cannot read the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>user</strong> (String representing MySQL username, or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; User to use for connecting to the database (if any)</li>
<li><strong>password</strong> (String representing MySQL password, or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; Password associated with user (if any)</li>
<li><strong>backupFile</strong> (Python file object as from <code class="docutils literal"><span class="pre">open</span></code> or <code class="docutils literal"><span class="pre">file</span></code>) &#8211; File use for writing backup</li>
<li><strong>database</strong> (String representing database name, or <code class="docutils literal"><span class="pre">None</span></code> for all databases) &#8211; Name of the database to be backed up</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If some value is missing or invalid</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is a problem executing the MySQL dump</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.mysql.executeAction">
<code class="descclassname">CedarBackup3.extend.mysql.</code><code class="descname">executeAction</code><span class="sig-paren">(</span><em>configPath</em>, <em>options</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/mysql.html#executeAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.mysql.executeAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the MySQL backup action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>configPath</strong> (<em>String representing a path on disk</em>) &#8211; Path to configuration file on disk</li>
<li><strong>options</strong> (<em>Options object</em>) &#8211; Program command-line options</li>
<li><strong>config</strong> (<em>Config object</em>) &#8211; Program configuration</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; Under many generic error conditions</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If a backup could not be written for some reason</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-CedarBackup3.extend.postgresql">
<span id="cedarbackup3-extend-postgresql-module"></span><h2>CedarBackup3.extend.postgresql module<a class="headerlink" href="#module-CedarBackup3.extend.postgresql" title="Permalink to this headline">¶</a></h2>
<p>Provides an extension to back up PostgreSQL databases.</p>
<p>This is a Cedar Backup extension used to back up PostgreSQL databases via the
Cedar Backup command line.  It requires a new configurations section
&lt;postgresql&gt; and is intended to be run either immediately before or immediately
after the standard collect action.  Aside from its own configuration, it
requires the options and collect configuration sections in the standard Cedar
Backup configuration file.</p>
<p>The backup is done via the <code class="docutils literal"><span class="pre">pg_dump</span></code> or <code class="docutils literal"><span class="pre">pg_dumpall</span></code> commands included with
the PostgreSQL product.  Output can be compressed using <code class="docutils literal"><span class="pre">gzip</span></code> or <code class="docutils literal"><span class="pre">bzip2</span></code>.
Administrators can configure the extension either to back up all databases or
to back up only specific databases.  The extension assumes that the current
user has passwordless access to the database since there is no easy way to pass
a password to the <code class="docutils literal"><span class="pre">pg_dump</span></code> client. This can be accomplished using appropriate
voodoo in the <code class="docutils literal"><span class="pre">pg_hda.conf</span></code> file.</p>
<p>Note that this code always produces a full backup.  There is currently no
facility for making incremental backups.</p>
<p>You should always make <code class="docutils literal"><span class="pre">/etc/cback3.conf</span></code> unreadble to non-root users once you
place postgresql configuration into it, since postgresql configuration will
contain information about available PostgreSQL databases and usernames.</p>
<p>Use of this extension <em>may</em> expose usernames in the process listing (via
<code class="docutils literal"><span class="pre">ps</span></code>) when the backup is running if the username is specified in the
configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
<tr class="field-even field"><th class="field-name">author:</th><td class="field-body">Antoine Beaupre &lt;<a class="reference external" href="mailto:anarcat&#37;&#52;&#48;koumbit&#46;org">anarcat<span>&#64;</span>koumbit<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.extend.postgresql.LocalConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.postgresql.</code><code class="descname">LocalConfig</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/postgresql.html#LocalConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing this extension&#8217;s configuration document.</p>
<p>This is not a general-purpose configuration object like the main Cedar
Backup configuration object.  Instead, it just knows how to parse and emit
PostgreSQL-specific configuration values.  Third parties who need to read and
write configuration related to this extension should access it through the
constructor, <code class="docutils literal"><span class="pre">validate</span></code> and <code class="docutils literal"><span class="pre">addConfig</span></code> methods.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.extend.postgresql.LocalConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/postgresql.html#LocalConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a configuration object.</p>
<p>If you initialize the object without passing either <code class="docutils literal"><span class="pre">xmlData</span></code> or
<code class="docutils literal"><span class="pre">xmlPath</span></code> then configuration will be empty and will be invalid until it
is filled in properly.</p>
<p>No reference to the original XML data or original path is saved off by
this class.  Once the data has been parsed (successfully or not) this
original information is discarded.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> argument is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.extend.postgresql.LocalConfig.validate" title="CedarBackup3.extend.postgresql.LocalConfig.validate"><code class="xref any py py-meth docutils literal"><span class="pre">LocalConfig.validate</span></code></a>
method will be called (with its default arguments) against configuration
after successfully parsing any passed-in XML.  Keep in mind that even if
<code class="docutils literal"><span class="pre">validate</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, it might not be possible to parse the passed-in
XML document if lower-level validations fail.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to read in
invalid configuration from disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlData</strong> (<em>String data</em>) &#8211; XML data representing configuration</li>
<li><strong>xmlPath</strong> (<em>Absolute path to a file on disk</em>) &#8211; Path to an XML file on disk</li>
<li><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the document after parsing it</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If both <code class="docutils literal"><span class="pre">xmlData</span></code> and <code class="docutils literal"><span class="pre">xmlPath</span></code> are passed-in</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the XML data in <code class="docutils literal"><span class="pre">xmlData</span></code> or <code class="docutils literal"><span class="pre">xmlPath</span></code> cannot be parsed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the parsed configuration document is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.postgresql.LocalConfig.addConfig">
<code class="descname">addConfig</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/postgresql.html#LocalConfig.addConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.addConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a &lt;postgresql&gt; configuration section as the next child of a parent.</p>
<p>Third parties should use this function to write configuration related to
this extension.</p>
<p>We add the following fields to the document:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">user</span>           <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">user</span>
<span class="n">compressMode</span>   <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">compress_mode</span>
<span class="nb">all</span>            <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="nb">all</span>
</pre></div>
</div>
<p>We also add groups of the following items, one list element per
item:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">database</span>       <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">database</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent that the section should be appended to</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.postgresql.LocalConfig.postgresql">
<code class="descname">postgresql</code><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.postgresql" title="Permalink to this definition">¶</a></dt>
<dd><p>Postgresql configuration in terms of a <code class="docutils literal"><span class="pre">PostgresqlConfig</span></code> object.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.postgresql.LocalConfig.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/postgresql.html#LocalConfig.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.postgresql.LocalConfig.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates configuration represented by the object.</p>
<p>The compress mode must be filled in.  Then, if the &#8216;all&#8217; flag
<em>is</em> set, no databases are allowed, and if the &#8216;all&#8217; flag is
<em>not</em> set, at least one database is required.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the validations fails</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.postgresql.PostgresqlConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.postgresql.</code><code class="descname">PostgresqlConfig</code><span class="sig-paren">(</span><em>user=None</em>, <em>compressMode=None</em>, <em>all=None</em>, <em>databases=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/postgresql.html#PostgresqlConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing PostgreSQL configuration.</p>
<p>The PostgreSQL configuration information is used for backing up PostgreSQL databases.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The compress mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COMPRESS_MODES" title="CedarBackup3.config.VALID_COMPRESS_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COMPRESS_MODES</span></code></a>.</li>
<li>The &#8216;all&#8217; flag must be &#8216;Y&#8217; if no databases are defined.</li>
<li>The &#8216;all&#8217; flag must be &#8216;N&#8217; if any databases are defined.</li>
<li>Any values in the databases list must be strings.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.extend.postgresql.PostgresqlConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>user=None</em>, <em>compressMode=None</em>, <em>all=None</em>, <em>databases=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/postgresql.html#PostgresqlConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">PostgresqlConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>user</strong> &#8211; User to execute backup as</li>
<li><strong>compressMode</strong> &#8211; Compress mode for backed-up files</li>
<li><strong>all</strong> &#8211; Indicates whether to back up all databases</li>
<li><strong>databases</strong> &#8211; List of databases to back up</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.postgresql.PostgresqlConfig.all">
<code class="descname">all</code><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether to back up all databases.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.postgresql.PostgresqlConfig.compressMode">
<code class="descname">compressMode</code><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.compressMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Compress mode to be used for backed-up files.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.postgresql.PostgresqlConfig.databases">
<code class="descname">databases</code><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.databases" title="Permalink to this definition">¶</a></dt>
<dd><p>List of databases to back up.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.postgresql.PostgresqlConfig.user">
<code class="descname">user</code><a class="headerlink" href="#CedarBackup3.extend.postgresql.PostgresqlConfig.user" title="Permalink to this definition">¶</a></dt>
<dd><p>User to execute backup as.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.postgresql.backupDatabase">
<code class="descclassname">CedarBackup3.extend.postgresql.</code><code class="descname">backupDatabase</code><span class="sig-paren">(</span><em>user</em>, <em>backupFile</em>, <em>database=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/postgresql.html#backupDatabase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.postgresql.backupDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>Backs up an individual PostgreSQL database, or all databases.</p>
<p>This function backs up either a named local PostgreSQL database or all local
PostgreSQL databases, using the passed in user for connectivity.
This is <em>always</em> a full backup.  There is no facility for incremental
backups.</p>
<p>The backup data will be written into the passed-in back file.  Normally,
this would be an object as returned from <code class="docutils literal"><span class="pre">open</span></code>, but it is possible to
use something like a <code class="docutils literal"><span class="pre">GzipFile</span></code> to write compressed output.  The caller is
responsible for closing the passed-in backup file.</p>
<p><em>Note:</em> Typically, you would use the <code class="docutils literal"><span class="pre">root</span></code> user to back up all databases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>user</strong> (<em>String representing PostgreSQL username</em>) &#8211; User to use for connecting to the database</li>
<li><strong>backupFile</strong> (Python file object as from <code class="docutils literal"><span class="pre">open</span></code> or <code class="docutils literal"><span class="pre">file</span></code>) &#8211; File use for writing backup</li>
<li><strong>database</strong> (String representing database name, or <code class="docutils literal"><span class="pre">None</span></code> for all databases) &#8211; Name of the database to be backed up</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If some value is missing or invalid</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is a problem executing the PostgreSQL dump</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.postgresql.executeAction">
<code class="descclassname">CedarBackup3.extend.postgresql.</code><code class="descname">executeAction</code><span class="sig-paren">(</span><em>configPath</em>, <em>options</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/postgresql.html#executeAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.postgresql.executeAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the PostgreSQL backup action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>configPath</strong> (<em>String representing a path on disk</em>) &#8211; Path to configuration file on disk</li>
<li><strong>options</strong> (<em>Options object</em>) &#8211; Program command-line options</li>
<li><strong>config</strong> (<em>Config object</em>) &#8211; Program configuration</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; Under many generic error conditions</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If a backup could not be written for some reason</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-CedarBackup3.extend.split">
<span id="cedarbackup3-extend-split-module"></span><h2>CedarBackup3.extend.split module<a class="headerlink" href="#module-CedarBackup3.extend.split" title="Permalink to this headline">¶</a></h2>
<p>Provides an extension to split up large files in staging directories.</p>
<p>When this extension is executed, it will look through the configured Cedar
Backup staging directory for files exceeding a specified size limit, and split
them down into smaller files using the &#8216;split&#8217; utility.  Any directory which
has already been split (as indicated by the <code class="docutils literal"><span class="pre">cback.split</span></code> file) will be
ignored.</p>
<p>This extension requires a new configuration section &lt;split&gt; and is intended
to be run immediately after the standard stage action or immediately before the
standard store action.  Aside from its own configuration, it requires the
options and staging configuration sections in the standard Cedar Backup
configuration file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.extend.split.LocalConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.split.</code><code class="descname">LocalConfig</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/split.html#LocalConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.split.LocalConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing this extension&#8217;s configuration document.</p>
<p>This is not a general-purpose configuration object like the main Cedar
Backup configuration object.  Instead, it just knows how to parse and emit
split-specific configuration values.  Third parties who need to read and
write configuration related to this extension should access it through the
constructor, <code class="docutils literal"><span class="pre">validate</span></code> and <code class="docutils literal"><span class="pre">addConfig</span></code> methods.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.extend.split.LocalConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/split.html#LocalConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.split.LocalConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a configuration object.</p>
<p>If you initialize the object without passing either <code class="docutils literal"><span class="pre">xmlData</span></code> or
<code class="docutils literal"><span class="pre">xmlPath</span></code> then configuration will be empty and will be invalid until it
is filled in properly.</p>
<p>No reference to the original XML data or original path is saved off by
this class.  Once the data has been parsed (successfully or not) this
original information is discarded.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> argument is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.extend.split.LocalConfig.validate" title="CedarBackup3.extend.split.LocalConfig.validate"><code class="xref any py py-meth docutils literal"><span class="pre">LocalConfig.validate</span></code></a>
method will be called (with its default arguments) against configuration
after successfully parsing any passed-in XML.  Keep in mind that even if
<code class="docutils literal"><span class="pre">validate</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, it might not be possible to parse the passed-in
XML document if lower-level validations fail.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to read in
invalid configuration from disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlData</strong> (<em>String data</em>) &#8211; XML data representing configuration</li>
<li><strong>xmlPath</strong> (<em>Absolute path to a file on disk</em>) &#8211; Path to an XML file on disk</li>
<li><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the document after parsing it</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If both <code class="docutils literal"><span class="pre">xmlData</span></code> and <code class="docutils literal"><span class="pre">xmlPath</span></code> are passed-in</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the XML data in <code class="docutils literal"><span class="pre">xmlData</span></code> or <code class="docutils literal"><span class="pre">xmlPath</span></code> cannot be parsed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the parsed configuration document is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.split.LocalConfig.addConfig">
<code class="descname">addConfig</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/split.html#LocalConfig.addConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.split.LocalConfig.addConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a &lt;split&gt; configuration section as the next child of a parent.</p>
<p>Third parties should use this function to write configuration related to
this extension.</p>
<p>We add the following fields to the document:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sizeLimit</span>      <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">split</span><span class="o">/</span><span class="n">size_limit</span>
<span class="n">splitSize</span>      <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">split</span><span class="o">/</span><span class="n">split_size</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent that the section should be appended to</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.split.LocalConfig.split">
<code class="descname">split</code><a class="headerlink" href="#CedarBackup3.extend.split.LocalConfig.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Split configuration in terms of a <code class="docutils literal"><span class="pre">SplitConfig</span></code> object.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.split.LocalConfig.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/split.html#LocalConfig.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.split.LocalConfig.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates configuration represented by the object.</p>
<p>Split configuration must be filled in.  Within that, both the size limit
and split size must be filled in.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the validations fails</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.split.SplitConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.split.</code><code class="descname">SplitConfig</code><span class="sig-paren">(</span><em>sizeLimit=None</em>, <em>splitSize=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/split.html#SplitConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.split.SplitConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing split configuration.</p>
<p>Split configuration is used for splitting staging directories.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The size limit must be a ByteQuantity</li>
<li>The split size must be a ByteQuantity</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="CedarBackup3.extend.split.SplitConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>sizeLimit=None</em>, <em>splitSize=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/split.html#SplitConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.split.SplitConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">SplitCOnfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sizeLimit</strong> &#8211; Size limit of the files, in bytes</li>
<li><strong>splitSize</strong> &#8211; Size that files exceeding the limit will be split into, in bytes</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.split.SplitConfig.sizeLimit">
<code class="descname">sizeLimit</code><a class="headerlink" href="#CedarBackup3.extend.split.SplitConfig.sizeLimit" title="Permalink to this definition">¶</a></dt>
<dd><p>Size limit, as a ByteQuantity</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.split.SplitConfig.splitSize">
<code class="descname">splitSize</code><a class="headerlink" href="#CedarBackup3.extend.split.SplitConfig.splitSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Split size, as a ByteQuantity</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.split.executeAction">
<code class="descclassname">CedarBackup3.extend.split.</code><code class="descname">executeAction</code><span class="sig-paren">(</span><em>configPath</em>, <em>options</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/split.html#executeAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.split.executeAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the split backup action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>configPath</strong> (<em>String representing a path on disk</em>) &#8211; Path to configuration file on disk</li>
<li><strong>options</strong> (<em>Options object</em>) &#8211; Program command-line options</li>
<li><strong>config</strong> (<em>Config object</em>) &#8211; Program configuration</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; Under many generic error conditions</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there are I/O problems reading or writing files</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-CedarBackup3.extend.subversion">
<span id="cedarbackup3-extend-subversion-module"></span><h2>CedarBackup3.extend.subversion module<a class="headerlink" href="#module-CedarBackup3.extend.subversion" title="Permalink to this headline">¶</a></h2>
<p>Provides an extension to back up Subversion repositories.</p>
<p>This is a Cedar Backup extension used to back up Subversion repositories via
the Cedar Backup command line.  Each Subversion repository can be backed using
the same collect modes allowed for filesystems in the standard Cedar Backup
collect action: weekly, daily, incremental.</p>
<p>This extension requires a new configuration section &lt;subversion&gt; and is
intended to be run either immediately before or immediately after the standard
collect action.  Aside from its own configuration, it requires the options and
collect configuration sections in the standard Cedar Backup configuration file.</p>
<p>There are two different kinds of Subversion repositories at this writing: BDB
(Berkeley Database) and FSFS (a &#8220;filesystem within a filesystem&#8221;).  Although
the repository type can be specified in configuration, that information is just
kept around for reference.  It doesn&#8217;t affect the backup.  Both kinds of
repositories are backed up in the same way, using <code class="docutils literal"><span class="pre">svnadmin</span> <span class="pre">dump</span></code> in an
incremental mode.</p>
<p>It turns out that FSFS repositories can also be backed up just like any
other filesystem directory.  If you would rather do that, then use the normal
collect action.  This is probably simpler, although it carries its own
advantages and disadvantages (plus you will have to be careful to exclude
the working directories Subversion uses when building an update to commit).
Check the Subversion documentation for more information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="CedarBackup3.extend.subversion.BDBRepository">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.subversion.</code><code class="descname">BDBRepository</code><span class="sig-paren">(</span><em>repositoryPath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#BDBRepository"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.BDBRepository" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CedarBackup3.extend.subversion.Repository" title="CedarBackup3.extend.subversion.Repository"><code class="xref py py-class docutils literal"><span class="pre">CedarBackup3.extend.subversion.Repository</span></code></a></p>
<p>Class representing Subversion BDB (Berkeley Database) repository configuration.
This object is deprecated.  Use a simple <a class="reference internal" href="#CedarBackup3.extend.subversion.Repository" title="CedarBackup3.extend.subversion.Repository"><code class="xref any py py-class docutils literal"><span class="pre">Repository</span></code></a> instead.</p>
<dl class="method">
<dt id="CedarBackup3.extend.subversion.BDBRepository.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>repositoryPath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#BDBRepository.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.BDBRepository.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">BDBRepository</span></code> class.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.subversion.FSFSRepository">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.subversion.</code><code class="descname">FSFSRepository</code><span class="sig-paren">(</span><em>repositoryPath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#FSFSRepository"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.FSFSRepository" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CedarBackup3.extend.subversion.Repository" title="CedarBackup3.extend.subversion.Repository"><code class="xref py py-class docutils literal"><span class="pre">CedarBackup3.extend.subversion.Repository</span></code></a></p>
<p>Class representing Subversion FSFS repository configuration.
This object is deprecated.  Use a simple <a class="reference internal" href="#CedarBackup3.extend.subversion.Repository" title="CedarBackup3.extend.subversion.Repository"><code class="xref any py py-class docutils literal"><span class="pre">Repository</span></code></a> instead.</p>
<dl class="method">
<dt id="CedarBackup3.extend.subversion.FSFSRepository.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>repositoryPath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#FSFSRepository.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.FSFSRepository.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">FSFSRepository</span></code> class.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.subversion.LocalConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.subversion.</code><code class="descname">LocalConfig</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#LocalConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.LocalConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing this extension&#8217;s configuration document.</p>
<p>This is not a general-purpose configuration object like the main Cedar
Backup configuration object.  Instead, it just knows how to parse and emit
Subversion-specific configuration values.  Third parties who need to read
and write configuration related to this extension should access it through
the constructor, <code class="docutils literal"><span class="pre">validate</span></code> and <code class="docutils literal"><span class="pre">addConfig</span></code> methods.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.extend.subversion.LocalConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>xmlData=None</em>, <em>xmlPath=None</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#LocalConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.LocalConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a configuration object.</p>
<p>If you initialize the object without passing either <code class="docutils literal"><span class="pre">xmlData</span></code> or
<code class="docutils literal"><span class="pre">xmlPath</span></code> then configuration will be empty and will be invalid until it
is filled in properly.</p>
<p>No reference to the original XML data or original path is saved off by
this class.  Once the data has been parsed (successfully or not) this
original information is discarded.</p>
<p>Unless the <code class="docutils literal"><span class="pre">validate</span></code> argument is <code class="docutils literal"><span class="pre">False</span></code>, the <a class="reference internal" href="#CedarBackup3.extend.subversion.LocalConfig.validate" title="CedarBackup3.extend.subversion.LocalConfig.validate"><code class="xref any py py-meth docutils literal"><span class="pre">LocalConfig.validate</span></code></a>
method will be called (with its default arguments) against configuration
after successfully parsing any passed-in XML.  Keep in mind that even if
<code class="docutils literal"><span class="pre">validate</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, it might not be possible to parse the passed-in
XML document if lower-level validations fail.</p>
<p><em>Note:</em> It is strongly suggested that the <code class="docutils literal"><span class="pre">validate</span></code> option always be set
to <code class="docutils literal"><span class="pre">True</span></code> (the default) unless there is a specific need to read in
invalid configuration from disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmlData</strong> (<em>String data</em>) &#8211; XML data representing configuration</li>
<li><strong>xmlPath</strong> (<em>Absolute path to a file on disk</em>) &#8211; Path to an XML file on disk</li>
<li><strong>validate</strong> (<em>Boolean true/false</em>) &#8211; Validate the document after parsing it</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If both <code class="docutils literal"><span class="pre">xmlData</span></code> and <code class="docutils literal"><span class="pre">xmlPath</span></code> are passed-in</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the XML data in <code class="docutils literal"><span class="pre">xmlData</span></code> or <code class="docutils literal"><span class="pre">xmlPath</span></code> cannot be parsed</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If the parsed configuration document is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.subversion.LocalConfig.addConfig">
<code class="descname">addConfig</code><span class="sig-paren">(</span><em>xmlDom</em>, <em>parentNode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#LocalConfig.addConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.LocalConfig.addConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a &lt;subversion&gt; configuration section as the next child of a parent.</p>
<p>Third parties should use this function to write configuration related to
this extension.</p>
<p>We add the following fields to the document:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">collectMode</span>    <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">subversion</span><span class="o">/</span><span class="n">collectMode</span>
<span class="n">compressMode</span>   <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">subversion</span><span class="o">/</span><span class="n">compressMode</span>
</pre></div>
</div>
<p>We also add groups of the following items, one list element per
item:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">repository</span>     <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">subversion</span><span class="o">/</span><span class="n">repository</span>
<span class="n">repository_dir</span> <span class="o">//</span><span class="n">cb_config</span><span class="o">/</span><span class="n">subversion</span><span class="o">/</span><span class="n">repository_dir</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xmlDom</strong> &#8211; DOM tree as from <code class="docutils literal"><span class="pre">impl.createDocument()</span></code></li>
<li><strong>parentNode</strong> &#8211; Parent that the section should be appended to</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.LocalConfig.subversion">
<code class="descname">subversion</code><a class="headerlink" href="#CedarBackup3.extend.subversion.LocalConfig.subversion" title="Permalink to this definition">¶</a></dt>
<dd><p>Subversion configuration in terms of a <code class="docutils literal"><span class="pre">SubversionConfig</span></code> object.</p>
</dd></dl>

<dl class="method">
<dt id="CedarBackup3.extend.subversion.LocalConfig.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#LocalConfig.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.LocalConfig.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates configuration represented by the object.</p>
<p>Subversion configuration must be filled in.  Within that, the collect
mode and compress mode are both optional, but the list of repositories
must contain at least one entry.</p>
<p>Each repository must contain a repository path, and then must be either
able to take collect mode and compress mode configuration from the parent
<code class="docutils literal"><span class="pre">SubversionConfig</span></code> object, or must set each value on its own.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the validations fails</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.subversion.Repository">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.subversion.</code><code class="descname">Repository</code><span class="sig-paren">(</span><em>repositoryType=None</em>, <em>repositoryPath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#Repository"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.Repository" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing generic Subversion repository configuration..</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The respository path must be absolute.</li>
<li>The collect mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COLLECT_MODES" title="CedarBackup3.config.VALID_COLLECT_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COLLECT_MODES</span></code></a>.</li>
<li>The compress mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COMPRESS_MODES" title="CedarBackup3.config.VALID_COMPRESS_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COMPRESS_MODES</span></code></a>.</li>
</ul>
</div></blockquote>
<p>The repository type value is kept around just for reference.  It doesn&#8217;t
affect the behavior of the backup.</p>
<dl class="method">
<dt id="CedarBackup3.extend.subversion.Repository.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>repositoryType=None</em>, <em>repositoryPath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#Repository.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.Repository.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">Repository</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>repositoryType</strong> &#8211; Type of repository, for reference</li>
<li><strong>repositoryPath</strong> &#8211; Absolute path to a Subversion repository on disk</li>
<li><strong>collectMode</strong> &#8211; Overridden collect mode for this directory</li>
<li><strong>compressMode</strong> &#8211; Overridden compression mode for this directory</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.Repository.collectMode">
<code class="descname">collectMode</code><a class="headerlink" href="#CedarBackup3.extend.subversion.Repository.collectMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden collect mode for this repository.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.Repository.compressMode">
<code class="descname">compressMode</code><a class="headerlink" href="#CedarBackup3.extend.subversion.Repository.compressMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden compress mode for this repository.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.Repository.repositoryPath">
<code class="descname">repositoryPath</code><a class="headerlink" href="#CedarBackup3.extend.subversion.Repository.repositoryPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the repository to collect.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.Repository.repositoryType">
<code class="descname">repositoryType</code><a class="headerlink" href="#CedarBackup3.extend.subversion.Repository.repositoryType" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of this repository, for reference.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.subversion.RepositoryDir">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.subversion.</code><code class="descname">RepositoryDir</code><span class="sig-paren">(</span><em>repositoryType=None</em>, <em>directoryPath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em>, <em>relativeExcludePaths=None</em>, <em>excludePatterns=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#RepositoryDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.RepositoryDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing Subversion repository directory.</p>
<p>A repository directory is a directory that contains one or more Subversion
repositories.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The directory path must be absolute.</li>
<li>The collect mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COLLECT_MODES" title="CedarBackup3.config.VALID_COLLECT_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COLLECT_MODES</span></code></a>.</li>
<li>The compress mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COMPRESS_MODES" title="CedarBackup3.config.VALID_COMPRESS_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COMPRESS_MODES</span></code></a>.</li>
</ul>
</div></blockquote>
<p>The repository type value is kept around just for reference.  It doesn&#8217;t
affect the behavior of the backup.</p>
<p>Relative exclusions are allowed here.  However, there is no configured
ignore file, because repository dir backups are not recursive.</p>
<dl class="method">
<dt id="CedarBackup3.extend.subversion.RepositoryDir.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>repositoryType=None</em>, <em>directoryPath=None</em>, <em>collectMode=None</em>, <em>compressMode=None</em>, <em>relativeExcludePaths=None</em>, <em>excludePatterns=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#RepositoryDir.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.RepositoryDir.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">RepositoryDir</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>repositoryType</strong> &#8211; Type of repository, for reference</li>
<li><strong>directoryPath</strong> &#8211; Absolute path of the Subversion parent directory</li>
<li><strong>collectMode</strong> &#8211; Overridden collect mode for this directory</li>
<li><strong>compressMode</strong> &#8211; Overridden compression mode for this directory</li>
<li><strong>relativeExcludePaths</strong> &#8211; List of relative paths to exclude</li>
<li><strong>excludePatterns</strong> &#8211; List of regular expression patterns to exclude</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.RepositoryDir.collectMode">
<code class="descname">collectMode</code><a class="headerlink" href="#CedarBackup3.extend.subversion.RepositoryDir.collectMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden collect mode for this repository.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.RepositoryDir.compressMode">
<code class="descname">compressMode</code><a class="headerlink" href="#CedarBackup3.extend.subversion.RepositoryDir.compressMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden compress mode for this repository.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.RepositoryDir.directoryPath">
<code class="descname">directoryPath</code><a class="headerlink" href="#CedarBackup3.extend.subversion.RepositoryDir.directoryPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path of the Subversion parent directory.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.RepositoryDir.excludePatterns">
<code class="descname">excludePatterns</code><a class="headerlink" href="#CedarBackup3.extend.subversion.RepositoryDir.excludePatterns" title="Permalink to this definition">¶</a></dt>
<dd><p>List of regular expression patterns to exclude.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.RepositoryDir.relativeExcludePaths">
<code class="descname">relativeExcludePaths</code><a class="headerlink" href="#CedarBackup3.extend.subversion.RepositoryDir.relativeExcludePaths" title="Permalink to this definition">¶</a></dt>
<dd><p>List of relative paths to exclude.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.RepositoryDir.repositoryType">
<code class="descname">repositoryType</code><a class="headerlink" href="#CedarBackup3.extend.subversion.RepositoryDir.repositoryType" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of this repository, for reference.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CedarBackup3.extend.subversion.SubversionConfig">
<em class="property">class </em><code class="descclassname">CedarBackup3.extend.subversion.</code><code class="descname">SubversionConfig</code><span class="sig-paren">(</span><em>collectMode=None</em>, <em>compressMode=None</em>, <em>repositories=None</em>, <em>repositoryDirs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#SubversionConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.SubversionConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class representing Subversion configuration.</p>
<p>Subversion configuration is used for backing up Subversion repositories.</p>
<p>The following restrictions exist on data in this class:</p>
<blockquote>
<div><ul class="simple">
<li>The collect mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COLLECT_MODES" title="CedarBackup3.config.VALID_COLLECT_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COLLECT_MODES</span></code></a>.</li>
<li>The compress mode must be one of the values in <a class="reference internal" href="CedarBackup3.html#CedarBackup3.config.VALID_COMPRESS_MODES" title="CedarBackup3.config.VALID_COMPRESS_MODES"><code class="xref any py py-attr docutils literal"><span class="pre">VALID_COMPRESS_MODES</span></code></a>.</li>
<li>The repositories list must be a list of <code class="docutils literal"><span class="pre">Repository</span></code> objects.</li>
<li>The repositoryDirs list must be a list of <code class="docutils literal"><span class="pre">RepositoryDir</span></code> objects.</li>
</ul>
</div></blockquote>
<p>For the two lists, validation is accomplished through the
<a class="reference internal" href="CedarBackup3.html#CedarBackup3.util.ObjectTypeList" title="CedarBackup3.util.ObjectTypeList"><code class="xref any py py-class docutils literal"><span class="pre">util.ObjectTypeList</span></code></a> list implementation that overrides common list
methods and transparently ensures that each element has the correct type.</p>
<p><em>Note:</em> Lists within this class are &#8220;unordered&#8221; for equality comparisons.</p>
<dl class="method">
<dt id="CedarBackup3.extend.subversion.SubversionConfig.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>collectMode=None</em>, <em>compressMode=None</em>, <em>repositories=None</em>, <em>repositoryDirs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#SubversionConfig.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.SubversionConfig.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for the <code class="docutils literal"><span class="pre">SubversionConfig</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>collectMode</strong> &#8211; Default collect mode</li>
<li><strong>compressMode</strong> &#8211; Default compress mode</li>
<li><strong>repositories</strong> &#8211; List of Subversion repositories to back up</li>
<li><strong>repositoryDirs</strong> &#8211; List of Subversion parent directories to back up</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If one of the values is invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.SubversionConfig.collectMode">
<code class="descname">collectMode</code><a class="headerlink" href="#CedarBackup3.extend.subversion.SubversionConfig.collectMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Default collect mode.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.SubversionConfig.compressMode">
<code class="descname">compressMode</code><a class="headerlink" href="#CedarBackup3.extend.subversion.SubversionConfig.compressMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Default compress mode.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.SubversionConfig.repositories">
<code class="descname">repositories</code><a class="headerlink" href="#CedarBackup3.extend.subversion.SubversionConfig.repositories" title="Permalink to this definition">¶</a></dt>
<dd><p>List of Subversion repositories to back up.</p>
</dd></dl>

<dl class="attribute">
<dt id="CedarBackup3.extend.subversion.SubversionConfig.repositoryDirs">
<code class="descname">repositoryDirs</code><a class="headerlink" href="#CedarBackup3.extend.subversion.SubversionConfig.repositoryDirs" title="Permalink to this definition">¶</a></dt>
<dd><p>List of Subversion parent directories to back up.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.subversion.backupBDBRepository">
<code class="descclassname">CedarBackup3.extend.subversion.</code><code class="descname">backupBDBRepository</code><span class="sig-paren">(</span><em>repositoryPath</em>, <em>backupFile</em>, <em>startRevision=None</em>, <em>endRevision=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#backupBDBRepository"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.backupBDBRepository" title="Permalink to this definition">¶</a></dt>
<dd><p>Backs up an individual Subversion BDB repository.
This function is deprecated.  Use <a class="reference internal" href="#CedarBackup3.extend.subversion.backupRepository" title="CedarBackup3.extend.subversion.backupRepository"><code class="xref any py py-func docutils literal"><span class="pre">backupRepository</span></code></a> instead.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.subversion.backupFSFSRepository">
<code class="descclassname">CedarBackup3.extend.subversion.</code><code class="descname">backupFSFSRepository</code><span class="sig-paren">(</span><em>repositoryPath</em>, <em>backupFile</em>, <em>startRevision=None</em>, <em>endRevision=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#backupFSFSRepository"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.backupFSFSRepository" title="Permalink to this definition">¶</a></dt>
<dd><p>Backs up an individual Subversion FSFS repository.
This function is deprecated.  Use <a class="reference internal" href="#CedarBackup3.extend.subversion.backupRepository" title="CedarBackup3.extend.subversion.backupRepository"><code class="xref any py py-func docutils literal"><span class="pre">backupRepository</span></code></a> instead.</p>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.subversion.backupRepository">
<code class="descclassname">CedarBackup3.extend.subversion.</code><code class="descname">backupRepository</code><span class="sig-paren">(</span><em>repositoryPath</em>, <em>backupFile</em>, <em>startRevision=None</em>, <em>endRevision=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#backupRepository"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.backupRepository" title="Permalink to this definition">¶</a></dt>
<dd><p>Backs up an individual Subversion repository.</p>
<p>The starting and ending revision values control an incremental backup.  If
the starting revision is not passed in, then revision zero (the start of the
repository) is assumed.  If the ending revision is not passed in, then the
youngest revision in the database will be used as the endpoint.</p>
<p>The backup data will be written into the passed-in back file.  Normally,
this would be an object as returned from <code class="docutils literal"><span class="pre">open</span></code>, but it is possible to use
something like a <code class="docutils literal"><span class="pre">GzipFile</span></code> to write compressed output.  The caller is
responsible for closing the passed-in backup file.</p>
<p><em>Note:</em> This function should either be run as root or as the owner of the
Subversion repository.</p>
<p><em>Note:</em> It is apparently <em>not</em> a good idea to interrupt this function.
Sometimes, this leaves the repository in a &#8220;wedged&#8221; state, which requires
recovery using <code class="docutils literal"><span class="pre">svnadmin</span> <span class="pre">recover</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>repositoryPath</strong> (<em>String path representing Subversion repository on disk</em>) &#8211; Path to Subversion repository to back up</li>
<li><strong>backupFile</strong> (Python file object as from <code class="docutils literal"><span class="pre">open</span></code> or <code class="docutils literal"><span class="pre">file</span></code>) &#8211; Python file object to use for writing backup</li>
<li><strong>startRevision</strong> (<em>Integer value &gt;= 0</em>) &#8211; Starting repository revision to back up (for incremental backups)</li>
<li><strong>endRevision</strong> (<em>Integer value &gt;= 0</em>) &#8211; Ending repository revision to back up (for incremental backups)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If some value is missing or invalid</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is a problem executing the Subversion dump</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.subversion.executeAction">
<code class="descclassname">CedarBackup3.extend.subversion.</code><code class="descname">executeAction</code><span class="sig-paren">(</span><em>configPath</em>, <em>options</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#executeAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.executeAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the Subversion backup action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>configPath</strong> (<em>String representing a path on disk</em>) &#8211; Path to configuration file on disk</li>
<li><strong>options</strong> (<em>Options object</em>) &#8211; Program command-line options</li>
<li><strong>config</strong> (<em>Config object</em>) &#8211; Program configuration</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; Under many generic error conditions</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If a backup could not be written for some reason</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="CedarBackup3.extend.subversion.getYoungestRevision">
<code class="descclassname">CedarBackup3.extend.subversion.</code><code class="descname">getYoungestRevision</code><span class="sig-paren">(</span><em>repositoryPath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/subversion.html#getYoungestRevision"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.subversion.getYoungestRevision" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the youngest (newest) revision in a Subversion repository using <code class="docutils literal"><span class="pre">svnlook</span></code>.</p>
<p><em>Note:</em> This function should either be run as root or as the owner of the
Subversion repository.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>repositoryPath</strong> (<em>String path representing Subversion repository on disk</em>) &#8211; Path to Subversion repository to look in</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Youngest revision as an integer</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; If there is a problem parsing the <code class="docutils literal"><span class="pre">svnlook</span></code> output</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If there is a problem executing the <code class="docutils literal"><span class="pre">svnlook</span></code> command</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-CedarBackup3.extend.sysinfo">
<span id="cedarbackup3-extend-sysinfo-module"></span><h2>CedarBackup3.extend.sysinfo module<a class="headerlink" href="#module-CedarBackup3.extend.sysinfo" title="Permalink to this headline">¶</a></h2>
<p>Provides an extension to save off important system recovery information.</p>
<p>This is a simple Cedar Backup extension used to save off important system
recovery information.  It saves off three types of information:</p>
<blockquote>
<div><ul class="simple">
<li>Currently-installed Debian packages via <code class="docutils literal"><span class="pre">dpkg</span> <span class="pre">--get-selections</span></code></li>
<li>Disk partition information via <code class="docutils literal"><span class="pre">fdisk</span> <span class="pre">-l</span></code></li>
<li>System-wide mounted filesystem contents, via <code class="docutils literal"><span class="pre">ls</span> <span class="pre">-laR</span></code></li>
</ul>
</div></blockquote>
<p>The saved-off information is placed into the collect directory and is
compressed using <code class="docutils literal"><span class="pre">bzip2</span></code> to save space.</p>
<p>This extension relies on the options and collect configurations in the standard
Cedar Backup configuration file, but requires no new configuration of its own.
No public functions other than the action are exposed since all of this is
pretty simple.</p>
<p><em>Note:</em> If the <code class="docutils literal"><span class="pre">dpkg</span></code> or <code class="docutils literal"><span class="pre">fdisk</span></code> commands cannot be found in their normal
locations or executed by the current user, those steps will be skipped and a
note will be logged at the INFO level.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Kenneth J. Pronovici &lt;<a class="reference external" href="mailto:pronovic&#37;&#52;&#48;ieee&#46;org">pronovic<span>&#64;</span>ieee<span>&#46;</span>org</a>&gt;</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="CedarBackup3.extend.sysinfo.executeAction">
<code class="descclassname">CedarBackup3.extend.sysinfo.</code><code class="descname">executeAction</code><span class="sig-paren">(</span><em>configPath</em>, <em>options</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/CedarBackup3/extend/sysinfo.html#executeAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CedarBackup3.extend.sysinfo.executeAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the sysinfo backup action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>configPath</strong> (<em>String representing a path on disk</em>) &#8211; Path to configuration file on disk</li>
<li><strong>options</strong> (<em>Options object</em>) &#8211; Program command-line options</li>
<li><strong>config</strong> (<em>Config object</em>) &#8211; Program configuration</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211; Under many generic error conditions</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code> &#8211; If the backup process fails for some reason</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">CedarBackup3.extend package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.extend.amazons3">CedarBackup3.extend.amazons3 module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.extend.capacity">CedarBackup3.extend.capacity module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.extend.encrypt">CedarBackup3.extend.encrypt module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.extend.mbox">CedarBackup3.extend.mbox module</a><ul>
<li><a class="reference internal" href="#backing-up-email">Backing up email</a></li>
<li><a class="reference internal" href="#what-is-this-extension">What is this extension?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-CedarBackup3.extend.mysql">CedarBackup3.extend.mysql module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.extend.postgresql">CedarBackup3.extend.postgresql module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.extend.split">CedarBackup3.extend.split module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.extend.subversion">CedarBackup3.extend.subversion module</a></li>
<li><a class="reference internal" href="#module-CedarBackup3.extend.sysinfo">CedarBackup3.extend.sysinfo module</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="CedarBackup3.actions.html"
                        title="previous chapter">CedarBackup3.actions package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="CedarBackup3.tools.html"
                        title="next chapter">CedarBackup3.tools package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/CedarBackup3.extend.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="CedarBackup3.tools.html" title="CedarBackup3.tools package"
             >next</a> |</li>
        <li class="right" >
          <a href="CedarBackup3.actions.html" title="CedarBackup3.actions package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cedar Backup v3  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="CedarBackup3.html" >CedarBackup3 package</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>
